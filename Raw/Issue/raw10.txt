[{"url":"https://api.github.com/repos/vercel/next.js/issues/64585","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64585/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64585/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64585/events","html_url":"https://github.com/vercel/next.js/issues/64585","id":2246847185,"node_id":"I_kwDOBC3Cis6F7CrR","number":64585,"title":"Server Action blocks navigation to Parallel / Intercepting Route (Modal)","user":{"login":"steve-marmalade","id":85196623,"node_id":"MDQ6VXNlcjg1MTk2NjIz","avatar_url":"https://avatars.githubusercontent.com/u/85196623?v=4","gravatar_id":"","url":"https://api.github.com/users/steve-marmalade","html_url":"https://github.com/steve-marmalade","followers_url":"https://api.github.com/users/steve-marmalade/followers","following_url":"https://api.github.com/users/steve-marmalade/following{/other_user}","gists_url":"https://api.github.com/users/steve-marmalade/gists{/gist_id}","starred_url":"https://api.github.com/users/steve-marmalade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steve-marmalade/subscriptions","organizations_url":"https://api.github.com/users/steve-marmalade/orgs","repos_url":"https://api.github.com/users/steve-marmalade/repos","events_url":"https://api.github.com/users/steve-marmalade/events{/privacy}","received_events_url":"https://api.github.com/users/steve-marmalade/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":6834840742,"node_id":"LA_kwDOBC3Cis8AAAABl2Nkpg","url":"https://api.github.com/repos/vercel/next.js/labels/Parallel%20&%20Intercepting%20Routes","name":"Parallel & Intercepting Routes","color":"1C2649","default":false,"description":"Related to Parallel and/or Intercepting routes."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-04-16T20:38:52Z","updated_at":"2024-05-10T00:04:25Z","closed_at":"2024-04-25T16:51:03Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\r\n\r\nhttps://github.com/marmalade-labs/nextgram/tree/action-and-route\r\n\r\n### To Reproduce\r\n\r\n1. Start the application or visit https://nextgram-git-action-and-route-marmalade.vercel.app/\r\n2. Click on either of the Toggle buttons \r\n\r\n### Current vs. Expected behavior\r\n\r\n## Click `Toggle (Modal Opens After Delay)`\r\n\r\n### Current Behavior\r\n\r\n1. The Optimistic Update of the toggle button completes immediately (we see the boolean value on the card change)\r\n2. **The Modal opens after the server action completes (artificial 2 second delay)**\r\n3. The Photo Grid can still be seen behind the Modal\r\n4. The content of the modal is up to date (it shows the toggled value)\r\n\r\n### Expected Behavior\r\n\r\n1. Same as current\r\n2. I expected the Modal to open immediately\r\n3. Same as current\r\n4. Since the server action was submitted after the navigation event, I would expect the Modal to open with the stale value, and have it update once the server action revalidation completes.\r\n\r\n## Click `Toggle (Delay + Empty Home Page)`\r\n\r\n### Current Behavior\r\n\r\n1. The Optimistic Update of the toggle button completes immediately (we see the boolean value on the card change)\r\n2. **The Modal opens after the server action completes (artificial 2 second delay)**\r\n3. **The Photo Grid behind the Modal has disappeared**\r\n4. The content of the modal is up to date (it shows the toggled value)\r\n\r\n### Expected Behavior\r\n\r\n1. Same as current\r\n2. I expected the Modal to open immediately\r\n3. I expected the Photo Grid to still be visible (since a `default.tsx` is present)\r\n4. Since the server action was started _before_ the navigation event, I would expect the Modal to open with either the stale or current value (a race, depending on the time it took the server action to update), but to have it ultimately settle on the latest value once the server action revalidation is completed.\r\n\r\n### Provide environment information\r\n\r\n```bash\r\nOperating System:\r\n  Platform: linux\r\n  Arch: x64\r\n  Version: #1 SMP PREEMPT_DYNAMIC Thu, 11 Apr 2024 01:47:33 +0000\r\n  Available memory (MB): 31886\r\n  Available CPU cores: 8\r\nBinaries:\r\n  Node: 18.18.2\r\n  npm: 10.5.2\r\n  Yarn: 1.22.22\r\n  pnpm: 8.15.5\r\nRelevant Packages:\r\n  next: 14.3.0-canary.5 // Latest available version is detected (14.3.0-canary.5).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\r\n```\r\n\r\n\r\n### Which area(s) are affected? (Select all that apply)\r\n\r\nApp Router, Routing (next/router, next/navigation, next/link)\r\n\r\n### Which stage(s) are affected? (Select all that apply)\r\n\r\nnext dev (local), next start (local), Vercel (Deployed)\r\n\r\n### Additional context\r\n\r\nThe motivation for this is a component that blends `button` and `Link` functionality -- i.e. we want to perform a mutation immediately as a result of the button click, but we also want to link to a Modal that displays some helpful additional actions the user might want to take. We can't wait for the server action revalidation to complete if we want to maintain the nice UX that we get from `useOptimistic`.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64585/timeline","performed_via_github_app":null,"state_reason":"not_planned"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64584","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64584/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64584/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64584/events","html_url":"https://github.com/vercel/next.js/issues/64584","id":2246826374,"node_id":"I_kwDOBC3Cis6F69mG","number":64584,"title":"router.refresh() causes 404 with basePath","user":{"login":"MarkusWendorf","id":18446907,"node_id":"MDQ6VXNlcjE4NDQ2OTA3","avatar_url":"https://avatars.githubusercontent.com/u/18446907?v=4","gravatar_id":"","url":"https://api.github.com/users/MarkusWendorf","html_url":"https://github.com/MarkusWendorf","followers_url":"https://api.github.com/users/MarkusWendorf/followers","following_url":"https://api.github.com/users/MarkusWendorf/following{/other_user}","gists_url":"https://api.github.com/users/MarkusWendorf/gists{/gist_id}","starred_url":"https://api.github.com/users/MarkusWendorf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarkusWendorf/subscriptions","organizations_url":"https://api.github.com/users/MarkusWendorf/orgs","repos_url":"https://api.github.com/users/MarkusWendorf/repos","events_url":"https://api.github.com/users/MarkusWendorf/events{/privacy}","received_events_url":"https://api.github.com/users/MarkusWendorf/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T20:23:59Z","updated_at":"2024-05-01T12:02:00Z","closed_at":"2024-04-17T01:01:47Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/MarkusWendorf/rsc-bug\n\n### To Reproduce\n\n1. npm run dev\r\n2. go to http://localhost:3000/path\r\n3. press \"Refresh\" button\n\n### Current vs. Expected behavior\n\nAfter pressing \"Refresh\" you can see 2 rsc requests:\r\n- 1 with basePath\r\n- 1 without basePath (causing a 404)\r\n\r\nExpected:\r\n- 1 request without a 404\r\n\r\n<img width=\"441\" alt=\"Screenshot 2024-04-16 at 22 22 46\" src=\"https://github.com/vercel/next.js/assets/18446907/8a04b308-c332-45bc-a53f-2f79f5ea6227\">\r\n\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 23.3.0: Wed Dec 20 21:30:44 PST 2023; root:xnu-10002.81.5~7/RELEASE_ARM64_T6000\r\n  Available memory (MB): 32768\r\n  Available CPU cores: 10\r\nBinaries:\r\n  Node: 20.9.0\r\n  npm: 10.1.0\r\n  Yarn: 1.22.19\r\n  pnpm: 8.15.4\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next start (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64584/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64583","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64583/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64583/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64583/events","html_url":"https://github.com/vercel/next.js/issues/64583","id":2246780980,"node_id":"I_kwDOBC3Cis6F6yg0","number":64583,"title":"generateSitemaps Can't Handle Double Digit Params","user":{"login":"rickyplouis","id":5281368,"node_id":"MDQ6VXNlcjUyODEzNjg=","avatar_url":"https://avatars.githubusercontent.com/u/5281368?v=4","gravatar_id":"","url":"https://api.github.com/users/rickyplouis","html_url":"https://github.com/rickyplouis","followers_url":"https://api.github.com/users/rickyplouis/followers","following_url":"https://api.github.com/users/rickyplouis/following{/other_user}","gists_url":"https://api.github.com/users/rickyplouis/gists{/gist_id}","starred_url":"https://api.github.com/users/rickyplouis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rickyplouis/subscriptions","organizations_url":"https://api.github.com/users/rickyplouis/orgs","repos_url":"https://api.github.com/users/rickyplouis/repos","events_url":"https://api.github.com/users/rickyplouis/events{/privacy}","received_events_url":"https://api.github.com/users/rickyplouis/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5907879217,"node_id":"LA_kwDOBC3Cis8AAAABYCMVMQ","url":"https://api.github.com/repos/vercel/next.js/labels/invalid%20link","name":"invalid link","color":"444444","default":false,"description":"The issue was auto-closed due to a missing/invalid reproduction link. A new issue should be opened."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T19:52:02Z","updated_at":"2024-04-16T19:52:21Z","closed_at":"2024-04-16T19:52:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Link to the code that reproduces this issue\n\nhttps://www.remotescouter.com/jobSitemaps/sitemap/10.xml\n\n### To Reproduce\n\nThis issue is only reproducible in prod environments since generateSitemaps behaves differently in prod versus local.\n\n### Current vs. Expected behavior\n\nI currently have 8 sitemap ids\r\n```js\r\n[\r\n  { id: 0 }, { id: 1 },\r\n  { id: 2 }, { id: 3 },\r\n  { id: 4 }, { id: 5 },\r\n  { id: 6 }, { id: 7 },\r\n  { id: 8 }\r\n]\r\n```\r\nHowever, whenever accessing double digit routes for the sitemap, the first character is taken to be the id and the rest are ignored.\r\n\r\nFor example, if I were to visit:\r\n\r\n`https://www.remotescouter.com/jobSitemaps/sitemap/44.xml`\r\n\r\n`export default async function sitemap({ id })` would yield `{ id: 4 }`\r\n\r\nor if I visit\r\n\r\n`https://www.remotescouter.com/jobSitemaps/sitemap/82.xml`\r\n\r\n`export default async function sitemap({ id })` would yield `{ id: 8 }`\r\n\r\nI tried testing it on a local branch, but this behavior doesn't occur on a development branch, making it harder to reproduce.\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: x64\r\n  Version: Darwin Kernel Version 23.3.0: Wed Dec 20 21:30:27 PST 2023; root:xnu-10002.81.5~7/RELEASE_ARM64_T8103\r\nBinaries:\r\n  Node: 19.4.0\r\n  npm: 9.2.0\r\n  Yarn: 1.22.19\r\n  pnpm: 8.15.3\r\nRelevant Packages:\r\n  next: 14.1.0\r\n  eslint-config-next: 14.1.0\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.3.3\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nMetadata (metadata, generateMetadata, next/head)\n\n### Which stage(s) are affected? (Select all that apply)\n\nVercel (Deployed)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64583/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64581","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64581/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64581/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64581/events","html_url":"https://github.com/vercel/next.js/pull/64581","id":2246738282,"node_id":"PR_kwDOBC3Cis5s1z0g","number":64581,"title":"Docs: Fix broken link","user":{"login":"delbaoliveira","id":32464864,"node_id":"MDQ6VXNlcjMyNDY0ODY0","avatar_url":"https://avatars.githubusercontent.com/u/32464864?v=4","gravatar_id":"","url":"https://api.github.com/users/delbaoliveira","html_url":"https://github.com/delbaoliveira","followers_url":"https://api.github.com/users/delbaoliveira/followers","following_url":"https://api.github.com/users/delbaoliveira/following{/other_user}","gists_url":"https://api.github.com/users/delbaoliveira/gists{/gist_id}","starred_url":"https://api.github.com/users/delbaoliveira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/delbaoliveira/subscriptions","organizations_url":"https://api.github.com/users/delbaoliveira/orgs","repos_url":"https://api.github.com/users/delbaoliveira/repos","events_url":"https://api.github.com/users/delbaoliveira/events{/privacy}","received_events_url":"https://api.github.com/users/delbaoliveira/received_events","type":"User","site_admin":false},"labels":[{"id":5599678234,"node_id":"LA_kwDOBC3Cis8AAAABTcRPGg","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20DevEx%20team","name":"created-by: Next.js DevEx team","color":"000000","default":false,"description":""},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-16T19:22:36Z","updated_at":"2024-05-01T12:02:39Z","closed_at":"2024-04-16T19:30:09Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64581","html_url":"https://github.com/vercel/next.js/pull/64581","diff_url":"https://github.com/vercel/next.js/pull/64581.diff","patch_url":"https://github.com/vercel/next.js/pull/64581.patch","merged_at":"2024-04-16T19:30:09Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64581/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64581/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64579","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64579/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64579/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64579/events","html_url":"https://github.com/vercel/next.js/pull/64579","id":2246703637,"node_id":"PR_kwDOBC3Cis5s1sUb","number":64579,"title":"Update Turbopack development test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T19:00:38Z","updated_at":"2024-05-01T12:02:41Z","closed_at":"2024-04-16T19:01:49Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64579","html_url":"https://github.com/vercel/next.js/pull/64579","diff_url":"https://github.com/vercel/next.js/pull/64579.diff","patch_url":"https://github.com/vercel/next.js/pull/64579.patch","merged_at":"2024-04-16T19:01:49Z"},"body":"This auto-generated PR updates the development integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64579/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64578","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64578/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64578/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64578/events","html_url":"https://github.com/vercel/next.js/pull/64578","id":2246703633,"node_id":"PR_kwDOBC3Cis5s1sUX","number":64578,"title":"Update Turbopack production test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-16T19:00:38Z","updated_at":"2024-05-02T12:04:34Z","closed_at":"2024-04-17T07:05:07Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64578","html_url":"https://github.com/vercel/next.js/pull/64578","diff_url":"https://github.com/vercel/next.js/pull/64578.diff","patch_url":"https://github.com/vercel/next.js/pull/64578.patch","merged_at":null},"body":"This auto-generated PR updates the production integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64578/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64575","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64575/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64575/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64575/events","html_url":"https://github.com/vercel/next.js/pull/64575","id":2246588684,"node_id":"PR_kwDOBC3Cis5s1TM6","number":64575,"title":"memoize layout router context","user":{"login":"ztanner","id":1939140,"node_id":"MDQ6VXNlcjE5MzkxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/1939140?v=4","gravatar_id":"","url":"https://api.github.com/users/ztanner","html_url":"https://github.com/ztanner","followers_url":"https://api.github.com/users/ztanner/followers","following_url":"https://api.github.com/users/ztanner/following{/other_user}","gists_url":"https://api.github.com/users/ztanner/gists{/gist_id}","starred_url":"https://api.github.com/users/ztanner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ztanner/subscriptions","organizations_url":"https://api.github.com/users/ztanner/orgs","repos_url":"https://api.github.com/users/ztanner/repos","events_url":"https://api.github.com/users/ztanner/events{/privacy}","received_events_url":"https://api.github.com/users/ztanner/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-16T17:48:19Z","updated_at":"2024-05-01T12:02:37Z","closed_at":"2024-04-16T23:23:39Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64575","html_url":"https://github.com/vercel/next.js/pull/64575","diff_url":"https://github.com/vercel/next.js/pull/64575.diff","patch_url":"https://github.com/vercel/next.js/pull/64575.patch","merged_at":"2024-04-16T23:23:39Z"},"body":"Since `AppRouterState` is promise-based (so we can `use` the values and suspend in render), the state itself isn't stable between renders. Each action corresponds with a new Promise object. When a link is hovered, a prefetch action is dispatched, even if the prefetch never happens (for example, if there's already a prefetch entry in the cache, and it doesn't need to prefetch again). In other words, the prefetch action will be dispatched but won't necessarily change the state.\r\n\r\nThis means that these no-op actions that don't actually change the state values will trigger a re-render. Most of the context providers in `AppRouter` are memoized with the exception of `LayoutRouter` context. This PR memoizes those values so that consumers are only notified of meaningful updates.\r\n\r\nFixes #63159\r\n\r\n\r\nCloses NEXT-3127","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64575/reactions","total_count":5,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":1,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64575/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64572","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64572/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64572/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64572/events","html_url":"https://github.com/vercel/next.js/pull/64572","id":2246523458,"node_id":"PR_kwDOBC3Cis5s1FCN","number":64572,"title":"add CI config","user":{"login":"arlyon","id":8715352,"node_id":"MDQ6VXNlcjg3MTUzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/8715352?v=4","gravatar_id":"","url":"https://api.github.com/users/arlyon","html_url":"https://github.com/arlyon","followers_url":"https://api.github.com/users/arlyon/followers","following_url":"https://api.github.com/users/arlyon/following{/other_user}","gists_url":"https://api.github.com/users/arlyon/gists{/gist_id}","starred_url":"https://api.github.com/users/arlyon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arlyon/subscriptions","organizations_url":"https://api.github.com/users/arlyon/orgs","repos_url":"https://api.github.com/users/arlyon/repos","events_url":"https://api.github.com/users/arlyon/events{/privacy}","received_events_url":"https://api.github.com/users/arlyon/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-16T17:06:58Z","updated_at":"2024-05-02T12:02:58Z","closed_at":"2024-04-17T13:05:09Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64572","html_url":"https://github.com/vercel/next.js/pull/64572","diff_url":"https://github.com/vercel/next.js/pull/64572.diff","patch_url":"https://github.com/vercel/next.js/pull/64572.patch","merged_at":null},"body":"<!-- Thanks for opening a PR! Your contribution is much appreciated.\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\nChoose the right checklist for the change(s) that you're making:\n\n## For Contributors\n\n### Improving Documentation\n\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\n\n### Adding or Updating Examples\n\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\n\n### Fixing a bug\n\n- Related issues linked using `fixes #number`\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n### Adding a feature\n\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\n- Related issues/discussions are linked using `fixes #number`\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\n- Documentation added\n- Telemetry added. In case of a feature if it's used or not.\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n\n## For Maintainers\n\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\n- When linking to a Slack thread, you might want to share details of the conclusion\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\n- Add review comments if necessary to explain to the reviewer the logic behind a change\n\n### What?\n\n### Why?\n\n### How?\n\nCloses NEXT-\nFixes #\n\n-->\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64572/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64570","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64570/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64570/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64570/events","html_url":"https://github.com/vercel/next.js/pull/64570","id":2246467676,"node_id":"PR_kwDOBC3Cis5s049Z","number":64570,"title":"Update Sanity example deps and tsconfig","user":{"login":"stipsan","id":81981,"node_id":"MDQ6VXNlcjgxOTgx","avatar_url":"https://avatars.githubusercontent.com/u/81981?v=4","gravatar_id":"","url":"https://api.github.com/users/stipsan","html_url":"https://github.com/stipsan","followers_url":"https://api.github.com/users/stipsan/followers","following_url":"https://api.github.com/users/stipsan/following{/other_user}","gists_url":"https://api.github.com/users/stipsan/gists{/gist_id}","starred_url":"https://api.github.com/users/stipsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stipsan/subscriptions","organizations_url":"https://api.github.com/users/stipsan/orgs","repos_url":"https://api.github.com/users/stipsan/repos","events_url":"https://api.github.com/users/stipsan/events{/privacy}","received_events_url":"https://api.github.com/users/stipsan/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/examples","name":"examples","color":"ecffaf","default":false,"description":"Issue/PR related to examples"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-16T16:32:09Z","updated_at":"2024-05-01T12:02:35Z","closed_at":"2024-04-16T18:01:44Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64570","html_url":"https://github.com/vercel/next.js/pull/64570","diff_url":"https://github.com/vercel/next.js/pull/64570.diff","patch_url":"https://github.com/vercel/next.js/pull/64570.patch","merged_at":"2024-04-16T18:01:44Z"},"body":"v3.38.0 of `sanity` fixes a couple of bugs affecting Next.js:\r\n- [crash in hotspot and cropping on Next.js](https://github.com/sanity-io/sanity/pull/6380)\r\n- [regression hiding tool buttons when embedded on Next.js](https://github.com/sanity-io/sanity/pull/6338)\r\n\r\nAlso adjusts the `tsconfig.json` to use `module: Preserve`.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64570/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64569","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64569/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64569/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64569/events","html_url":"https://github.com/vercel/next.js/pull/64569","id":2246450434,"node_id":"PR_kwDOBC3Cis5s01MN","number":64569,"title":"Add iai_callgrind benchmark for measuring memory","user":{"login":"arlyon","id":8715352,"node_id":"MDQ6VXNlcjg3MTUzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/8715352?v=4","gravatar_id":"","url":"https://api.github.com/users/arlyon","html_url":"https://github.com/arlyon","followers_url":"https://api.github.com/users/arlyon/followers","following_url":"https://api.github.com/users/arlyon/following{/other_user}","gists_url":"https://api.github.com/users/arlyon/gists{/gist_id}","starred_url":"https://api.github.com/users/arlyon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arlyon/subscriptions","organizations_url":"https://api.github.com/users/arlyon/orgs","repos_url":"https://api.github.com/users/arlyon/repos","events_url":"https://api.github.com/users/arlyon/events{/privacy}","received_events_url":"https://api.github.com/users/arlyon/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-16T16:23:24Z","updated_at":"2024-05-24T14:24:00Z","closed_at":"2024-04-17T13:05:00Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64569","html_url":"https://github.com/vercel/next.js/pull/64569","diff_url":"https://github.com/vercel/next.js/pull/64569.diff","patch_url":"https://github.com/vercel/next.js/pull/64569.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64569/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64567","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64567/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64567/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64567/events","html_url":"https://github.com/vercel/next.js/pull/64567","id":2246436429,"node_id":"PR_kwDOBC3Cis5s0yH0","number":64567,"title":"fix(next-swc): correctly set wasm fallback for known target triples","user":{"login":"kwonoj","id":1210596,"node_id":"MDQ6VXNlcjEyMTA1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1210596?v=4","gravatar_id":"","url":"https://api.github.com/users/kwonoj","html_url":"https://github.com/kwonoj","followers_url":"https://api.github.com/users/kwonoj/followers","following_url":"https://api.github.com/users/kwonoj/following{/other_user}","gists_url":"https://api.github.com/users/kwonoj/gists{/gist_id}","starred_url":"https://api.github.com/users/kwonoj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kwonoj/subscriptions","organizations_url":"https://api.github.com/users/kwonoj/orgs","repos_url":"https://api.github.com/users/kwonoj/repos","events_url":"https://api.github.com/users/kwonoj/events{/privacy}","received_events_url":"https://api.github.com/users/kwonoj/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T16:15:39Z","updated_at":"2024-05-01T12:02:43Z","closed_at":"2024-04-16T16:29:27Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64567","html_url":"https://github.com/vercel/next.js/pull/64567","diff_url":"https://github.com/vercel/next.js/pull/64567.diff","patch_url":"https://github.com/vercel/next.js/pull/64567.patch","merged_at":"2024-04-16T16:29:27Z"},"body":"### What\r\n\r\nFixes a regression to enable wasm fallback for the know target triples (that does not have native bindings). The condition was skewed when introducing `useWasmBinary` flag.\n\nCloses PACK-2969","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64567/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64566","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64566/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64566/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64566/events","html_url":"https://github.com/vercel/next.js/pull/64566","id":2246420308,"node_id":"PR_kwDOBC3Cis5s0uh9","number":64566,"title":"Update Turbopack development test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T16:07:52Z","updated_at":"2024-05-02T12:04:30Z","closed_at":"2024-04-16T19:00:39Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64566","html_url":"https://github.com/vercel/next.js/pull/64566","diff_url":"https://github.com/vercel/next.js/pull/64566.diff","patch_url":"https://github.com/vercel/next.js/pull/64566.patch","merged_at":null},"body":"This auto-generated PR updates the development integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64566/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64565","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64565/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64565/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64565/events","html_url":"https://github.com/vercel/next.js/pull/64565","id":2246419894,"node_id":"PR_kwDOBC3Cis5s0ucO","number":64565,"title":"Update Turbopack production test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-16T16:07:39Z","updated_at":"2024-05-02T12:04:32Z","closed_at":"2024-04-16T19:00:39Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64565","html_url":"https://github.com/vercel/next.js/pull/64565","diff_url":"https://github.com/vercel/next.js/pull/64565.diff","patch_url":"https://github.com/vercel/next.js/pull/64565.patch","merged_at":null},"body":"This auto-generated PR updates the production integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64565/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64563","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64563/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64563/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64563/events","html_url":"https://github.com/vercel/next.js/pull/64563","id":2246286794,"node_id":"PR_kwDOBC3Cis5s0RLR","number":64563,"title":"fix: load the tags manifest asynchronously","user":{"login":"imranolas","id":4206028,"node_id":"MDQ6VXNlcjQyMDYwMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4206028?v=4","gravatar_id":"","url":"https://api.github.com/users/imranolas","html_url":"https://github.com/imranolas","followers_url":"https://api.github.com/users/imranolas/followers","following_url":"https://api.github.com/users/imranolas/following{/other_user}","gists_url":"https://api.github.com/users/imranolas/gists{/gist_id}","starred_url":"https://api.github.com/users/imranolas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imranolas/subscriptions","organizations_url":"https://api.github.com/users/imranolas/orgs","repos_url":"https://api.github.com/users/imranolas/repos","events_url":"https://api.github.com/users/imranolas/events{/privacy}","received_events_url":"https://api.github.com/users/imranolas/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-16T15:03:20Z","updated_at":"2024-05-28T12:02:59Z","closed_at":"2024-05-13T22:53:19Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64563","html_url":"https://github.com/vercel/next.js/pull/64563","diff_url":"https://github.com/vercel/next.js/pull/64563.diff","patch_url":"https://github.com/vercel/next.js/pull/64563.patch","merged_at":"2024-05-13T22:53:19Z"},"body":"## What?\r\nA small update to FileSystemCache to replace sync calls with async.\r\n\r\n## Why?\r\n\r\n`loadTagsManifest` may be called multiple times per request. Since `loadTagsManifest` is synchronous it blocks the main thread whilst reading from the file system which could impact server performance. Replacing these sync calls with async has no impact for consumers of the FileSystemCache.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64563/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64560","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64560/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64560/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64560/events","html_url":"https://github.com/vercel/next.js/issues/64560","id":2246140062,"node_id":"I_kwDOBC3Cis6F4WCe","number":64560,"title":"Docs: [Bug] I cannot switch to page router docs in mobile","user":{"login":"afiiif","id":43276538,"node_id":"MDQ6VXNlcjQzMjc2NTM4","avatar_url":"https://avatars.githubusercontent.com/u/43276538?v=4","gravatar_id":"","url":"https://api.github.com/users/afiiif","html_url":"https://github.com/afiiif","followers_url":"https://api.github.com/users/afiiif/followers","following_url":"https://api.github.com/users/afiiif/following{/other_user}","gists_url":"https://api.github.com/users/afiiif/gists{/gist_id}","starred_url":"https://api.github.com/users/afiiif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afiiif/subscriptions","organizations_url":"https://api.github.com/users/afiiif/orgs","repos_url":"https://api.github.com/users/afiiif/repos","events_url":"https://api.github.com/users/afiiif/events{/privacy}","received_events_url":"https://api.github.com/users/afiiif/received_events","type":"User","site_admin":false},"labels":[{"id":3644980154,"node_id":"LA_kwDOBC3Cis7ZQfu6","url":"https://api.github.com/repos/vercel/next.js/labels/Documentation","name":"Documentation","color":"C2E0C6","default":false,"description":"Related to Next.js' official documentation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-16T13:58:15Z","updated_at":"2024-05-02T12:02:44Z","closed_at":"2024-04-17T18:30:09Z","author_association":"NONE","active_lock_reason":"resolved","body":"### What is the improvement or update you wish to see?\r\n\r\nStep to repro:\r\n1. Open https://nextjs.org/docs in **mobile browser**.\r\n    - Or, use touch simulation\r\n3. Tap on \"Using App Router\"\r\n4. Result:\r\n    - Current: nothing happened\r\n    - Expect: dropdown to choose app router docs or page router docs\r\n\r\n![ezgif-4-cf35b9f193](https://github.com/vercel/next.js/assets/43276538/1ca69d34-3875-419a-b398-6268c72fdad9)\r\n\r\n### Is there any context that might help us understand?\r\n\r\n-\r\n\r\n### Does the docs page already exist? Please link to it.\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64560/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64558","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64558/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64558/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64558/events","html_url":"https://github.com/vercel/next.js/pull/64558","id":2245857622,"node_id":"PR_kwDOBC3Cis5syyBE","number":64558,"title":"Fix cjs client components tree-shaking","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-16T11:55:54Z","updated_at":"2024-05-01T12:02:54Z","closed_at":"2024-04-16T13:06:42Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64558","html_url":"https://github.com/vercel/next.js/pull/64558","diff_url":"https://github.com/vercel/next.js/pull/64558.diff","patch_url":"https://github.com/vercel/next.js/pull/64558.patch","merged_at":"2024-04-16T13:06:42Z"},"body":"## What\r\n\r\nDetermine if the client module is a CJS file and `default` export is imported, then we include the whole module instead of using webpack magic comments to only extract `default` export.\r\n\r\n## Why\r\n\r\nUnlike ESM, The `default` export of CJS module is not just `.default` property, we need to include `__esModule` mark along with `default` export to make it function properly with React client module proxy\r\n\r\n\r\nFixes #64518\r\nCloses NEXT-3119","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64558/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64553","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64553/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64553/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64553/events","html_url":"https://github.com/vercel/next.js/pull/64553","id":2245770528,"node_id":"PR_kwDOBC3Cis5syerK","number":64553,"title":"build: Update `swc_core` to `v0.90.33`","user":{"login":"kdy1","id":29931815,"node_id":"MDQ6VXNlcjI5OTMxODE1","avatar_url":"https://avatars.githubusercontent.com/u/29931815?v=4","gravatar_id":"","url":"https://api.github.com/users/kdy1","html_url":"https://github.com/kdy1","followers_url":"https://api.github.com/users/kdy1/followers","following_url":"https://api.github.com/users/kdy1/following{/other_user}","gists_url":"https://api.github.com/users/kdy1/gists{/gist_id}","starred_url":"https://api.github.com/users/kdy1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdy1/subscriptions","organizations_url":"https://api.github.com/users/kdy1/orgs","repos_url":"https://api.github.com/users/kdy1/repos","events_url":"https://api.github.com/users/kdy1/events{/privacy}","received_events_url":"https://api.github.com/users/kdy1/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"kdy1","id":29931815,"node_id":"MDQ6VXNlcjI5OTMxODE1","avatar_url":"https://avatars.githubusercontent.com/u/29931815?v=4","gravatar_id":"","url":"https://api.github.com/users/kdy1","html_url":"https://github.com/kdy1","followers_url":"https://api.github.com/users/kdy1/followers","following_url":"https://api.github.com/users/kdy1/following{/other_user}","gists_url":"https://api.github.com/users/kdy1/gists{/gist_id}","starred_url":"https://api.github.com/users/kdy1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdy1/subscriptions","organizations_url":"https://api.github.com/users/kdy1/orgs","repos_url":"https://api.github.com/users/kdy1/repos","events_url":"https://api.github.com/users/kdy1/events{/privacy}","received_events_url":"https://api.github.com/users/kdy1/received_events","type":"User","site_admin":false},"assignees":[{"login":"kdy1","id":29931815,"node_id":"MDQ6VXNlcjI5OTMxODE1","avatar_url":"https://avatars.githubusercontent.com/u/29931815?v=4","gravatar_id":"","url":"https://api.github.com/users/kdy1","html_url":"https://github.com/kdy1","followers_url":"https://api.github.com/users/kdy1/followers","following_url":"https://api.github.com/users/kdy1/following{/other_user}","gists_url":"https://api.github.com/users/kdy1/gists{/gist_id}","starred_url":"https://api.github.com/users/kdy1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdy1/subscriptions","organizations_url":"https://api.github.com/users/kdy1/orgs","repos_url":"https://api.github.com/users/kdy1/repos","events_url":"https://api.github.com/users/kdy1/events{/privacy}","received_events_url":"https://api.github.com/users/kdy1/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2024-04-16T11:09:25Z","updated_at":"2024-05-06T12:04:59Z","closed_at":"2024-04-22T07:04:45Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64553","html_url":"https://github.com/vercel/next.js/pull/64553","diff_url":"https://github.com/vercel/next.js/pull/64553.diff","patch_url":"https://github.com/vercel/next.js/pull/64553.patch","merged_at":"2024-04-22T07:04:45Z"},"body":"### What?\r\n\r\nUpdate swc crates to https://github.com/swc-project/swc/commit/0f07acbc572a8cbe668ba10406f1358ec04318a1\r\n\r\n### Why?\r\n\r\nTo keep in sync.\r\n\r\n### How?\r\n\r\nCloses PACK-2968","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64553/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64552","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64552/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64552/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64552/events","html_url":"https://github.com/vercel/next.js/issues/64552","id":2245759193,"node_id":"I_kwDOBC3Cis6F25DZ","number":64552,"title":"Different behavior with and without `--turbo` flag in `next dev` command","user":{"login":"masakinihirota","id":7696510,"node_id":"MDQ6VXNlcjc2OTY1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/7696510?v=4","gravatar_id":"","url":"https://api.github.com/users/masakinihirota","html_url":"https://github.com/masakinihirota","followers_url":"https://api.github.com/users/masakinihirota/followers","following_url":"https://api.github.com/users/masakinihirota/following{/other_user}","gists_url":"https://api.github.com/users/masakinihirota/gists{/gist_id}","starred_url":"https://api.github.com/users/masakinihirota/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/masakinihirota/subscriptions","organizations_url":"https://api.github.com/users/masakinihirota/orgs","repos_url":"https://api.github.com/users/masakinihirota/repos","events_url":"https://api.github.com/users/masakinihirota/events{/privacy}","received_events_url":"https://api.github.com/users/masakinihirota/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":5730825379,"node_id":"LA_kwDOBC3Cis8AAAABVZV0ow","url":"https://api.github.com/repos/vercel/next.js/labels/please%20simplify%20reproduction","name":"please simplify reproduction","color":"fbca04","default":false,"description":"The reproduction is too complex"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-16T11:03:08Z","updated_at":"2024-05-03T00:04:41Z","closed_at":"2024-04-17T18:59:05Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/masakinihirota/next_dev_i18n\n\n### To Reproduce\n\nDescription:\r\n\r\nI am experiencing different behaviors when running the `next dev` command with and without the `--turbo` flag in my Next.js application.\r\n\r\nProblem\r\nThe language conversion function in i18n does not work.\r\n\r\nSteps to reproduce:\r\n\r\n1. Run `next dev` command without `--turbo` flag.\r\n2. Cannot convert from English to Japanese.\r\n4. Run `next dev --turbo` command.\r\n5. I can convert from English to Japanese.\r\n\r\nExpected result:\r\n\r\nThe behavior of the application should be consistent regardless of whether the `--turbo` flag is used.\r\n\r\nActual result:\r\n\r\nThe behavior of the application differs when the `--turbo` flag is used compared to when it is not used.\r\n\r\nAdditional information:\r\n\r\nI am running a DB called Supabase with Back.\r\nThis is not related to the problem part, but this code will not work without setting environment variables.\r\n\r\n\n\n### Current vs. Expected behavior\n\nnext 14.1.0\r\nThe language conversion did not work when running with\r\n\r\n>>ncu -u\r\n- next 14.1.0\r\n+ next 14.2.1\r\n\r\nWhen I updated Next.js.\r\nIt stopped even starting.\n\n### Provide environment information\n\n```bash\n>  npx --no-install next info\r\n\r\nOperating System:\r\n  Platform: win32\r\n  Arch: x64\r\n  Version: Windows 10 Pro\r\n  Available memory (MB): 28563\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 20.11.1\r\n  npm: N/A\r\n  Yarn: N/A\r\n  pnpm: 8.15.1\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: 14.2.1\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64552/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64549","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64549/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64549/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64549/events","html_url":"https://github.com/vercel/next.js/pull/64549","id":2245523702,"node_id":"PR_kwDOBC3Cis5sxoa2","number":64549,"title":"fix: filter out middleware requests in logging","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-16T09:03:02Z","updated_at":"2024-05-01T12:02:50Z","closed_at":"2024-04-16T14:17:06Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64549","html_url":"https://github.com/vercel/next.js/pull/64549","diff_url":"https://github.com/vercel/next.js/pull/64549.diff","patch_url":"https://github.com/vercel/next.js/pull/64549.patch","merged_at":"2024-04-16T14:17:06Z"},"body":"### What\r\n\r\nWhen middleware.js is present, the logging is duplicated. We should filter out the 1st middleware request and only log the actual one going through request handler / renderer\n\nCloses NEXT-3125","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64549/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64549/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64548","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64548/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64548/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64548/events","html_url":"https://github.com/vercel/next.js/issues/64548","id":2245453406,"node_id":"I_kwDOBC3Cis6F1uZe","number":64548,"title":"App router: get params in the generateSitemaps function from dynamic page /[locale]/sitemap.xml","user":{"login":"mnaeem99","id":77039175,"node_id":"MDQ6VXNlcjc3MDM5MTc1","avatar_url":"https://avatars.githubusercontent.com/u/77039175?v=4","gravatar_id":"","url":"https://api.github.com/users/mnaeem99","html_url":"https://github.com/mnaeem99","followers_url":"https://api.github.com/users/mnaeem99/followers","following_url":"https://api.github.com/users/mnaeem99/following{/other_user}","gists_url":"https://api.github.com/users/mnaeem99/gists{/gist_id}","starred_url":"https://api.github.com/users/mnaeem99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mnaeem99/subscriptions","organizations_url":"https://api.github.com/users/mnaeem99/orgs","repos_url":"https://api.github.com/users/mnaeem99/repos","events_url":"https://api.github.com/users/mnaeem99/events{/privacy}","received_events_url":"https://api.github.com/users/mnaeem99/received_events","type":"User","site_admin":false},"labels":[{"id":3644980154,"node_id":"LA_kwDOBC3Cis7ZQfu6","url":"https://api.github.com/repos/vercel/next.js/labels/Documentation","name":"Documentation","color":"C2E0C6","default":false,"description":"Related to Next.js' official documentation."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-16T08:29:53Z","updated_at":"2024-04-18T08:53:45Z","closed_at":"2024-04-18T08:53:45Z","author_association":"NONE","active_lock_reason":null,"body":"### What is the improvement or update you wish to see?\r\n\r\nI would like to generateSitemaps for each locale dyamic page but function have no way to get params.\r\n\r\nI have tried useParams from 'next/navigation' but these are not accessible in server component as a client component\r\n\r\n### Is there any context that might help us understand?\r\n\r\n```\r\n//'use client'\r\n//import { useParams } from 'next/navigation'\r\nimport { gql } from \"@apollo/client\";\r\nimport { client } from \"../../../apollo-client\";\r\n\r\n\r\n \r\nexport default async function sitemap({params}) {\r\n  // const params = useParams()\r\n  // console.log(\"params\");\r\n  // console.log(params.locale);\r\n  // const params = 'en-PK'\r\n  let [languageCode, countryCode] = params.locale.split('-');\r\n  console.log(languageCode, countryCode);\r\n  const cities = await getCities(languageCode, countryCode);\r\n  return cities.data?.citySitemaps?.content?.map((city) => ({\r\n      url: `https://www.grumpeat.com/${languageCode}/${city.countryName?.replace(/%20|\\s/g, '_')}/${city.cityName?.replace(/%20|\\s/g, '_')}`,\r\n      lastModified: new Date(city.lastModified).toISOString(),\r\n  }));\r\n}\r\n\r\n```\r\n![image](https://github.com/vercel/next.js/assets/77039175/bad73fcc-57eb-4f66-a6b1-ab505816c1ca)\r\n\r\n\r\n### Does the docs page already exist? Please link to it.\r\n\r\nhttps://nextjs.org/docs/app/api-reference/functions/generate-sitemaps","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64548/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64547","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64547/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64547/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64547/events","html_url":"https://github.com/vercel/next.js/issues/64547","id":2245418103,"node_id":"I_kwDOBC3Cis6F1lx3","number":64547,"title":"Can't resolve child_process when using any of cron packages","user":{"login":"andrejmoltok","id":20362038,"node_id":"MDQ6VXNlcjIwMzYyMDM4","avatar_url":"https://avatars.githubusercontent.com/u/20362038?v=4","gravatar_id":"","url":"https://api.github.com/users/andrejmoltok","html_url":"https://github.com/andrejmoltok","followers_url":"https://api.github.com/users/andrejmoltok/followers","following_url":"https://api.github.com/users/andrejmoltok/following{/other_user}","gists_url":"https://api.github.com/users/andrejmoltok/gists{/gist_id}","starred_url":"https://api.github.com/users/andrejmoltok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrejmoltok/subscriptions","organizations_url":"https://api.github.com/users/andrejmoltok/orgs","repos_url":"https://api.github.com/users/andrejmoltok/repos","events_url":"https://api.github.com/users/andrejmoltok/events{/privacy}","received_events_url":"https://api.github.com/users/andrejmoltok/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3502592891,"node_id":"LA_kwDOBC3Cis7QxVN7","url":"https://api.github.com/repos/vercel/next.js/labels/Navigation","name":"Navigation","color":"1830A5","default":false,"description":"Related to Next.js linking (e.g., <Link>) and navigation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-16T08:11:59Z","updated_at":"2024-04-30T12:04:42Z","closed_at":"2024-04-16T10:17:01Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/andrejmoltok/oceans5js\n\n### To Reproduce\n\n1. Start the app with `npm run dev`\r\n2. Click on `SignIn` link\r\n3. Error occurs\n\n### Current vs. Expected behavior\n\nI want to use cron-jobs in my next app with node-cron pacakge. I tried other cron packages but yielded the same error of `Can't resolve child_process`\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: linux\r\n  Arch: x64\r\n  Version: #1 SMP PREEMPT_DYNAMIC Debian 6.1.76-1 (2024-02-01)\r\n  Available memory (MB): 7824\r\n  Available CPU cores: 4\r\nBinaries:\r\n  Node: 20.12.2\r\n  npm: 10.5.0\r\n  Yarn: N/A\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: 14.1.4\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.3\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure, App Router, Routing (next/router, next/navigation, next/link)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\nI am testing this on the latest version of NextJS 14.2.1","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64547/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64546","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64546/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64546/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64546/events","html_url":"https://github.com/vercel/next.js/pull/64546","id":2245278070,"node_id":"PR_kwDOBC3Cis5swyl2","number":64546,"title":"Update Turbopack development test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-16T07:05:30Z","updated_at":"2024-04-30T12:05:44Z","closed_at":"2024-04-16T10:47:25Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64546","html_url":"https://github.com/vercel/next.js/pull/64546","diff_url":"https://github.com/vercel/next.js/pull/64546.diff","patch_url":"https://github.com/vercel/next.js/pull/64546.patch","merged_at":"2024-04-16T10:47:25Z"},"body":"This auto-generated PR updates the development integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64546/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64545","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64545/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64545/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64545/events","html_url":"https://github.com/vercel/next.js/pull/64545","id":2245278005,"node_id":"PR_kwDOBC3Cis5swyk1","number":64545,"title":"Update Turbopack production test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-16T07:05:28Z","updated_at":"2024-05-02T12:04:26Z","closed_at":"2024-04-16T16:07:40Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64545","html_url":"https://github.com/vercel/next.js/pull/64545","diff_url":"https://github.com/vercel/next.js/pull/64545.diff","patch_url":"https://github.com/vercel/next.js/pull/64545.patch","merged_at":null},"body":"This auto-generated PR updates the production integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64545/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64539","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64539/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64539/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64539/events","html_url":"https://github.com/vercel/next.js/issues/64539","id":2245028615,"node_id":"I_kwDOBC3Cis6F0GsH","number":64539,"title":"Update route handlers docs to call out try catch redirect nuance","user":{"login":"jameslporter","id":28368,"node_id":"MDQ6VXNlcjI4MzY4","avatar_url":"https://avatars.githubusercontent.com/u/28368?v=4","gravatar_id":"","url":"https://api.github.com/users/jameslporter","html_url":"https://github.com/jameslporter","followers_url":"https://api.github.com/users/jameslporter/followers","following_url":"https://api.github.com/users/jameslporter/following{/other_user}","gists_url":"https://api.github.com/users/jameslporter/gists{/gist_id}","starred_url":"https://api.github.com/users/jameslporter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jameslporter/subscriptions","organizations_url":"https://api.github.com/users/jameslporter/orgs","repos_url":"https://api.github.com/users/jameslporter/repos","events_url":"https://api.github.com/users/jameslporter/events{/privacy}","received_events_url":"https://api.github.com/users/jameslporter/received_events","type":"User","site_admin":false},"labels":[{"id":5907879217,"node_id":"LA_kwDOBC3Cis8AAAABYCMVMQ","url":"https://api.github.com/repos/vercel/next.js/labels/invalid%20link","name":"invalid link","color":"444444","default":false,"description":"The issue was auto-closed due to a missing/invalid reproduction link. A new issue should be opened."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T03:43:07Z","updated_at":"2024-04-16T03:43:24Z","closed_at":"2024-04-16T03:43:22Z","author_association":"NONE","active_lock_reason":null,"body":"Quote below from #55586, I wasted quite a bit of time because I was reading the redirect docs on route handlers because I was writing a route handler. I received a not found error and nothing useful in the logs. Ideally it would 'just work' as expected without the need of a special catch conditional to throw. If that's not possible then an error message of some kind would be helpful. If that's not possible then make sure it's well covered across all docs that talk about redirecting. An example of how to use it within a try catch would be helpful as well rather than advising to not do it.\r\n\r\nI'm guessing it would throw if it's an internal path and next can tell that it does not exist. Also guessing the typescript def can't easily tell what's an internal path string vs an external url. Hopefully a dev mode error when not catching & throwing is possible and give developers a clue as to what's going on.\r\n\r\nThanks!\r\n\r\nhttps://nextjs.org/docs/app/building-your-application/routing/route-handlers#redirects\r\n\r\nquote from leerob on the original issue below.\r\n\r\n\r\n              This is intended  `redirect()` throws `NEXT_REDIRECT` and returns the TypeScript `never` type. It should be called outside of your try/catch block, or handled explicitly. We've updated the docs to change the code blocks for Server Actions to place the `redirect()` after the try/catch block.\r\n\r\nhttps://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations#redirecting\r\n\r\n_Originally posted by @leerob in https://github.com/vercel/next.js/issues/55586#issuecomment-1869024539_\r\n            ","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64539/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64538","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64538/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64538/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64538/events","html_url":"https://github.com/vercel/next.js/issues/64538","id":2245018913,"node_id":"I_kwDOBC3Cis6F0EUh","number":64538,"title":"router.relace when shallow be ture will modify the state of history","user":{"login":"taowensheng1997","id":49777542,"node_id":"MDQ6VXNlcjQ5Nzc3NTQy","avatar_url":"https://avatars.githubusercontent.com/u/49777542?v=4","gravatar_id":"","url":"https://api.github.com/users/taowensheng1997","html_url":"https://github.com/taowensheng1997","followers_url":"https://api.github.com/users/taowensheng1997/followers","following_url":"https://api.github.com/users/taowensheng1997/following{/other_user}","gists_url":"https://api.github.com/users/taowensheng1997/gists{/gist_id}","starred_url":"https://api.github.com/users/taowensheng1997/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taowensheng1997/subscriptions","organizations_url":"https://api.github.com/users/taowensheng1997/orgs","repos_url":"https://api.github.com/users/taowensheng1997/repos","events_url":"https://api.github.com/users/taowensheng1997/events{/privacy}","received_events_url":"https://api.github.com/users/taowensheng1997/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5907879217,"node_id":"LA_kwDOBC3Cis8AAAABYCMVMQ","url":"https://api.github.com/repos/vercel/next.js/labels/invalid%20link","name":"invalid link","color":"444444","default":false,"description":"The issue was auto-closed due to a missing/invalid reproduction link. A new issue should be opened."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T03:30:14Z","updated_at":"2024-04-16T03:30:31Z","closed_at":"2024-04-16T03:30:29Z","author_association":"NONE","active_lock_reason":null,"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/vercel/next.js\n\n### To Reproduce\n\n![image](https://github.com/vercel/next.js/assets/49777542/c57e1115-5828-45a1-8d2c-7b08a97f40a9)\r\n\r\nthe picture is showing the function which be named onPopState and used in window.addEventListener('popstate', this.onPopState)\r\n\r\nwe has two pages named a and b , and a is the firtst page.\r\nwe push new url of b without shallow in page brefore we replaced the url in b page with shallow.\r\nwe find that the state object of window.histroy.state is changed and the shallow parameter is been change form true to false.\r\nbut the method of window.history.back will use the shallow parameter in state object to get the parameter for router.change as picture showed.\r\nThis means that the change of shallow by our replace method in b page will make a mistake when using window.histroy.back due to the original value of shallow is change from false to true leading to the incorrect replace parameter of route.change which controlling if the page will rerender.\n\n### Current vs. Expected behavior\n\nif we replace the url with shallow been true, the shallow parameter in state shouldn't been changed\n\n### Provide environment information\n\n```bash\nnext@latest\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext start (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64538/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64537","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64537/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64537/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64537/events","html_url":"https://github.com/vercel/next.js/issues/64537","id":2245014424,"node_id":"I_kwDOBC3Cis6F0DOY","number":64537,"title":"router.relace when shallow be ture will modify the state of history","user":{"login":"taowensheng1997","id":49777542,"node_id":"MDQ6VXNlcjQ5Nzc3NTQy","avatar_url":"https://avatars.githubusercontent.com/u/49777542?v=4","gravatar_id":"","url":"https://api.github.com/users/taowensheng1997","html_url":"https://github.com/taowensheng1997","followers_url":"https://api.github.com/users/taowensheng1997/followers","following_url":"https://api.github.com/users/taowensheng1997/following{/other_user}","gists_url":"https://api.github.com/users/taowensheng1997/gists{/gist_id}","starred_url":"https://api.github.com/users/taowensheng1997/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taowensheng1997/subscriptions","organizations_url":"https://api.github.com/users/taowensheng1997/orgs","repos_url":"https://api.github.com/users/taowensheng1997/repos","events_url":"https://api.github.com/users/taowensheng1997/events{/privacy}","received_events_url":"https://api.github.com/users/taowensheng1997/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5907879217,"node_id":"LA_kwDOBC3Cis8AAAABYCMVMQ","url":"https://api.github.com/repos/vercel/next.js/labels/invalid%20link","name":"invalid link","color":"444444","default":false,"description":"The issue was auto-closed due to a missing/invalid reproduction link. A new issue should be opened."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-16T03:24:28Z","updated_at":"2024-04-16T03:24:46Z","closed_at":"2024-04-16T03:24:44Z","author_association":"NONE","active_lock_reason":null,"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/vercel/next.js/blob/canary/packages/next/src/shared/lib/router/router.ts\n\n### To Reproduce\n\n\r\n<img width=\"581\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/49777542/79e6988c-6eaf-435a-a19c-401493dc97bb\">\r\n\r\nthe picture is showing the function which be named  **onPopState** and used in **window.addEventListener('popstate', this.onPopState)**\r\n\r\n\r\nwe has two pages named **a** and **b** , and a is the firtst page.\r\nwe push new url  of b  without shallow in page brefore we replaced the url in b page with shallow.\r\nwe find that the state object of  **window.histroy.state**  is changed and the **shallow** parameter is been change form **true to false**. \r\nbut the method of **window.history.back** will use the shallow parameter in state object to get the  parameter  for router.change as picture showed. \r\nThis means that the change of shallow by our replace  method  in b page will make a mistake when using  window.histroy.back due to the original value of shallow  is change from false to true **leading to the  incorrect  replace parameter of route.change** which controlling if the page will rerender.\n\n### Current vs. Expected behavior\n\nif  we replace the url with shallow been true, the shallow parameter in state shouldn't been changed\n\n### Provide environment information\n\n```bash\nnext@latest or next@14.0.3\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext start (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64537/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64535","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64535/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64535/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64535/events","html_url":"https://github.com/vercel/next.js/issues/64535","id":2244969698,"node_id":"I_kwDOBC3Cis6Fz4Ti","number":64535,"title":"redirect in Server Actions & route.push do not work in Intercepting Routes anymore","user":{"login":"K1NXZ","id":2119319,"node_id":"MDQ6VXNlcjIxMTkzMTk=","avatar_url":"https://avatars.githubusercontent.com/u/2119319?v=4","gravatar_id":"","url":"https://api.github.com/users/K1NXZ","html_url":"https://github.com/K1NXZ","followers_url":"https://api.github.com/users/K1NXZ/followers","following_url":"https://api.github.com/users/K1NXZ/following{/other_user}","gists_url":"https://api.github.com/users/K1NXZ/gists{/gist_id}","starred_url":"https://api.github.com/users/K1NXZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/K1NXZ/subscriptions","organizations_url":"https://api.github.com/users/K1NXZ/orgs","repos_url":"https://api.github.com/users/K1NXZ/repos","events_url":"https://api.github.com/users/K1NXZ/events{/privacy}","received_events_url":"https://api.github.com/users/K1NXZ/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3502592891,"node_id":"LA_kwDOBC3Cis7QxVN7","url":"https://api.github.com/repos/vercel/next.js/labels/Navigation","name":"Navigation","color":"1830A5","default":false,"description":"Related to Next.js linking (e.g., <Link>) and navigation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-16T02:30:28Z","updated_at":"2024-05-02T12:02:14Z","closed_at":"2024-04-16T14:12:37Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/K1NXZ/nextjs-intercept-redirect\n\n### To Reproduce\n\n1. Start the application with `pnpm dev`\r\n2. Navigate to `http://localhost:3000`\r\n3. Click a link to open an intercepting route\r\n4. Submit a form\n\n### Current vs. Expected behavior\n\nI expected to get redirected to the root `/` but nothing happens after submitting a form and performing a server action.\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 23.4.0: Fri Mar 15 00:10:42 PDT 2024; root:xnu-10063.101.17~1/RELEASE_ARM64_T6000\r\n  Available memory (MB): 16384\r\n  Available CPU cores: 10\r\nBinaries:\r\n  Node: 18.18.0\r\n  npm: 9.8.1\r\n  Yarn: 1.22.19\r\n  pnpm: 8.15.6\r\nRelevant Packages:\r\n  next: 14.3.0-canary.4 // Latest available version is detected (14.3.0-canary.4).\r\n  eslint-config-next: 14.3.0-canary.4\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router, Routing (next/router, next/navigation, next/link)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next start (local)\n\n### Additional context\n\nI noticed this bug got introduced in 14.2.0 and is still in 14.3.0-canary.4.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64535/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64535/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64533","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64533/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64533/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64533/events","html_url":"https://github.com/vercel/next.js/issues/64533","id":2244941712,"node_id":"I_kwDOBC3Cis6FzxeQ","number":64533,"title":"Naver WebToon Poster Image upstream 403 Error","user":{"login":"INIRU","id":75632393,"node_id":"MDQ6VXNlcjc1NjMyMzkz","avatar_url":"https://avatars.githubusercontent.com/u/75632393?v=4","gravatar_id":"","url":"https://api.github.com/users/INIRU","html_url":"https://github.com/INIRU","followers_url":"https://api.github.com/users/INIRU/followers","following_url":"https://api.github.com/users/INIRU/following{/other_user}","gists_url":"https://api.github.com/users/INIRU/gists{/gist_id}","starred_url":"https://api.github.com/users/INIRU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/INIRU/subscriptions","organizations_url":"https://api.github.com/users/INIRU/orgs","repos_url":"https://api.github.com/users/INIRU/repos","events_url":"https://api.github.com/users/INIRU/events{/privacy}","received_events_url":"https://api.github.com/users/INIRU/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/examples","name":"examples","color":"ecffaf","default":false,"description":"Issue/PR related to examples"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-16T01:56:34Z","updated_at":"2024-05-09T12:02:03Z","closed_at":"2024-04-16T10:13:14Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Verify canary release\n\n- [X] I verified that the issue exists in the latest Next.js canary release\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 23.3.0: Wed Dec 20 21:30:59 PST 2023; root:xnu-10002.81.5~7/RELEASE_ARM64_T6030\r\n  Available memory (MB): 18432\r\n  Available CPU cores: 11\r\nBinaries:\r\n  Node: 20.11.1\r\n  npm: 10.2.4\r\n  Yarn: N/A\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: 14.2.1\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which example does this report relate to?\n\nImage optimization (next/image, next/legacy/image)\n\n### What browser are you using? (if relevant)\n\nArc 1.38.0 (48670)\n\n### How are you deploying your application? (if relevant)\n\nnext dev (local)\n\n### Describe the Bug\n\nThere is an error that the image of the Naver WebToon could not get as a 403 upstream error.\r\n\r\n```bash\r\n% curl https://image-comic.pstatic.net/webtoon/800506/thumbnail/thumbnail_IMAG21_21640049-34da-44e5-82d7-bbb7aca3a3f8.jpg -I\r\nHTTP/2 403 \r\nserver: AkamaiGHost\r\nmime-version: 1.0\r\ncontent-type: text/html\r\ncontent-length: 501\r\nexpires: Tue, 16 Apr 2024 01:44:32 GMT\r\ndate: Tue, 16 Apr 2024 01:44:32 GMT\r\n```\r\n\r\n```bash\r\nupstream image response failed for https://image-comic.pstatic.net/webtoon/800506/thumbnail/thumbnail_IMAG21_21640049-34da-44e5-82d7-bbb7aca3a3f8.jpg 403\r\n```\n\n### Expected Behavior\n\nThen you will see this error (also related to https://github.com/vercel/next.js/issues/53715 and https://github.com/vercel/next.js/issues/56025 issue)\n\n### To Reproduce\n\n1. termial `npx create-next-app`\r\n\r\n2. Add the following syntax to src/app/page.tsx\r\n```tsx\r\n// /app/page.tsx\r\n\r\nimport Image from 'next/image';\r\n\r\nexport default function Home() {\r\n  return (\r\n    <main className='flex min-h-screen flex-col items-center justify-between p-24'>\r\n      <Image\r\n        width={52}\r\n        height={52}\r\n        alt='2'\r\n        src={\r\n          'https://image-comic.pstatic.net/webtoon/800506/thumbnail/thumbnail_IMAG21_21640049-34da-44e5-82d7-bbb7aca3a3f8.jpg'\r\n        }\r\n      ></Image>\r\n    </main>\r\n  );\r\n}\r\n```\r\n\r\n3. `npm run dev` and  Access http://localhost:3000","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64533/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64532","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64532/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64532/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64532/events","html_url":"https://github.com/vercel/next.js/pull/64532","id":2244764644,"node_id":"PR_kwDOBC3Cis5svDiK","number":64532,"title":"fix refresh behavior for discarded actions","user":{"login":"ztanner","id":1939140,"node_id":"MDQ6VXNlcjE5MzkxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/1939140?v=4","gravatar_id":"","url":"https://api.github.com/users/ztanner","html_url":"https://github.com/ztanner","followers_url":"https://api.github.com/users/ztanner/followers","following_url":"https://api.github.com/users/ztanner/following{/other_user}","gists_url":"https://api.github.com/users/ztanner/gists{/gist_id}","starred_url":"https://api.github.com/users/ztanner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ztanner/subscriptions","organizations_url":"https://api.github.com/users/ztanner/orgs","repos_url":"https://api.github.com/users/ztanner/repos","events_url":"https://api.github.com/users/ztanner/events{/privacy}","received_events_url":"https://api.github.com/users/ztanner/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T22:51:24Z","updated_at":"2024-05-01T12:02:52Z","closed_at":"2024-04-16T13:56:48Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64532","html_url":"https://github.com/vercel/next.js/pull/64532","diff_url":"https://github.com/vercel/next.js/pull/64532.diff","patch_url":"https://github.com/vercel/next.js/pull/64532.patch","merged_at":"2024-04-16T13:56:48Z"},"body":"When an action is marked as \"discarded\", we enqueue a refresh, since the navigation event will be invoked immediately without waiting for the action to finish. We refresh because it's possible that the discarded action triggered some sort of mutation/revalidation, and we want the router to still be able to respond to that new data. \r\n\r\nHowever there's a bug in this logic -- it'll only enqueue the refresh action if there were no other actions in the queue, ignoring the case where something is still in the queue. This makes sure that the refresh is handled after `runRemainingActions` finishes. \r\n\r\nWhen adding a test for the server component case (which doesn't hit this refresh branch), I noticed `LayoutRouter` caused React to suspend indefinitely, because it got stuck in the `use(unresolvedThenable)` case. We should only suspend indefinitely if we kicked off a the `SERVER_PATCH` action, as otherwise it's possible nothing will ever break out of that branch. \r\n\r\nFixes #64517\r\nFixes #64535\r\nCloses NEXT-3124","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64532/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64532/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64528","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64528/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64528/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64528/events","html_url":"https://github.com/vercel/next.js/pull/64528","id":2244656622,"node_id":"PR_kwDOBC3Cis5sure4","number":64528,"title":"chore(next/font): update @capsizecss/metrics package","user":{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false},"assignees":[{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2024-04-15T21:27:09Z","updated_at":"2024-04-30T00:05:44Z","closed_at":"2024-04-15T22:14:58Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64528","html_url":"https://github.com/vercel/next.js/pull/64528","diff_url":"https://github.com/vercel/next.js/pull/64528.diff","patch_url":"https://github.com/vercel/next.js/pull/64528.patch","merged_at":"2024-04-15T22:14:58Z"},"body":"## Why?\r\n\r\nHaving the latest `@capsizecss/metrics` package allows us to have the latest font fallbacks when using [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts).\r\n\r\n- x-ref: https://github.com/vercel/next.js/issues/47115#issuecomment-2051755660\r\n- x-ref: https://github.com/vercel/next.js/issues/47115#issuecomment-2055079526\r\n- https://github.com/seek-oss/capsize/releases/tag/%40capsizecss%2Fmetrics%403.0.0\n\nCloses NEXT-3123","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64528/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64527","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64527/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64527/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64527/events","html_url":"https://github.com/vercel/next.js/pull/64527","id":2244629300,"node_id":"PR_kwDOBC3Cis5sulPs","number":64527,"title":"Enable loading source maps for Next Server and React","user":{"login":"unstubbable","id":761683,"node_id":"MDQ6VXNlcjc2MTY4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/761683?v=4","gravatar_id":"","url":"https://api.github.com/users/unstubbable","html_url":"https://github.com/unstubbable","followers_url":"https://api.github.com/users/unstubbable/followers","following_url":"https://api.github.com/users/unstubbable/following{/other_user}","gists_url":"https://api.github.com/users/unstubbable/gists{/gist_id}","starred_url":"https://api.github.com/users/unstubbable/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unstubbable/subscriptions","organizations_url":"https://api.github.com/users/unstubbable/orgs","repos_url":"https://api.github.com/users/unstubbable/repos","events_url":"https://api.github.com/users/unstubbable/events{/privacy}","received_events_url":"https://api.github.com/users/unstubbable/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":5552804017,"node_id":"LA_kwDOBC3Cis8AAAABSvkQsQ","url":"https://api.github.com/repos/vercel/next.js/labels/CI%20approved","name":"CI approved","color":"75AC05","default":false,"description":"Approve running CI for fork"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2024-04-15T21:12:12Z","updated_at":"2024-05-07T00:04:33Z","closed_at":"2024-04-22T12:40:24Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64527","html_url":"https://github.com/vercel/next.js/pull/64527","diff_url":"https://github.com/vercel/next.js/pull/64527.diff","patch_url":"https://github.com/vercel/next.js/pull/64527.patch","merged_at":"2024-04-22T12:40:23Z"},"body":"### What?\r\n\r\nThis fixes the source maps creation for the Next Server.\r\n\r\n### Why?\r\n\r\nAllows for better debugging of the Next Server internals, as well as the React server code, especially in production mode (i.e. `NODE_OPTIONS='--inspect --enable-source-maps' next start`).\r\n\r\n**In Chrome:**\r\n\r\n<img width=\"1608\" alt=\"breakpoint in app-render\" src=\"https://github.com/vercel/next.js/assets/761683/75387bd1-c260-4344-abde-e7375be69771\">\r\n\r\n<img width=\"1608\" alt=\"breakpoint in RSWD\" src=\"https://github.com/vercel/next.js/assets/761683/ea7adc07-273e-4f4b-a1a0-33e7442d9bad\">\r\n\r\n**In vscode:**\r\n\r\n<img width=\"1608\" alt=\"breakpoint next dev\" src=\"https://github.com/vercel/next.js/assets/761683/70285a42-1fc7-4e7e-988e-2633f7fbec2e\">\r\n\r\n<img width=\"1608\" alt=\"breakpoint next build\" src=\"https://github.com/vercel/next.js/assets/761683/cd087d67-ac22-462f-ad81-39544b41aa85\">\r\n\r\n### How?\r\n\r\n- Copy [React source maps](https://github.com/facebook/react/pull/26446) into `src/compiled`.\r\n- Load React source maps via `source-map-loader` during webpack build.\r\n- Inline Next.js sources contents into source map files to avoid `loadNetworkResource` error in Chrome DevTools.\r\n- Adjust vscode launch configurations.\r\n\r\n### Additional Notes\r\n\r\n- Hopefully this does not interfere with your current work on React prod builds / source maps, @acdlite?\r\n- Unfortunately, the source maps are not applied in the DevTools Performance panel. [I'm not sure yet](https://x.com/unstubbable/status/1779925144351252581), whether this is something we can fix, or whether it's a DevTools limitation when profiling a Node.js app. It does work when profiling client-side code.\r\n- I've checked that https://github.com/vercel/next.js/blob/canary/contributing/core/vscode-debugger.md is still valid.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64527/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64526","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64526/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64526/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64526/events","html_url":"https://github.com/vercel/next.js/pull/64526","id":2244604045,"node_id":"PR_kwDOBC3Cis5sufr8","number":64526,"title":"Require turbopack build jobs","user":{"login":"ijjk","id":22380829,"node_id":"MDQ6VXNlcjIyMzgwODI5","avatar_url":"https://avatars.githubusercontent.com/u/22380829?v=4","gravatar_id":"","url":"https://api.github.com/users/ijjk","html_url":"https://github.com/ijjk","followers_url":"https://api.github.com/users/ijjk/followers","following_url":"https://api.github.com/users/ijjk/following{/other_user}","gists_url":"https://api.github.com/users/ijjk/gists{/gist_id}","starred_url":"https://api.github.com/users/ijjk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijjk/subscriptions","organizations_url":"https://api.github.com/users/ijjk/orgs","repos_url":"https://api.github.com/users/ijjk/repos","events_url":"https://api.github.com/users/ijjk/events{/privacy}","received_events_url":"https://api.github.com/users/ijjk/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-15T20:55:45Z","updated_at":"2024-04-30T00:05:48Z","closed_at":"2024-04-15T21:53:23Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64526","html_url":"https://github.com/vercel/next.js/pull/64526","diff_url":"https://github.com/vercel/next.js/pull/64526.diff","patch_url":"https://github.com/vercel/next.js/pull/64526.patch","merged_at":"2024-04-15T21:53:23Z"},"body":"These should be required for the workflow to be considered passing so that we don't accidentally forget to update the manifests\n\nCloses NEXT-3122","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64526/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64524","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64524/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64524/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64524/events","html_url":"https://github.com/vercel/next.js/pull/64524","id":2244546265,"node_id":"PR_kwDOBC3Cis5suTAQ","number":64524,"title":"Update to latest rust-cache","user":{"login":"ijjk","id":22380829,"node_id":"MDQ6VXNlcjIyMzgwODI5","avatar_url":"https://avatars.githubusercontent.com/u/22380829?v=4","gravatar_id":"","url":"https://api.github.com/users/ijjk","html_url":"https://github.com/ijjk","followers_url":"https://api.github.com/users/ijjk/followers","following_url":"https://api.github.com/users/ijjk/following{/other_user}","gists_url":"https://api.github.com/users/ijjk/gists{/gist_id}","starred_url":"https://api.github.com/users/ijjk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijjk/subscriptions","organizations_url":"https://api.github.com/users/ijjk/orgs","repos_url":"https://api.github.com/users/ijjk/repos","events_url":"https://api.github.com/users/ijjk/events{/privacy}","received_events_url":"https://api.github.com/users/ijjk/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-15T20:24:25Z","updated_at":"2024-04-30T00:05:50Z","closed_at":"2024-04-15T21:15:10Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64524","html_url":"https://github.com/vercel/next.js/pull/64524","diff_url":"https://github.com/vercel/next.js/pull/64524.diff","patch_url":"https://github.com/vercel/next.js/pull/64524.patch","merged_at":"2024-04-15T21:15:10Z"},"body":"Updates to latest version which bumps Node.js version to avoid v16 deprecation. \n\nCloses NEXT-3120","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64524/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64522","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64522/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64522/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64522/events","html_url":"https://github.com/vercel/next.js/pull/64522","id":2244506266,"node_id":"PR_kwDOBC3Cis5suKef","number":64522,"title":"refactor: remove always truthy flag","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-15T20:01:13Z","updated_at":"2024-04-30T00:05:54Z","closed_at":"2024-04-15T21:33:07Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64522","html_url":"https://github.com/vercel/next.js/pull/64522","diff_url":"https://github.com/vercel/next.js/pull/64522.diff","patch_url":"https://github.com/vercel/next.js/pull/64522.patch","merged_at":"2024-04-15T21:33:07Z"},"body":"Remove the `this.exportRuntime` flag in build manifest plugin where it's always true\n\nCloses NEXT-3118","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64522/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64521","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64521/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64521/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64521/events","html_url":"https://github.com/vercel/next.js/pull/64521","id":2244491776,"node_id":"PR_kwDOBC3Cis5suHP7","number":64521,"title":"build(edge): extract buildId into environment","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":6835761499,"node_id":"LA_kwDOBC3Cis8AAAABl3FxWw","url":"https://api.github.com/repos/vercel/next.js/labels/tests","name":"tests","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-15T19:53:37Z","updated_at":"2024-05-21T00:04:25Z","closed_at":"2024-05-06T23:52:24Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64521","html_url":"https://github.com/vercel/next.js/pull/64521","diff_url":"https://github.com/vercel/next.js/pull/64521.diff","patch_url":"https://github.com/vercel/next.js/pull/64521.patch","merged_at":"2024-05-06T23:52:24Z"},"body":"### What\r\n\r\n* Extract `buildId` and server action encryption key into environment variables for edge to make code more deterministic \r\n* Fixed the legacy bad env names from #64108\r\n* Always sort `routes` in prerender manifest for consistent output\r\n* Change `environments` to `env` in middleware manifest, confirmed with @javivelasco this is a fine change without need to bumping the version\r\n\r\n### Why\r\n\r\nDynamic variants like `buildId`, SA `encryptionKey` and preview props are different per build, which results to the non determinstic edge bundles. Once we extracted them into env vars then the bundles become deterministic which give us more space for optimization\r\n\r\n\r\nCloses NEXT-3117","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64521/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64520","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64520/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64520/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64520/events","html_url":"https://github.com/vercel/next.js/pull/64520","id":2244434019,"node_id":"PR_kwDOBC3Cis5st6n2","number":64520,"title":"Turbopack: Allow client components to be imported in app routes","user":{"login":"wbinnssmith","id":755844,"node_id":"MDQ6VXNlcjc1NTg0NA==","avatar_url":"https://avatars.githubusercontent.com/u/755844?v=4","gravatar_id":"","url":"https://api.github.com/users/wbinnssmith","html_url":"https://github.com/wbinnssmith","followers_url":"https://api.github.com/users/wbinnssmith/followers","following_url":"https://api.github.com/users/wbinnssmith/following{/other_user}","gists_url":"https://api.github.com/users/wbinnssmith/gists{/gist_id}","starred_url":"https://api.github.com/users/wbinnssmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wbinnssmith/subscriptions","organizations_url":"https://api.github.com/users/wbinnssmith/orgs","repos_url":"https://api.github.com/users/wbinnssmith/repos","events_url":"https://api.github.com/users/wbinnssmith/events{/privacy}","received_events_url":"https://api.github.com/users/wbinnssmith/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T19:18:41Z","updated_at":"2024-04-30T00:05:38Z","closed_at":"2024-04-15T21:18:57Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64520","html_url":"https://github.com/vercel/next.js/pull/64520","diff_url":"https://github.com/vercel/next.js/pull/64520.diff","patch_url":"https://github.com/vercel/next.js/pull/64520.patch","merged_at":"2024-04-15T21:18:57Z"},"body":"Resolves #64412\n\nThis adds a client transition to the app route `ModuleAssetContext` and the corresponding transforms so that client components can be safely imported and referenced (as their proxies) in app routes.\n\nTest Plan: Added an integration test\n\n\nCloses PACK-2964","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64520/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64518","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64518/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64518/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64518/events","html_url":"https://github.com/vercel/next.js/issues/64518","id":2244388812,"node_id":"I_kwDOBC3Cis6FxqfM","number":64518,"title":"v14.2 causing build error for Material UI Icons","user":{"login":"lucasvieirasilva","id":12723594,"node_id":"MDQ6VXNlcjEyNzIzNTk0","avatar_url":"https://avatars.githubusercontent.com/u/12723594?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasvieirasilva","html_url":"https://github.com/lucasvieirasilva","followers_url":"https://api.github.com/users/lucasvieirasilva/followers","following_url":"https://api.github.com/users/lucasvieirasilva/following{/other_user}","gists_url":"https://api.github.com/users/lucasvieirasilva/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasvieirasilva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasvieirasilva/subscriptions","organizations_url":"https://api.github.com/users/lucasvieirasilva/orgs","repos_url":"https://api.github.com/users/lucasvieirasilva/repos","events_url":"https://api.github.com/users/lucasvieirasilva/events{/privacy}","received_events_url":"https://api.github.com/users/lucasvieirasilva/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":4932840687,"node_id":"LA_kwDOBC3Cis8AAAABJgUs7w","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20next","name":"linear: next","color":"A53EF5","default":false,"description":"Confirmed issue that is tracked by the Next.js team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":24,"created_at":"2024-04-15T18:51:50Z","updated_at":"2024-05-09T00:04:34Z","closed_at":"2024-04-17T23:06:30Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/lucasvieirasilva/nextjs-mui-issue1\n\n### To Reproduce\n\n1. Clone the https://github.com/lucasvieirasilva/nextjs-mui-issue1 repo\r\n2. Install the dependencies `npm install`\r\n3. Run build `npm run build`\n\n### Current vs. Expected behavior\n\nCurrently, when there's any MUI Icon in the page the build command throws the following exception:\r\n\r\n```text\r\nError occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\r\n\r\nError: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: object.\r\n    at nM (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:61599)\r\n    at nM (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:61546)\r\n    at nN (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:64546)\r\n    at nB (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:67538)\r\n    at nD (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:66680)\r\n    at nN (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:64853)\r\n    at nB (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:67538)\r\n    at nD (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:66680)\r\n    at nN (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:64853)\r\n    at nB (/Users/lucasvieira/Projects/mui-issue1/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:12:67538)\r\n  Generating static pages (5/5)\r\n\r\n> Export encountered errors on following paths:\r\n        /page: /\r\n```\r\n\r\nI've also tested only the MUI component (e.g. Grid) and the build works correctly, it only fails with MUI Icons (`@mui/icons-material`)\r\n\r\nIf the static pages don't have any MUI Icon and any dynamic route page has MUI Icons the build works fine, but the page crashes when you try to access the application.\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: x64\r\n  Version: Darwin Kernel Version 23.4.0: Fri Mar 15 00:11:05 PDT 2024; root:xnu-10063.101.17~1/RELEASE_X86_64\r\n  Available memory (MB): 16384\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 20.12.2\r\n  npm: 10.5.0\r\n  Yarn: 1.22.19\r\n  pnpm: 8.6.12\r\nRelevant Packages:\r\n  next: 14.2.1-canary.5 // There is a newer canary version (14.3.0-canary.0) available, please upgrade! \r\n  eslint-config-next: 14.2.1\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: standalone\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext build (local)\n\n### Additional context\n\nI've tested with the new `v14.2.1-canary.5` version which is supposed to fix this issue, but apparently, it only fixes MUI components, not MUI icons.\r\n\r\nIssue reference: https://github.com/vercel/next.js/issues/64369\r\n\r\nI've tested with Next.js `14.1.4` and works fine.\r\n\r\nThe `14.2.1-canary.7` and `14.3.0-canary.0` versions are not working as well.\n\n<sub>[NEXT-3119](https://linear.app/vercel/issue/NEXT-3119/v142-causing-build-error-for-material-ui-icons)</sub>","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64518/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64518/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64517","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64517/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64517/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64517/events","html_url":"https://github.com/vercel/next.js/issues/64517","id":2244368424,"node_id":"I_kwDOBC3Cis6Fxlgo","number":64517,"title":"`revalidateTag` inside dynamic parallel route slot does not work as expected","user":{"login":"beckerei","id":3099581,"node_id":"MDQ6VXNlcjMwOTk1ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3099581?v=4","gravatar_id":"","url":"https://api.github.com/users/beckerei","html_url":"https://github.com/beckerei","followers_url":"https://api.github.com/users/beckerei/followers","following_url":"https://api.github.com/users/beckerei/following{/other_user}","gists_url":"https://api.github.com/users/beckerei/gists{/gist_id}","starred_url":"https://api.github.com/users/beckerei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beckerei/subscriptions","organizations_url":"https://api.github.com/users/beckerei/orgs","repos_url":"https://api.github.com/users/beckerei/repos","events_url":"https://api.github.com/users/beckerei/events{/privacy}","received_events_url":"https://api.github.com/users/beckerei/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-15T18:42:12Z","updated_at":"2024-05-01T12:02:21Z","closed_at":"2024-04-16T13:56:49Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://codesandbox.io/p/sandbox/cool-resonance-hmp58x\n\n### To Reproduce\n\n1. build & start\r\n2. navigate to `/foo` via link (dynamic)\r\n3. click button \"revalidate Tag\"\r\n\n\n### Current vs. Expected behavior\n\nThe resource associated with the tag has not been updated.\r\nI'm expected the resource to be updated.\r\n\r\nDowngrading next to 14.1.0 in the provided example fixes the problem.\r\n\r\nThis may only apply to the dev server:\r\nSometimes the resource seems to be updated when a certain time has passed (30sec?), but to me the pattern is random.\r\nYou can also sometimes see different cached data between the two routes (I expect this to be because we have a page and a catchall page in the main slot - optional cache all does not work, this is why it's duplicated)\r\n\r\n\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: linux\r\n  Arch: x64\r\n  Version: #1 SMP PREEMPT_DYNAMIC Sun Aug  6 20:05:33 UTC 2023\r\n  Available memory (MB): 4102\r\n  Available CPU cores: 2\r\nBinaries:\r\n  Node: 20.9.0\r\n  npm: 9.8.1\r\n  Yarn: 1.22.19\r\n  pnpm: 8.10.2\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.1.3\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next start (local)\n\n### Additional context\n\nWe upgraded our application to 14.2.0 only to see that our revalidation no longer has any effect, but we also can't really downgrade since we before got occosionally/reproducible blank pages that have been fixed in the release.\r\n\r\nI'm currently setting `experimental.staleTimes.dynamic` to 0 as a hot-fix, but it's also not helping all of time.\r\n\r\nWe usually have a redirect after the action, but for some other actions the resource is being updated without a redirect afterwards, in these cases it seems that the revalidation works as before.\r\n\r\n\r\nOur app folder structure is similar as in the provided example this is why I adapted it.\r\nWe have a main page that has paginated content and the parallel route slot can render a sidepanel containing additional information where some things can also be updated. Updated data needs to be reflected in the panel as well as the main slot.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64517/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64517/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64516","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64516/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64516/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64516/events","html_url":"https://github.com/vercel/next.js/pull/64516","id":2244300738,"node_id":"PR_kwDOBC3Cis5stdTo","number":64516,"title":"Revert \"fix(next): global not-found not working on multi-root layouts\"","user":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-15T18:02:41Z","updated_at":"2024-04-30T00:06:06Z","closed_at":"2024-04-15T18:07:41Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64516","html_url":"https://github.com/vercel/next.js/pull/64516","diff_url":"https://github.com/vercel/next.js/pull/64516.diff","patch_url":"https://github.com/vercel/next.js/pull/64516.patch","merged_at":null},"body":"Reverts vercel/next.js#63053\n\nCloses PACK-2963","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64516/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64515","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64515/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64515/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64515/events","html_url":"https://github.com/vercel/next.js/pull/64515","id":2244296123,"node_id":"PR_kwDOBC3Cis5stcT7","number":64515,"title":"hotfix: hardcoded skip turbopack tests to manifest","user":{"login":"devjiwonchoi","id":120007119,"node_id":"U_kgDOBycpzw","avatar_url":"https://avatars.githubusercontent.com/u/120007119?v=4","gravatar_id":"","url":"https://api.github.com/users/devjiwonchoi","html_url":"https://github.com/devjiwonchoi","followers_url":"https://api.github.com/users/devjiwonchoi/followers","following_url":"https://api.github.com/users/devjiwonchoi/following{/other_user}","gists_url":"https://api.github.com/users/devjiwonchoi/gists{/gist_id}","starred_url":"https://api.github.com/users/devjiwonchoi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devjiwonchoi/subscriptions","organizations_url":"https://api.github.com/users/devjiwonchoi/orgs","repos_url":"https://api.github.com/users/devjiwonchoi/repos","events_url":"https://api.github.com/users/devjiwonchoi/events{/privacy}","received_events_url":"https://api.github.com/users/devjiwonchoi/received_events","type":"User","site_admin":false},"labels":[{"id":5552804017,"node_id":"LA_kwDOBC3Cis8AAAABSvkQsQ","url":"https://api.github.com/repos/vercel/next.js/labels/CI%20approved","name":"CI approved","color":"75AC05","default":false,"description":"Approve running CI for fork"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-15T17:59:52Z","updated_at":"2024-04-30T00:06:02Z","closed_at":"2024-04-15T19:46:43Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64515","html_url":"https://github.com/vercel/next.js/pull/64515","diff_url":"https://github.com/vercel/next.js/pull/64515.diff","patch_url":"https://github.com/vercel/next.js/pull/64515.patch","merged_at":"2024-04-15T19:46:43Z"},"body":"cc @shuding \r\n\r\nCI run failed after #63053 on turbo production, which had not yet been targeted for turbo.\r\n\r\nx-ref: #63103","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64515/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64514","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64514/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64514/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64514/events","html_url":"https://github.com/vercel/next.js/issues/64514","id":2244208708,"node_id":"I_kwDOBC3Cis6Fw-hE","number":64514,"title":"Docs: Support docs versioning out of the box","user":{"login":"manojadams","id":1009561,"node_id":"MDQ6VXNlcjEwMDk1NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1009561?v=4","gravatar_id":"","url":"https://api.github.com/users/manojadams","html_url":"https://github.com/manojadams","followers_url":"https://api.github.com/users/manojadams/followers","following_url":"https://api.github.com/users/manojadams/following{/other_user}","gists_url":"https://api.github.com/users/manojadams/gists{/gist_id}","starred_url":"https://api.github.com/users/manojadams/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manojadams/subscriptions","organizations_url":"https://api.github.com/users/manojadams/orgs","repos_url":"https://api.github.com/users/manojadams/repos","events_url":"https://api.github.com/users/manojadams/events{/privacy}","received_events_url":"https://api.github.com/users/manojadams/received_events","type":"User","site_admin":false},"labels":[{"id":3644980154,"node_id":"LA_kwDOBC3Cis7ZQfu6","url":"https://api.github.com/repos/vercel/next.js/labels/Documentation","name":"Documentation","color":"C2E0C6","default":false,"description":"Related to Next.js' official documentation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-15T17:09:05Z","updated_at":"2024-05-02T12:02:11Z","closed_at":"2024-04-18T08:53:21Z","author_association":"NONE","active_lock_reason":"resolved","body":"### What is the improvement or update you wish to see?\n\nNextra can provide support for versioning docs\n\n### Is there any context that might help us understand?\n\n## Provide doc versioning support like the following site:\r\n\r\n<img width=\"1516\" alt=\"Screenshot 2024-04-15 at 10 32 17 PM\" src=\"https://github.com/vercel/next.js/assets/1009561/10257180-5200-4ac1-9592-146407bb9c7d\">\r\n\n\n### Does the docs page already exist? Please link to it.\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64514/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64512","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64512/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64512/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64512/events","html_url":"https://github.com/vercel/next.js/pull/64512","id":2244186796,"node_id":"PR_kwDOBC3Cis5stEQE","number":64512,"title":"fix(next-server): 'quiet' setting delegate for custom server","user":{"login":"bobaaaaa","id":733158,"node_id":"MDQ6VXNlcjczMzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/733158?v=4","gravatar_id":"","url":"https://api.github.com/users/bobaaaaa","html_url":"https://github.com/bobaaaaa","followers_url":"https://api.github.com/users/bobaaaaa/followers","following_url":"https://api.github.com/users/bobaaaaa/following{/other_user}","gists_url":"https://api.github.com/users/bobaaaaa/gists{/gist_id}","starred_url":"https://api.github.com/users/bobaaaaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobaaaaa/subscriptions","organizations_url":"https://api.github.com/users/bobaaaaa/orgs","repos_url":"https://api.github.com/users/bobaaaaa/repos","events_url":"https://api.github.com/users/bobaaaaa/events{/privacy}","received_events_url":"https://api.github.com/users/bobaaaaa/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":6835761499,"node_id":"LA_kwDOBC3Cis8AAAABl3FxWw","url":"https://api.github.com/repos/vercel/next.js/labels/tests","name":"tests","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T16:56:11Z","updated_at":"2024-05-02T12:03:26Z","closed_at":"2024-04-17T20:07:51Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64512","html_url":"https://github.com/vercel/next.js/pull/64512","diff_url":"https://github.com/vercel/next.js/pull/64512.diff","patch_url":"https://github.com/vercel/next.js/pull/64512.patch","merged_at":"2024-04-17T20:07:51Z"},"body":"## Info\r\n\r\nI did not create a GitHub issue, but this PR for fixing the issue. Hope that's okay.\r\n\r\n## The bug\r\n\r\nWe run a 'normal' custom server described here: https://nextjs.org/docs/pages/building-your-application/configuring/custom-server\r\n\r\n```ts\r\nconst next = require('next');\r\nconst dev = process.env.NODE_ENV !== 'production';\r\nconst port = 3000;\r\nconst app = next({ dev, port, quiet: !dev })\r\nconst handle = app.getRequestHandler()\r\n// ...\r\n```\r\n\r\nThe `quiet` settings is missed in some deeper Next.js internal api calls. For that reason, the setting did not work at all. This works only in production mode.\r\n\r\n## Testing\r\n\r\nI tried to implement a test in `/test/production/custom-server` but I failed to get the `stderr` messages. When someone give me some guidance, I will add a new test.\r\n\r\nHere are some criteria:\r\n\r\n- need: custom server with `quiet: true` setting\r\n- need: a next.js page with thrown error. e.g. `export const getServerSideProps = () => { throw new Error('failed') }`\r\n- need: collect all `stderr` messages\r\n\r\nI tested the fix in our project by editing the files in `node_modules` -- it worked.\r\n\r\n## Background\r\n\r\nWe upgrade our project from next `13.3.4` to `14.2.0` and saw this regression. I can not tell in which version this bug was added. We run a Next.js + 'custom server' + Docker setup. Because we have a lot of traffic, we need to suppress the standard Next.js logging and using our own logging.\r\n\r\n\r\n<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64512/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64511","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64511/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64511/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64511/events","html_url":"https://github.com/vercel/next.js/pull/64511","id":2244152503,"node_id":"PR_kwDOBC3Cis5ss8gN","number":64511,"title":"Fix DynamicServerError not being thrown in fetch","user":{"login":"ijjk","id":22380829,"node_id":"MDQ6VXNlcjIyMzgwODI5","avatar_url":"https://avatars.githubusercontent.com/u/22380829?v=4","gravatar_id":"","url":"https://api.github.com/users/ijjk","html_url":"https://github.com/ijjk","followers_url":"https://api.github.com/users/ijjk/followers","following_url":"https://api.github.com/users/ijjk/following{/other_user}","gists_url":"https://api.github.com/users/ijjk/gists{/gist_id}","starred_url":"https://api.github.com/users/ijjk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijjk/subscriptions","organizations_url":"https://api.github.com/users/ijjk/orgs","repos_url":"https://api.github.com/users/ijjk/repos","events_url":"https://api.github.com/users/ijjk/events{/privacy}","received_events_url":"https://api.github.com/users/ijjk/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-15T16:43:16Z","updated_at":"2024-04-30T00:06:10Z","closed_at":"2024-04-15T17:09:57Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64511","html_url":"https://github.com/vercel/next.js/pull/64511","diff_url":"https://github.com/vercel/next.js/pull/64511.diff","patch_url":"https://github.com/vercel/next.js/pull/64511.patch","merged_at":"2024-04-15T17:09:57Z"},"body":"This ensures we properly skip calling a fetch during build-time that has `cache: 'no-store'` as it should only be called during runtime instead. \r\n\r\nFixes: https://github.com/vercel/next.js/issues/64462\n\nCloses NEXT-3114","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64511/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64509","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64509/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64509/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64509/events","html_url":"https://github.com/vercel/next.js/issues/64509","id":2244114694,"node_id":"I_kwDOBC3Cis6FwnkG","number":64509,"title":"Mismatch of names in grid-template-areas and grid-area across different css modules with --turbo","user":{"login":"Arctomachine","id":29041820,"node_id":"MDQ6VXNlcjI5MDQxODIw","avatar_url":"https://avatars.githubusercontent.com/u/29041820?v=4","gravatar_id":"","url":"https://api.github.com/users/Arctomachine","html_url":"https://github.com/Arctomachine","followers_url":"https://api.github.com/users/Arctomachine/followers","following_url":"https://api.github.com/users/Arctomachine/following{/other_user}","gists_url":"https://api.github.com/users/Arctomachine/gists{/gist_id}","starred_url":"https://api.github.com/users/Arctomachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arctomachine/subscriptions","organizations_url":"https://api.github.com/users/Arctomachine/orgs","repos_url":"https://api.github.com/users/Arctomachine/repos","events_url":"https://api.github.com/users/Arctomachine/events{/privacy}","received_events_url":"https://api.github.com/users/Arctomachine/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5484123250,"node_id":"LA_kwDOBC3Cis8AAAABRuEUcg","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20turbopack","name":"linear: turbopack","color":"290F77","default":false,"description":"Confirmed issue that is tracked by the Turbopack team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"timneutkens","id":6324199,"node_id":"MDQ6VXNlcjYzMjQxOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6324199?v=4","gravatar_id":"","url":"https://api.github.com/users/timneutkens","html_url":"https://github.com/timneutkens","followers_url":"https://api.github.com/users/timneutkens/followers","following_url":"https://api.github.com/users/timneutkens/following{/other_user}","gists_url":"https://api.github.com/users/timneutkens/gists{/gist_id}","starred_url":"https://api.github.com/users/timneutkens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timneutkens/subscriptions","organizations_url":"https://api.github.com/users/timneutkens/orgs","repos_url":"https://api.github.com/users/timneutkens/repos","events_url":"https://api.github.com/users/timneutkens/events{/privacy}","received_events_url":"https://api.github.com/users/timneutkens/received_events","type":"User","site_admin":false},"assignees":[{"login":"timneutkens","id":6324199,"node_id":"MDQ6VXNlcjYzMjQxOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6324199?v=4","gravatar_id":"","url":"https://api.github.com/users/timneutkens","html_url":"https://github.com/timneutkens","followers_url":"https://api.github.com/users/timneutkens/followers","following_url":"https://api.github.com/users/timneutkens/following{/other_user}","gists_url":"https://api.github.com/users/timneutkens/gists{/gist_id}","starred_url":"https://api.github.com/users/timneutkens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timneutkens/subscriptions","organizations_url":"https://api.github.com/users/timneutkens/orgs","repos_url":"https://api.github.com/users/timneutkens/repos","events_url":"https://api.github.com/users/timneutkens/events{/privacy}","received_events_url":"https://api.github.com/users/timneutkens/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2024-04-15T16:28:18Z","updated_at":"2024-06-06T12:02:04Z","closed_at":"2024-05-21T19:39:48Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/Arctomachine/next-grid-template-areas-bug\n\n### To Reproduce\n\n1. Start dev server with --turbo flag\r\n2. Observe devtools for different names of grid areas in grid and in cards, incorrect visuals\r\n\n\n### Current vs. Expected behavior\n\nExpected: areas have same name in grid and cards\r\nCurrent: area names mismatch. Grid will append its module name to grid-template-area, but card will append its module name to grid-area. Since they are different names, browser will not put cards into grid correctly.\r\n\r\nExample of area name in grid:\r\n![image](https://github.com/vercel/next.js/assets/29041820/32dcb2e9-65a3-4235-bc78-d7e2987d917c)\r\nAnd in card:\r\n![image](https://github.com/vercel/next.js/assets/29041820/0c7c6ced-9a2f-42d5-8583-f5278ee0a028)\r\n\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: win32\r\n  Arch: x64\r\n  Version: Windows 10 Pro\r\n  Available memory (MB): 32720\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 20.10.0\r\n  npm: N/A\r\n  Yarn: N/A\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.1-canary.6 // Latest available version is detected (14.2.1-canary.6).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.1.3\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nTurbopack (--turbo)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\nOnly happens for turbopack in dev mode. Production build is not affected\n\n<sub>[PACK-2976](https://linear.app/vercel/issue/PACK-2976/mismatch-of-names-in-grid-template-areas-and-grid-area-across)</sub>","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64509/reactions","total_count":4,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64509/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64508","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64508/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64508/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64508/events","html_url":"https://github.com/vercel/next.js/pull/64508","id":2244088891,"node_id":"PR_kwDOBC3Cis5sst_S","number":64508,"title":"Improve top level await coverage","user":{"login":"timneutkens","id":6324199,"node_id":"MDQ6VXNlcjYzMjQxOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6324199?v=4","gravatar_id":"","url":"https://api.github.com/users/timneutkens","html_url":"https://github.com/timneutkens","followers_url":"https://api.github.com/users/timneutkens/followers","following_url":"https://api.github.com/users/timneutkens/following{/other_user}","gists_url":"https://api.github.com/users/timneutkens/gists{/gist_id}","starred_url":"https://api.github.com/users/timneutkens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timneutkens/subscriptions","organizations_url":"https://api.github.com/users/timneutkens/orgs","repos_url":"https://api.github.com/users/timneutkens/repos","events_url":"https://api.github.com/users/timneutkens/events{/privacy}","received_events_url":"https://api.github.com/users/timneutkens/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-15T16:18:48Z","updated_at":"2024-05-02T12:03:42Z","closed_at":"2024-04-17T15:44:40Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64508","html_url":"https://github.com/vercel/next.js/pull/64508","diff_url":"https://github.com/vercel/next.js/pull/64508.diff","patch_url":"https://github.com/vercel/next.js/pull/64508.patch","merged_at":"2024-04-17T15:44:40Z"},"body":"## What?\r\n\r\n- Changes webpack output target to `es6` (required for `async function` output)\r\n- Adds tests for top level await in server components and client components (App Router)\r\n- Converted the async-modules tests to `test/e2e`\r\n- Has one skipped test that @gnoff is going to look into. This shouldn't block merging this PR  \r\n\r\n\r\nAdds additional tests for top level `await`.\r\n\r\nSince [Next.js 13.4.5](https://github.com/vercel/next.js/releases/tag/v13.4.5) webpack has top level await support enabled by default.\r\n\r\nSimilarly Turbopack supports top level await by default as well.\r\n\r\nTLDR: You can remove `topLevelAwait: true` from the webpack configuration.\r\n\r\n\r\nIn writing these tests I found that client components are missing some kind of handling for top level await (async modules) so I've raised that to @gnoff who is going to have a look.\r\n\r\n<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n\r\n\r\nCloses NEXT-3126\r\nFixes https://github.com/vercel/next.js/issues/43382","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64508/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64507","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64507/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64507/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64507/events","html_url":"https://github.com/vercel/next.js/issues/64507","id":2244012614,"node_id":"I_kwDOBC3Cis6FwOpG","number":64507,"title":"Dynamic API route catch-all statement fails on vercel but works locally","user":{"login":"Pfed-prog","id":66903336,"node_id":"MDQ6VXNlcjY2OTAzMzM2","avatar_url":"https://avatars.githubusercontent.com/u/66903336?v=4","gravatar_id":"","url":"https://api.github.com/users/Pfed-prog","html_url":"https://github.com/Pfed-prog","followers_url":"https://api.github.com/users/Pfed-prog/followers","following_url":"https://api.github.com/users/Pfed-prog/following{/other_user}","gists_url":"https://api.github.com/users/Pfed-prog/gists{/gist_id}","starred_url":"https://api.github.com/users/Pfed-prog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pfed-prog/subscriptions","organizations_url":"https://api.github.com/users/Pfed-prog/orgs","repos_url":"https://api.github.com/users/Pfed-prog/repos","events_url":"https://api.github.com/users/Pfed-prog/events{/privacy}","received_events_url":"https://api.github.com/users/Pfed-prog/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":4279919987,"node_id":"LA_kwDOBC3Cis7_GmVz","url":"https://api.github.com/repos/vercel/next.js/labels/Runtime","name":"Runtime","color":"f81ce5","default":false,"description":"Related to Node.js or Edge Runtime with Next.js."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null},{"id":5730825379,"node_id":"LA_kwDOBC3Cis8AAAABVZV0ow","url":"https://api.github.com/repos/vercel/next.js/labels/please%20simplify%20reproduction","name":"please simplify reproduction","color":"fbca04","default":false,"description":"The reproduction is too complex"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T15:41:28Z","updated_at":"2024-05-01T12:02:18Z","closed_at":"2024-04-16T18:29:54Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/PinSaveDAO/PinSave-EVM/tree/7ba486f670cf0abb022b62d30119ac424309b09d/packages/frontend\n\n### To Reproduce\n\nDeploy the app to vercel\r\nhttps://github.com/PinSaveDAO/PinSave-EVM/tree/7ba486f670cf0abb022b62d30119ac424309b09d/packages/frontend\n\n### Current vs. Expected behavior\n\nLocally works fine, but on vercel brings errors in production.\r\n\r\nExpected behaviour is well documented in the official docs at https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes#catch-all-segments\r\n\r\nActual behaviour\r\n<img width=\"1045\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/66903336/6b75e1c2-9b49-4d7b-813e-ac64441afa41\">\r\n\n\n### Provide environment information\n\n```bash\nNode Js 20 on Vercel Server\r\n\"next\": \"^14.0.1\",\r\n\"typescript\": \"^5.0.4\"\r\nhttps://github.com/PinSaveDAO/PinSave-EVM/blob/7ba486f670cf0abb022b62d30119ac424309b09d/packages/frontend/package.json\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nMiddleware / Edge (API routes, runtime)\n\n### Which stage(s) are affected? (Select all that apply)\n\nVercel (Deployed)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64507/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64505","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64505/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64505/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64505/events","html_url":"https://github.com/vercel/next.js/pull/64505","id":2243879704,"node_id":"PR_kwDOBC3Cis5sr_l1","number":64505,"title":"Fix missing PagesOnly in 05-mdx","user":{"login":"ijjk","id":22380829,"node_id":"MDQ6VXNlcjIyMzgwODI5","avatar_url":"https://avatars.githubusercontent.com/u/22380829?v=4","gravatar_id":"","url":"https://api.github.com/users/ijjk","html_url":"https://github.com/ijjk","followers_url":"https://api.github.com/users/ijjk/followers","following_url":"https://api.github.com/users/ijjk/following{/other_user}","gists_url":"https://api.github.com/users/ijjk/gists{/gist_id}","starred_url":"https://api.github.com/users/ijjk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijjk/subscriptions","organizations_url":"https://api.github.com/users/ijjk/orgs","repos_url":"https://api.github.com/users/ijjk/repos","events_url":"https://api.github.com/users/ijjk/events{/privacy}","received_events_url":"https://api.github.com/users/ijjk/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-15T14:48:07Z","updated_at":"2024-04-30T00:06:24Z","closed_at":"2024-04-15T14:56:53Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64505","html_url":"https://github.com/vercel/next.js/pull/64505","diff_url":"https://github.com/vercel/next.js/pull/64505.diff","patch_url":"https://github.com/vercel/next.js/pull/64505.patch","merged_at":"2024-04-15T14:56:53Z"},"body":"Looks like we have a syntax error in https://github.com/vercel/next.js/pull/63568 from missing closing `</PagessOnly>` tag. \r\n\r\n```sh\r\nb383-75ab3d452c93.mdx:0:0: ERROR: [plugin: @mdx-js/esbuild] Expected a closing tag for `</PagesOnly>` (503:1-503:12)\r\n```\r\n\r\nx-ref: https://github.com/vercel/next.js/pull/63568\n\nCloses NEXT-3111","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64505/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64503","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64503/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64503/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64503/events","html_url":"https://github.com/vercel/next.js/pull/64503","id":2243745595,"node_id":"PR_kwDOBC3Cis5sriFz","number":64503,"title":"Add `@appsignal/nodejs` to the external packages list","user":{"login":"unflxw","id":45180344,"node_id":"MDQ6VXNlcjQ1MTgwMzQ0","avatar_url":"https://avatars.githubusercontent.com/u/45180344?v=4","gravatar_id":"","url":"https://api.github.com/users/unflxw","html_url":"https://github.com/unflxw","followers_url":"https://api.github.com/users/unflxw/followers","following_url":"https://api.github.com/users/unflxw/following{/other_user}","gists_url":"https://api.github.com/users/unflxw/gists{/gist_id}","starred_url":"https://api.github.com/users/unflxw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unflxw/subscriptions","organizations_url":"https://api.github.com/users/unflxw/orgs","repos_url":"https://api.github.com/users/unflxw/repos","events_url":"https://api.github.com/users/unflxw/events{/privacy}","received_events_url":"https://api.github.com/users/unflxw/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3644980154,"node_id":"LA_kwDOBC3Cis7ZQfu6","url":"https://api.github.com/repos/vercel/next.js/labels/Documentation","name":"Documentation","color":"C2E0C6","default":false,"description":"Related to Next.js' official documentation."},{"id":5552804017,"node_id":"LA_kwDOBC3Cis8AAAABSvkQsQ","url":"https://api.github.com/repos/vercel/next.js/labels/CI%20approved","name":"CI approved","color":"75AC05","default":false,"description":"Approve running CI for fork"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-04-15T13:49:51Z","updated_at":"2024-05-03T12:02:27Z","closed_at":"2024-04-18T16:12:27Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64503","html_url":"https://github.com/vercel/next.js/pull/64503","diff_url":"https://github.com/vercel/next.js/pull/64503.diff","patch_url":"https://github.com/vercel/next.js/pull/64503.patch","merged_at":"2024-04-18T16:12:27Z"},"body":"The `@appsignal/nodejs` instrumentation package fails to load in Next.js 14 due to Webpack failing to bundle its Node.js native extension. Adding it to the server components external packages list fixes this issue.\r\n\r\nPart of https://github.com/appsignal/appsignal-nodejs/issues/1014.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64503/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64502","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64502/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64502/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64502/events","html_url":"https://github.com/vercel/next.js/issues/64502","id":2243715686,"node_id":"I_kwDOBC3Cis6FvGJm","number":64502,"title":"404 status code on 200 page","user":{"login":"DjilanMouhous","id":45048891,"node_id":"MDQ6VXNlcjQ1MDQ4ODkx","avatar_url":"https://avatars.githubusercontent.com/u/45048891?v=4","gravatar_id":"","url":"https://api.github.com/users/DjilanMouhous","html_url":"https://github.com/DjilanMouhous","followers_url":"https://api.github.com/users/DjilanMouhous/followers","following_url":"https://api.github.com/users/DjilanMouhous/following{/other_user}","gists_url":"https://api.github.com/users/DjilanMouhous/gists{/gist_id}","starred_url":"https://api.github.com/users/DjilanMouhous/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DjilanMouhous/subscriptions","organizations_url":"https://api.github.com/users/DjilanMouhous/orgs","repos_url":"https://api.github.com/users/DjilanMouhous/repos","events_url":"https://api.github.com/users/DjilanMouhous/events{/privacy}","received_events_url":"https://api.github.com/users/DjilanMouhous/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-04-15T13:38:23Z","updated_at":"2024-05-24T00:05:12Z","closed_at":"2024-05-08T17:43:31Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/DjilanMouhous/next-404-demo.git\n\n### To Reproduce\n\n1. Go to /src/app/[...slug]/dummyApi/singlePage.ts\r\n2. Edit the time const (line 118) to set your build time\r\n3. npm run build\r\n4. npm run start\n\n### Current vs. Expected behavior\n\nCurrent Behavior: During the first 5 minutes after build, the page displays correctly. In the next 5 minutes, a simulated 404 error occurs to mimic a temporary WordPress issue. After these initial 10 minutes, the page displays correctly but with a 404 error code.\r\n\r\nExpected Behavior: After the issue is resolved, the page should display a 200 status code.\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 23.0.0: Fri Sep 15 14:41:34 PDT 2023; root:xnu-10002.1.13~1/RELEASE_ARM64_T8103\r\n  Available memory (MB): 16384\r\n  Available CPU cores: 8\r\nBinaries:\r\n  Node: 20.11.1\r\n  npm: 10.2.4\r\n  Yarn: N/A\r\n  pnpm: 7.30.0\r\nRelevant Packages:\r\n  next: 14.2.1-canary.6 // Latest available version is detected (14.2.1-canary.6).\r\n  eslint-config-next: 14.2.1-canary.5\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext build (local), Other (Deployed)\n\n### Additional context\n\nThis code replicates an issue encountered in a Next.js application that displays pages fetched from a WordPress API. Sometimes, the WordPress API returns an invalid format, resulting in a 404 error on the Next.js side. After a successful cache validation, the content displays correctly but with a 404 error code, which adversely affects SEO.\r\n\r\nHere is a quick demo with screenshots\r\n1. Build ok, API working fine (expected)\r\n<img width=\"718\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/45048891/8e83830f-ff04-4d0e-ad61-cdfe5d815bcb\">\r\n2. Revalidation not ok because of Wordpress temporary issue, 404 happening (expected)\r\n<img width=\"718\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/45048891/8083300b-57bb-422c-86e0-af62348783b3\">\r\n3. Revalidation ok because Wordpress if no longer failing, content is displayed but still have 404 status code (not expected)\r\n<img width=\"718\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/45048891/74405094-7248-4869-805b-fbb93b87ccf7\">\r\n\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64502/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64501","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64501/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64501/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64501/events","html_url":"https://github.com/vercel/next.js/pull/64501","id":2243643725,"node_id":"PR_kwDOBC3Cis5srL95","number":64501,"title":"update turbopack","user":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-15T13:09:09Z","updated_at":"2024-04-30T00:05:58Z","closed_at":"2024-04-15T20:19:32Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64501","html_url":"https://github.com/vercel/next.js/pull/64501","diff_url":"https://github.com/vercel/next.js/pull/64501.diff","patch_url":"https://github.com/vercel/next.js/pull/64501.patch","merged_at":"2024-04-15T20:19:32Z"},"body":"* https://github.com/vercel/turbo/pull/7858 <!-- Tobias Koppers - refactor GlobalCssAsset to fix dynamic import of css  -->\r\n* https://github.com/vercel/turbo/pull/7944 <!-- Will Binns-Smith - Update lockfile for compatibility with next.js  -->\r\n* https://github.com/vercel/turbo/pull/7936 <!-- Tobias Koppers - fix panic when searching an the root span  -->\r\n* https://github.com/vercel/turbo/pull/7959 <!-- Tobias Koppers - fix missing async loader  -->\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64501/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64499","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64499/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64499/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64499/events","html_url":"https://github.com/vercel/next.js/pull/64499","id":2243407215,"node_id":"PR_kwDOBC3Cis5sqXqF","number":64499,"title":"feat: strip traceparent header from cachekey","user":{"login":"Jeffrey-Zutt","id":248906,"node_id":"MDQ6VXNlcjI0ODkwNg==","avatar_url":"https://avatars.githubusercontent.com/u/248906?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeffrey-Zutt","html_url":"https://github.com/Jeffrey-Zutt","followers_url":"https://api.github.com/users/Jeffrey-Zutt/followers","following_url":"https://api.github.com/users/Jeffrey-Zutt/following{/other_user}","gists_url":"https://api.github.com/users/Jeffrey-Zutt/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeffrey-Zutt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeffrey-Zutt/subscriptions","organizations_url":"https://api.github.com/users/Jeffrey-Zutt/orgs","repos_url":"https://api.github.com/users/Jeffrey-Zutt/repos","events_url":"https://api.github.com/users/Jeffrey-Zutt/events{/privacy}","received_events_url":"https://api.github.com/users/Jeffrey-Zutt/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T11:18:54Z","updated_at":"2024-04-30T00:06:20Z","closed_at":"2024-04-15T15:24:28Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64499","html_url":"https://github.com/vercel/next.js/pull/64499","diff_url":"https://github.com/vercel/next.js/pull/64499.diff","patch_url":"https://github.com/vercel/next.js/pull/64499.patch","merged_at":"2024-04-15T15:24:28Z"},"body":"### What?\r\nWe strip the `traceparent` header from the cache-key.\r\n\r\n### Why?\r\nThe traceparent header forms part of the W3C Trace Context standard, installed to track individual HTTP requests from start to end across multiple services. That means each individual HTTP request will have a unique traceparent value, reflecting its unique journey across servers and services.\r\n\r\nIf we include the traceparent header in the cache key, the uniqueness of the traceparent means the cache key would always be different even for requests that should yield the same response. This would cause the cache to always miss and re-process the request.\r\n\r\nEffectively rendering fetch-cache useless.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64499/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64499/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64496","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64496/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64496/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64496/events","html_url":"https://github.com/vercel/next.js/pull/64496","id":2243261826,"node_id":"PR_kwDOBC3Cis5sp3Rx","number":64496,"title":"chore: tweak unhelpful comment weight","user":{"login":"balazsorban44","id":18369201,"node_id":"MDQ6VXNlcjE4MzY5MjAx","avatar_url":"https://avatars.githubusercontent.com/u/18369201?v=4","gravatar_id":"","url":"https://api.github.com/users/balazsorban44","html_url":"https://github.com/balazsorban44","followers_url":"https://api.github.com/users/balazsorban44/followers","following_url":"https://api.github.com/users/balazsorban44/following{/other_user}","gists_url":"https://api.github.com/users/balazsorban44/gists{/gist_id}","starred_url":"https://api.github.com/users/balazsorban44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balazsorban44/subscriptions","organizations_url":"https://api.github.com/users/balazsorban44/orgs","repos_url":"https://api.github.com/users/balazsorban44/repos","events_url":"https://api.github.com/users/balazsorban44/events{/privacy}","received_events_url":"https://api.github.com/users/balazsorban44/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-15T10:10:46Z","updated_at":"2024-04-30T12:05:48Z","closed_at":"2024-04-16T09:01:00Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64496","html_url":"https://github.com/vercel/next.js/pull/64496","diff_url":"https://github.com/vercel/next.js/pull/64496.diff","patch_url":"https://github.com/vercel/next.js/pull/64496.patch","merged_at":"2024-04-16T09:01:00Z"},"body":"### What?\r\n\r\nMake sure that more unhelpful comments get minimized by default so issue threads are easier to read.\r\n\r\n### Why?\r\n\r\nhttps://github.com/vercel/next.js/issues/64465\r\n\r\n### How?\r\n\r\nUsing https://github.com/balazsorban44/nissuer#handle-unhelpful-comments\r\n\r\nNOTE: This has the potential to hide comments that _might_ be useful, but currently it looks like it is too permissive.\n\nCloses NEXT-3107","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64496/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64494","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64494/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64494/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64494/events","html_url":"https://github.com/vercel/next.js/issues/64494","id":2243198230,"node_id":"I_kwDOBC3Cis6FtH0W","number":64494,"title":"[TurboPack] Unable to compile specific package (Sanity). Module factory is not available. It might have been deleted in an HMR update. ","user":{"login":"pixel-toys-chris-evans","id":121940392,"node_id":"U_kgDOB0SpqA","avatar_url":"https://avatars.githubusercontent.com/u/121940392?v=4","gravatar_id":"","url":"https://api.github.com/users/pixel-toys-chris-evans","html_url":"https://github.com/pixel-toys-chris-evans","followers_url":"https://api.github.com/users/pixel-toys-chris-evans/followers","following_url":"https://api.github.com/users/pixel-toys-chris-evans/following{/other_user}","gists_url":"https://api.github.com/users/pixel-toys-chris-evans/gists{/gist_id}","starred_url":"https://api.github.com/users/pixel-toys-chris-evans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pixel-toys-chris-evans/subscriptions","organizations_url":"https://api.github.com/users/pixel-toys-chris-evans/orgs","repos_url":"https://api.github.com/users/pixel-toys-chris-evans/repos","events_url":"https://api.github.com/users/pixel-toys-chris-evans/events{/privacy}","received_events_url":"https://api.github.com/users/pixel-toys-chris-evans/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3555302485,"node_id":"LA_kwDOBC3Cis7T6ZxV","url":"https://api.github.com/repos/vercel/next.js/labels/Lazy%20Loading","name":"Lazy Loading","color":"D93F0B","default":false,"description":"Related to Next.js Lazy Loading (e.g., `next/dynamic` or `React.lazy`)."},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5484123250,"node_id":"LA_kwDOBC3Cis8AAAABRuEUcg","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20turbopack","name":"linear: turbopack","color":"290F77","default":false,"description":"Confirmed issue that is tracked by the Turbopack team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-15T09:41:08Z","updated_at":"2024-04-30T00:04:18Z","closed_at":"2024-04-15T13:04:59Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/pixel-toys-chris-evans/module-factory-unloaded\n\n### To Reproduce\n\n1. Run `pnpm run dev:turbo`.\r\n2. Navigate to `/studio`.\r\n3. Attempt to open a Schema in the Structure tab.\n\n### Current vs. Expected behavior\n\nWhen running the above example with webpack, the project successfully compiles lazily loaded modules and allows us to amend content. When running with `--turbo`, we encounter the following error on all operating systems:\r\n\r\n```\r\nError: Module [project]/node_modules/.pnpm/sanity@3.37.2_@types+react@18.2.78_react-dom@18.2.0_react@18.2.0_styled-components@6.1.8/node_modules/sanity/lib/_chunks-es/pane.mjs [app-client] (ecmascript, async loader) was instantiated because it was required from module [project]/node_modules/.pnpm/sanity@3.37.2_@types+react@18.2.78_react-dom@18.2.0_react@18.2.0_styled-components@6.1.8/node_modules/sanity/lib/_chunks-es/index3.mjs [app-client] (ecmascript), but the module factory is not available. It might have been deleted in an HMR update.\r\n\r\nError: Module [project]/node_modules/.pnpm/sanity@3.37.2_@types+react@18.2.78_react-dom@18.2.0_react@18.2.0_styled-components@6.1.8/node_modules/sanity/lib/_chunks-es/pane.mjs [app-client] (ecmascript, async loader) was instantiated because it was required from module [project]/node_modules/.pnpm/sanity@3.37.2_@types+react@18.2.78_react-dom@18.2.0_react@18.2.0_styled-components@6.1.8/node_modules/sanity/lib/_chunks-es/index3.mjs [app-client] (ecmascript), but the module factory is not available. It might have been deleted in an HMR update.\r\n    at instantiateModule (http://localhost:3000/_next/static/chunks/4c2df_next_dist_esm_build_templates_app-page_b49274.js:494:15)\r\n    at getOrInstantiateModuleFromParent (http://localhost:3000/_next/static/chunks/4c2df_next_dist_esm_build_templates_app-page_b49274.js:609:12)\r\n    at commonJsRequire (http://localhost:3000/_next/static/chunks/4c2df_next_dist_esm_build_templates_app-page_b49274.js:146:20)\r\n    at http://localhost:3000/_next/static/chunks/node_modules__pnpm_c8314f._.js:896:329\r\n    at lazyInitializer (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react_41ca71._.js:1767:32)\r\n    at mountLazyComponent (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:14571:29)\r\n    at beginWork$1 (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:15959:32)\r\n    at beginWork (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:22853:28)\r\n    at performUnitOfWork (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:21895:24)\r\n    at workLoopSync (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:21660:17)\r\n    at renderRootSync (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:21627:21)\r\n    at recoverFromConcurrentError (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:20929:30)\r\n    at performSyncWorkOnRoot (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:21176:34)\r\n    at flushSyncWorkAcrossRoots_impl (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:7079:33)\r\n    at flushSyncWorkOnAllRoots (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:7045:13)\r\n    at processRootScheduleInMicrotask (http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:7167:13)\r\n    at http://localhost:3000/_next/static/chunks/4c2df_next_dist_compiled_react-dom_cjs_react-dom_development_908cb0.js:7313:21\r\n```\r\n\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 23.4.0: Fri Mar 15 00:12:49 PDT 2024; root:xnu-10063.101.17~1/RELEASE_ARM64_T6020\r\n  Available memory (MB): 32768\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 20.12.1\r\n  npm: 10.5.0\r\n  Yarn: 1.22.11\r\n  pnpm: 8.15.6\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: N/A\r\nNext.js Config:\r\n  output: export\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router, Dynamic imports (next/dynamic), Turbopack (--turbo)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\nThis seems to have been introduced sometime after `14.2.0-canary.63`. I have attempted to downgrade to a canary version since then but it was failing to compile entirely. I'm unsure as to whether something in the Sanity package has been updated to coincide with this.\n\n<sub>[PACK-2958](https://linear.app/vercel/issue/PACK-2958/[turbopack]-unable-to-compile-specific-package-sanity-module-factory)</sub>","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64494/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64494/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64493","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64493/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64493/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64493/events","html_url":"https://github.com/vercel/next.js/pull/64493","id":2243180361,"node_id":"PR_kwDOBC3Cis5splXS","number":64493,"title":"improve turborepo caching","user":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T09:32:15Z","updated_at":"2024-04-30T00:06:26Z","closed_at":"2024-04-15T10:42:28Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64493","html_url":"https://github.com/vercel/next.js/pull/64493","diff_url":"https://github.com/vercel/next.js/pull/64493.diff","patch_url":"https://github.com/vercel/next.js/pull/64493.patch","merged_at":"2024-04-15T10:42:28Z"},"body":"### What?\r\n\r\nThere is a race condition in the `pull-build-cache` script. When the remote cache entry was removed between the dry run and the real run, it will run the command and caches whatever is in the native folder.\r\n\r\nSeems like there are some very old leftover files there which lead to an broken publish.\r\n\r\nThis changes the command to fail when there are no files and empties the folder before running the script. This should lead to pull-build-cache to failing instead.\r\n\r\nCloses PACK-2957\r\nFixes #64468","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64493/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64491","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64491/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64491/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64491/events","html_url":"https://github.com/vercel/next.js/issues/64491","id":2243021423,"node_id":"I_kwDOBC3Cis6Fscpv","number":64491,"title":"Antd theme is not working with Nextjs 14.1.4 and nextjs module federation 8.1.0","user":{"login":"prakashmallow","id":59562721,"node_id":"MDQ6VXNlcjU5NTYyNzIx","avatar_url":"https://avatars.githubusercontent.com/u/59562721?v=4","gravatar_id":"","url":"https://api.github.com/users/prakashmallow","html_url":"https://github.com/prakashmallow","followers_url":"https://api.github.com/users/prakashmallow/followers","following_url":"https://api.github.com/users/prakashmallow/following{/other_user}","gists_url":"https://api.github.com/users/prakashmallow/gists{/gist_id}","starred_url":"https://api.github.com/users/prakashmallow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prakashmallow/subscriptions","organizations_url":"https://api.github.com/users/prakashmallow/orgs","repos_url":"https://api.github.com/users/prakashmallow/repos","events_url":"https://api.github.com/users/prakashmallow/events{/privacy}","received_events_url":"https://api.github.com/users/prakashmallow/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3529098642,"node_id":"LA_kwDOBC3Cis7SWcWS","url":"https://api.github.com/repos/vercel/next.js/labels/Script%20(next/script)","name":"Script (next/script)","color":"1CE4CA","default":false,"description":"Related to Next.js Script Optimization."},{"id":3555302485,"node_id":"LA_kwDOBC3Cis7T6ZxV","url":"https://api.github.com/repos/vercel/next.js/labels/Lazy%20Loading","name":"Lazy Loading","color":"D93F0B","default":false,"description":"Related to Next.js Lazy Loading (e.g., `next/dynamic` or `React.lazy`)."},{"id":5907879217,"node_id":"LA_kwDOBC3Cis8AAAABYCMVMQ","url":"https://api.github.com/repos/vercel/next.js/labels/invalid%20link","name":"invalid link","color":"444444","default":false,"description":"The issue was auto-closed due to a missing/invalid reproduction link. A new issue should be opened."},{"id":6384337404,"node_id":"LA_kwDOBC3Cis8AAAABfIlB_A","url":"https://api.github.com/repos/vercel/next.js/labels/Module%20Resolution","name":"Module Resolution","color":"e99695","default":false,"description":"Module resolution (CJS / ESM, module resolving)"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-15T08:20:21Z","updated_at":"2024-04-15T08:20:42Z","closed_at":"2024-04-15T08:20:39Z","author_association":"NONE","active_lock_reason":null,"body":"### Link to the code that reproduces this issue\n\n[Demo link](https://antd-theme-root-app.vercel.app/) [Root app repository](https://github.com/prakashmallow/antd-theme-root-app) [Child app 1 respository](https://github.com/prakashmallow/antd-theme-child-app-1) [Child app 2 respository](https://github.com/prakashmallow/antd-theme-child-app-2)\n\n### To Reproduce\n\n1. Clone the above three Next.js app repositories locally.\r\n2. Install npm packages on all apps.\r\n3. First, run both child apps, ensuring they are running successfully before starting the root app.\r\n4. After running the root app open the URL of the root app in a web browser.\r\n5. You will notice that the primary colour of the buttons is applied from the theme configuration on the Home page (root app component). However, when navigating to the Services or About Us pages, the buttons display with the default primary colour of Antd instead of the configured theme's primary colour.\n\n### Current vs. Expected behavior\n\nWhat is expected?\r\nNext.js v14x and @module-federation/nextjs-mf v8.x. With this configuration, Antd theme changes should work correctly in both root and child Next.js apps.\r\n\r\nWhat is actually happening?\r\nWhen using Next.js v14.x along with @module-federation/nextjs-mf v8.x, I encountered an issue with the Ant Design (Antd) theme configuration. In this setup, the root Next.js app successfully provides the theme changes to child Next.js apps. However, while the root Next.js app consumes the theme changes, the child Next.js app only displays the default theme without incorporating the Antd theme changes.\r\n\r\nAs a workaround, I downgraded to Next.js version 13.4.7 and @module-federation/nextjs-mf v7.x. With this configuration, the Antd theme changes are functioning correctly on both the root and child Next.js apps\n\n### Provide environment information\n\n```bash\n| Environment | Info |\r\n| --- | --- |\r\n| antd | 5.15.4 |\r\n| nextjs | 14.1.4 |\r\n| React | 18 |\r\n| @module-federation/nextjs-mf | 8.1.0 |\r\n| System | Mac |\r\n| Browser | Chrome latest version |\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure, Dynamic imports (next/dynamic), Module resolution (CJS / ESM, module resolving), Operating System (Windows, MacOS, Linux), Script optimization (next/script)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next build (local), next start (local), Vercel (Deployed), Other (Deployed)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64491/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64489","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64489/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64489/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64489/events","html_url":"https://github.com/vercel/next.js/pull/64489","id":2242875890,"node_id":"PR_kwDOBC3Cis5sojBS","number":64489,"title":"Update Turbopack development test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-15T07:04:41Z","updated_at":"2024-05-02T12:04:28Z","closed_at":"2024-04-16T07:05:31Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64489","html_url":"https://github.com/vercel/next.js/pull/64489","diff_url":"https://github.com/vercel/next.js/pull/64489.diff","patch_url":"https://github.com/vercel/next.js/pull/64489.patch","merged_at":null},"body":"This auto-generated PR updates the development integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64489/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64488","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64488/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64488/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64488/events","html_url":"https://github.com/vercel/next.js/pull/64488","id":2242859389,"node_id":"PR_kwDOBC3Cis5sofc0","number":64488,"title":"disable production chunking in dev","user":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T06:55:34Z","updated_at":"2024-05-01T12:02:29Z","closed_at":"2024-04-15T19:22:22Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64488","html_url":"https://github.com/vercel/next.js/pull/64488","diff_url":"https://github.com/vercel/next.js/pull/64488.diff","patch_url":"https://github.com/vercel/next.js/pull/64488.patch","merged_at":"2024-04-15T19:22:22Z"},"body":"### What?\r\n\r\nThe production chunking plugin shouldn't be enabled in development\r\n\r\n### Why?\r\n\r\nIt doesn't handle HMR yet\r\n\r\n\r\nCloses PACK-2956\r\nFixes #64404","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64488/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64488/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64484","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64484/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64484/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64484/events","html_url":"https://github.com/vercel/next.js/pull/64484","id":2242768983,"node_id":"PR_kwDOBC3Cis5soL02","number":64484,"title":"Revert \"Fix client boundary inheritance for barrel optimization\"","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T05:54:29Z","updated_at":"2024-04-30T00:06:32Z","closed_at":"2024-04-15T06:01:10Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":true,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64484","html_url":"https://github.com/vercel/next.js/pull/64484","diff_url":"https://github.com/vercel/next.js/pull/64484.diff","patch_url":"https://github.com/vercel/next.js/pull/64484.patch","merged_at":null},"body":"Reverts vercel/next.js#64467\r\n\r\ntesting ci failures \n\nCloses NEXT-3106","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64484/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64481","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64481/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64481/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64481/events","html_url":"https://github.com/vercel/next.js/pull/64481","id":2242567955,"node_id":"PR_kwDOBC3Cis5sngX9","number":64481,"title":"Update font data","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3555423777,"node_id":"LA_kwDOBC3Cis7T63Yh","url":"https://api.github.com/repos/vercel/next.js/labels/Font%20(next/font)","name":"Font (next/font)","color":"0D3A54","default":false,"description":"Related to Next.js Font Optimization."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-15T02:28:04Z","updated_at":"2024-04-30T00:06:22Z","closed_at":"2024-04-15T15:10:22Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64481","html_url":"https://github.com/vercel/next.js/pull/64481","diff_url":"https://github.com/vercel/next.js/pull/64481.diff","patch_url":"https://github.com/vercel/next.js/pull/64481.patch","merged_at":"2024-04-15T15:10:22Z"},"body":"This auto-generated PR updates font data with latest available","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64481/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64480","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64480/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64480/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64480/events","html_url":"https://github.com/vercel/next.js/issues/64480","id":2242517586,"node_id":"I_kwDOBC3Cis6FqhpS","number":64480,"title":"Not applying Tailwind style when conditionally get information from server.","user":{"login":"luksrocha","id":44854940,"node_id":"MDQ6VXNlcjQ0ODU0OTQw","avatar_url":"https://avatars.githubusercontent.com/u/44854940?v=4","gravatar_id":"","url":"https://api.github.com/users/luksrocha","html_url":"https://github.com/luksrocha","followers_url":"https://api.github.com/users/luksrocha/followers","following_url":"https://api.github.com/users/luksrocha/following{/other_user}","gists_url":"https://api.github.com/users/luksrocha/gists{/gist_id}","starred_url":"https://api.github.com/users/luksrocha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luksrocha/subscriptions","organizations_url":"https://api.github.com/users/luksrocha/orgs","repos_url":"https://api.github.com/users/luksrocha/repos","events_url":"https://api.github.com/users/luksrocha/events{/privacy}","received_events_url":"https://api.github.com/users/luksrocha/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-15T01:42:47Z","updated_at":"2024-04-30T00:04:24Z","closed_at":"2024-04-15T10:29:05Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/luksrocha/pokeapi-next14\n\n### To Reproduce\n\nJust run the application, if you check the browser devtools you can see that background color is applied, but there is no results on the screen. \r\n\r\nBasically the background color is get from the server and based on that information it renders some differents colors.\n\n### Current vs. Expected behavior\n\nThe BG is white and it needs to be differents for each card.\n\n### Provide environment information\n\n```bash\nNode Version: 20.0.0\r\nNext Version: 14.2.2\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64480/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64479","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64479/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64479/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64479/events","html_url":"https://github.com/vercel/next.js/pull/64479","id":2242451899,"node_id":"PR_kwDOBC3Cis5snHG1","number":64479,"title":"chore: Update pnpm v8.15.14 to v8.15.7","user":{"login":"ryota-murakami","id":5501268,"node_id":"MDQ6VXNlcjU1MDEyNjg=","avatar_url":"https://avatars.githubusercontent.com/u/5501268?v=4","gravatar_id":"","url":"https://api.github.com/users/ryota-murakami","html_url":"https://github.com/ryota-murakami","followers_url":"https://api.github.com/users/ryota-murakami/followers","following_url":"https://api.github.com/users/ryota-murakami/following{/other_user}","gists_url":"https://api.github.com/users/ryota-murakami/gists{/gist_id}","starred_url":"https://api.github.com/users/ryota-murakami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryota-murakami/subscriptions","organizations_url":"https://api.github.com/users/ryota-murakami/orgs","repos_url":"https://api.github.com/users/ryota-murakami/repos","events_url":"https://api.github.com/users/ryota-murakami/events{/privacy}","received_events_url":"https://api.github.com/users/ryota-murakami/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-15T00:23:38Z","updated_at":"2024-05-05T12:01:42Z","closed_at":"2024-04-15T14:54:28Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64479","html_url":"https://github.com/vercel/next.js/pull/64479","diff_url":"https://github.com/vercel/next.js/pull/64479.diff","patch_url":"https://github.com/vercel/next.js/pull/64479.patch","merged_at":"2024-04-15T14:54:28Z"},"body":"\r\nHere are the release notes for pnpm versions v8.15.2 through v8.15.7,\r\n\r\n- [v8.15.2 Release Notes](https://github.com/pnpm/pnpm/releases/tag/v8.15.2)\r\n- [v8.15.3 Release Notes](https://github.com/pnpm/pnpm/releases/tag/v8.15.3)\r\n- [v8.15.4 Release Notes](https://github.com/pnpm/pnpm/releases/tag/v8.15.4)\r\n- [v8.15.5 Release Notes](https://github.com/pnpm/pnpm/releases/tag/v8.15.5)\r\n- [v8.15.6 Release Notes](https://github.com/pnpm/pnpm/releases/tag/v8.15.6)\r\n- [v8.15.7 Release Notes](https://github.com/pnpm/pnpm/releases/tag/v8.15.7)\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64479/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64478","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64478/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64478/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64478/events","html_url":"https://github.com/vercel/next.js/pull/64478","id":2242395287,"node_id":"PR_kwDOBC3Cis5sm7dt","number":64478,"title":"Add typechecking test for all entrypoints","user":{"login":"eps1lon","id":12292047,"node_id":"MDQ6VXNlcjEyMjkyMDQ3","avatar_url":"https://avatars.githubusercontent.com/u/12292047?v=4","gravatar_id":"","url":"https://api.github.com/users/eps1lon","html_url":"https://github.com/eps1lon","followers_url":"https://api.github.com/users/eps1lon/followers","following_url":"https://api.github.com/users/eps1lon/following{/other_user}","gists_url":"https://api.github.com/users/eps1lon/gists{/gist_id}","starred_url":"https://api.github.com/users/eps1lon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eps1lon/subscriptions","organizations_url":"https://api.github.com/users/eps1lon/orgs","repos_url":"https://api.github.com/users/eps1lon/repos","events_url":"https://api.github.com/users/eps1lon/events{/privacy}","received_events_url":"https://api.github.com/users/eps1lon/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-14T22:15:43Z","updated_at":"2024-04-30T00:06:16Z","closed_at":"2024-04-15T15:52:44Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64478","html_url":"https://github.com/vercel/next.js/pull/64478","diff_url":"https://github.com/vercel/next.js/pull/64478.diff","patch_url":"https://github.com/vercel/next.js/pull/64478.patch","merged_at":"2024-04-15T15:52:44Z"},"body":"Couldn't find existing tests for checking that all entrypoints have working types. 3 entrypoints currently don't typecheck with `skipLibCheck`:\r\n\r\n- `next/jest`: Just need to declare an explicit peer dependency on `@jest/types` and install that to validate\r\n- `next/babel`: References `next/dist/compiled/babel/core` which re-exports via `misc.d.ts` from `babel/core`. Since misc.d.ts is not published, installing `@babel/core` wouldn't be sufficient. Need to check how to fix.\r\n- `next/web-vitals`: Unclear how to fix. Tracking in https://github.com/vercel/next.js/issues/59903\r\n\r\nThe main point here was to write a regression test before we land https://github.com/vercel/next.js/pull/64043 which needs more `@internal` annotations.\r\n\r\nCloses NEXT-3105","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64478/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64476","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64476/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64476/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64476/events","html_url":"https://github.com/vercel/next.js/pull/64476","id":2242362085,"node_id":"PR_kwDOBC3Cis5sm0rg","number":64476,"title":"Ensure declaration reference published paths","user":{"login":"eps1lon","id":12292047,"node_id":"MDQ6VXNlcjEyMjkyMDQ3","avatar_url":"https://avatars.githubusercontent.com/u/12292047?v=4","gravatar_id":"","url":"https://api.github.com/users/eps1lon","html_url":"https://github.com/eps1lon","followers_url":"https://api.github.com/users/eps1lon/followers","following_url":"https://api.github.com/users/eps1lon/following{/other_user}","gists_url":"https://api.github.com/users/eps1lon/gists{/gist_id}","starred_url":"https://api.github.com/users/eps1lon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eps1lon/subscriptions","organizations_url":"https://api.github.com/users/eps1lon/orgs","repos_url":"https://api.github.com/users/eps1lon/repos","events_url":"https://api.github.com/users/eps1lon/events{/privacy}","received_events_url":"https://api.github.com/users/eps1lon/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-14T20:53:24Z","updated_at":"2024-04-29T00:03:57Z","closed_at":"2024-04-14T21:20:50Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":true,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64476","html_url":"https://github.com/vercel/next.js/pull/64476","diff_url":"https://github.com/vercel/next.js/pull/64476.diff","patch_url":"https://github.com/vercel/next.js/pull/64476.patch","merged_at":null},"body":"We currently emit declaration for files that reference unknown modules e.g. `export { default as GlobalError } from 'VAR_MODULE_GLOBAL_ERROR';` in `next/dist/build/templates/app-page.d.ts`. \r\n\r\nSince the referenced modules are declarated in `compiled.d.ts` which we do publish, I see no reason to not also let `next/dist/build/templates/app-page.d.ts` reference the appropriate ambient declaration file (`compiled.d.ts`). \r\n\r\nThe alternative is marking the whole module as `@internal` but checking if every export truly never flows into a public module takes way more time.\r\n\r\nThis also unblocks the TypeScript 5.4 upgrade in https://github.com/vercel/next.js/pull/64043. TS 5.4 would emit a declaration referencing the appropriate ambient declaration but since `compiled.d.ts` is not part of the program but `misc.d.ts` is, the declaration would reference `misc.d.ts`(`/// <reference path=\"../../../types/misc.d.ts\"`) which is not published and would cause TypeScript compilation to fail.\r\n\r\n\n\nCloses NEXT-3104","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64476/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64474","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64474/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64474/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64474/events","html_url":"https://github.com/vercel/next.js/pull/64474","id":2242309882,"node_id":"PR_kwDOBC3Cis5smqSP","number":64474,"title":"Update README.md","user":{"login":"Sm0k367","id":139561920,"node_id":"U_kgDOCFGLwA","avatar_url":"https://avatars.githubusercontent.com/u/139561920?v=4","gravatar_id":"","url":"https://api.github.com/users/Sm0k367","html_url":"https://github.com/Sm0k367","followers_url":"https://api.github.com/users/Sm0k367/followers","following_url":"https://api.github.com/users/Sm0k367/following{/other_user}","gists_url":"https://api.github.com/users/Sm0k367/gists{/gist_id}","starred_url":"https://api.github.com/users/Sm0k367/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sm0k367/subscriptions","organizations_url":"https://api.github.com/users/Sm0k367/orgs","repos_url":"https://api.github.com/users/Sm0k367/repos","events_url":"https://api.github.com/users/Sm0k367/events{/privacy}","received_events_url":"https://api.github.com/users/Sm0k367/received_events","type":"User","site_admin":false},"labels":[{"id":2108224491,"node_id":"MDU6TGFiZWwyMTA4MjI0NDkx","url":"https://api.github.com/repos/vercel/next.js/labels/create-next-app","name":"create-next-app","color":"9effbb","default":false,"description":"Related to our CLI tool for quickly starting a new Next.js application."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-14T18:50:20Z","updated_at":"2024-04-15T13:34:54Z","closed_at":"2024-04-15T13:34:44Z","author_association":"NONE","active_lock_reason":"spam","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64474","html_url":"https://github.com/vercel/next.js/pull/64474","diff_url":"https://github.com/vercel/next.js/pull/64474.diff","patch_url":"https://github.com/vercel/next.js/pull/64474.patch","merged_at":null},"body":"<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64474/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64472","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64472/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64472/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64472/events","html_url":"https://github.com/vercel/next.js/issues/64472","id":2242268789,"node_id":"I_kwDOBC3Cis6Fpk51","number":64472,"title":"Turbopack issue with including dependency via 'link:'","user":{"login":"dinkelspiel","id":60363370,"node_id":"MDQ6VXNlcjYwMzYzMzcw","avatar_url":"https://avatars.githubusercontent.com/u/60363370?v=4","gravatar_id":"","url":"https://api.github.com/users/dinkelspiel","html_url":"https://github.com/dinkelspiel","followers_url":"https://api.github.com/users/dinkelspiel/followers","following_url":"https://api.github.com/users/dinkelspiel/following{/other_user}","gists_url":"https://api.github.com/users/dinkelspiel/gists{/gist_id}","starred_url":"https://api.github.com/users/dinkelspiel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dinkelspiel/subscriptions","organizations_url":"https://api.github.com/users/dinkelspiel/orgs","repos_url":"https://api.github.com/users/dinkelspiel/repos","events_url":"https://api.github.com/users/dinkelspiel/events{/privacy}","received_events_url":"https://api.github.com/users/dinkelspiel/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-14T17:17:42Z","updated_at":"2024-05-10T00:04:40Z","closed_at":"2024-04-25T15:03:54Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/dinkelspiel/turbopack-issue-dependency-link\n\n### To Reproduce\n\n1. Clone the repository\r\n2. Enter the `./app` directory\r\n3. Run `pnpm install`\r\n4. Run `pnpm dev`\n\n### Current vs. Expected behavior\n\nThe current behavior is that the local library included in the package.json via `\"library\": \"link:../library\"`, if running with the `--turbo` flag. Can't resolve the local repository and gives a `Module not found: Can't resolve 'library/hw'` but if the project isn't running with the `--turbo` flag the library is found and the project works.\r\n\r\nThe expected behavior is that the `--turbo` flag and the regular dev works the same and that the `--turbo` flag finds the local dependency.\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: linux\r\n  Arch: x64\r\n  Version: #1 SMP PREEMPT_DYNAMIC Thu, 28 Mar 2024 17:06:35 +0000\r\n  Available memory (MB): 15302\r\n  Available CPU cores: 16\r\nBinaries:\r\n  Node: 20.12.1\r\n  npm: 10.5.0\r\n  Yarn: N/A\r\n  pnpm: 8.15.6\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: N/A\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64472/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":3},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64472/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64469","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64469/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64469/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64469/events","html_url":"https://github.com/vercel/next.js/pull/64469","id":2242234883,"node_id":"PR_kwDOBC3Cis5smbUr","number":64469,"title":"docs: fix config variable usage in memory docs","user":{"login":"leerob","id":9113740,"node_id":"MDQ6VXNlcjkxMTM3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/9113740?v=4","gravatar_id":"","url":"https://api.github.com/users/leerob","html_url":"https://github.com/leerob","followers_url":"https://api.github.com/users/leerob/followers","following_url":"https://api.github.com/users/leerob/following{/other_user}","gists_url":"https://api.github.com/users/leerob/gists{/gist_id}","starred_url":"https://api.github.com/users/leerob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerob/subscriptions","organizations_url":"https://api.github.com/users/leerob/orgs","repos_url":"https://api.github.com/users/leerob/repos","events_url":"https://api.github.com/users/leerob/events{/privacy}","received_events_url":"https://api.github.com/users/leerob/received_events","type":"User","site_admin":false},"labels":[{"id":5599678234,"node_id":"LA_kwDOBC3Cis8AAAABTcRPGg","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20DevEx%20team","name":"created-by: Next.js DevEx team","color":"000000","default":false,"description":""},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-14T16:00:20Z","updated_at":"2024-04-29T00:04:15Z","closed_at":"2024-04-14T16:00:36Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64469","html_url":"https://github.com/vercel/next.js/pull/64469","diff_url":"https://github.com/vercel/next.js/pull/64469.diff","patch_url":"https://github.com/vercel/next.js/pull/64469.patch","merged_at":"2024-04-14T16:00:36Z"},"body":"Closes https://github.com/vercel/feedback/issues/61864","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64469/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64468","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64468/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64468/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64468/events","html_url":"https://github.com/vercel/next.js/issues/64468","id":2242231759,"node_id":"I_kwDOBC3Cis6Fpb3P","number":64468,"title":"`next dev` and `next build` crashing in `next@>=14.2.1-canary.4` on Linux","user":{"login":"steve-marmalade","id":85196623,"node_id":"MDQ6VXNlcjg1MTk2NjIz","avatar_url":"https://avatars.githubusercontent.com/u/85196623?v=4","gravatar_id":"","url":"https://api.github.com/users/steve-marmalade","html_url":"https://github.com/steve-marmalade","followers_url":"https://api.github.com/users/steve-marmalade/followers","following_url":"https://api.github.com/users/steve-marmalade/following{/other_user}","gists_url":"https://api.github.com/users/steve-marmalade/gists{/gist_id}","starred_url":"https://api.github.com/users/steve-marmalade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steve-marmalade/subscriptions","organizations_url":"https://api.github.com/users/steve-marmalade/orgs","repos_url":"https://api.github.com/users/steve-marmalade/repos","events_url":"https://api.github.com/users/steve-marmalade/events{/privacy}","received_events_url":"https://api.github.com/users/steve-marmalade/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2024-04-14T15:53:12Z","updated_at":"2024-05-01T12:02:03Z","closed_at":"2024-04-15T10:42:29Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\r\n\r\nhttps://github.com/marmalade-labs/canary-crash\r\n\r\n### To Reproduce\r\n\r\nRun any of the following (possibly only affects Linux):\r\n\r\n- `pnpm dev`\r\n- `pnpm run build`\r\n- Deploy to Vercel\r\n\r\n### Current vs. Expected behavior\r\n\r\n## pnpm dev\r\n```\r\n  canary-crash git:(main) pnpm dev\r\n\r\n> canary-crash@0.1.0 dev /home/stevie/code/canary-crash\r\n> next dev\r\n\r\n   Next.js 14.2.1-canary.4\r\n  - Local:        http://localhost:3000\r\n\r\n  Starting...\r\n  canary-crash git:(main) \r\n  canary-crash git:(main) echo $?\r\n0\r\n  canary-crash git:(main) \r\n```\r\n\r\n## pnpm build\r\n```\r\n  canary-crash git:(main) pnpm run build -d\r\n\r\n> canary-crash@0.1.0 build /home/steve/code/canary-crash\r\n> next build \"-d\"\r\n\r\n   Next.js 14.2.1-canary.4\r\n\r\n   Creating an optimized production build ...\r\n  canary-crash git:(main) \r\n  canary-crash git:(main) echo $?\r\n0\r\n```\r\n\r\n## Deploy to Vercel (with Node v 18)\r\n\r\n```\r\n   Next.js 14.2.1-canary.4\r\n   Creating an optimized production build ...\r\n  Attempted to load @next/swc-linux-x64-gnu, but an error occurred: /vercel/path0/node_modules/.pnpm/@next+swc-linux-x64-gnu@14.2.1-canary.4/node_modules/@next/swc-linux-x64-gnu/next-swc.linux-x64-gnu.node: ELF load command past end of file\r\n  Attempted to load @next/swc-linux-x64-musl, but an error occurred: libc.musl-x86_64.so.1: cannot open shared object file: No such file or directory\r\n  Failed to load SWC binary for linux/x64, see more info here: https://nextjs.org/docs/messages/failed-loading-swc\r\n> Build error occurred\r\nError: Jest worker encountered 1 child process exceptions, exceeding retry limit\r\n    at ChildProcessWorker.initialize (/vercel/path0/node_modules/.pnpm/next@14.2.1-canary.4_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/jest-worker/index.js:1:11580)\r\n    at ChildProcessWorker._onExit (/vercel/path0/node_modules/.pnpm/next@14.2.1-canary.4_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/jest-worker/index.js:1:12545)\r\n    at ChildProcess.emit (node:events:529:35)\r\n    at ChildProcess._handle.onexit (node:internal/child_process:292:12) {\r\n  type: 'WorkerError'\r\n}\r\nELIFECYCLE Command failed with exit code 1.\r\nError: Command \"pnpm run build\" exited with 1\r\n```\r\n\r\n### Provide environment information\r\n\r\n```bash\r\nOperating System:\r\n  Platform: linux\r\n  Arch: x64\r\n  Version: #1 SMP PREEMPT_DYNAMIC Thu, 11 Apr 2024 01:47:33 +0000\r\n  Available memory (MB): 31886\r\n  Available CPU cores: 8\r\nBinaries:\r\n  Node: 18.18.2\r\n  npm: 10.5.2\r\n  Yarn: 1.22.22\r\n  pnpm: 8.15.5\r\nRelevant Packages:\r\n  next: 14.2.1-canary.4 // Latest available version is detected (14.2.1-canary.4).\r\n  eslint-config-next: 14.2.1-canary.4\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\r\n```\r\n\r\n\r\n### Which area(s) are affected? (Select all that apply)\r\n\r\nNot sure, App Router, Operating System (Windows, MacOS, Linux)\r\n\r\n### Which stage(s) are affected? (Select all that apply)\r\n\r\nnext dev (local), next build (local), Vercel (Deployed)\r\n\r\n### Additional context\r\n\r\nThis may be a Linux-only issue, since @ztanner was not able to reproduce, per https://github.com/vercel/next.js/issues/64432#issuecomment-2054075569\r\n\r\nOne possible clue is that https://www.npmjs.com/package/@next/swc-linux-x64-gnu/v/14.2.1-canary.4 has an unpacked size of 88.2 MB whereas https://www.npmjs.com/package/@next/swc-linux-x64-gnu/v/14.2.1-canary.3 has an unpacked size of 131 MB. So maybe there was an issue generating this linux build artifact in the latest canary?","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64468/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":3},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64468/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64467","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64467/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64467/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64467/events","html_url":"https://github.com/vercel/next.js/pull/64467","id":2242224105,"node_id":"PR_kwDOBC3Cis5smZLM","number":64467,"title":"Fix client boundary inheritance for barrel optimization","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2024-04-14T15:34:16Z","updated_at":"2024-04-24T21:17:37Z","closed_at":"2024-04-14T21:36:21Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64467","html_url":"https://github.com/vercel/next.js/pull/64467","diff_url":"https://github.com/vercel/next.js/pull/64467.diff","patch_url":"https://github.com/vercel/next.js/pull/64467.patch","merged_at":"2024-04-14T21:36:20Z"},"body":"### What\r\n\r\nInherit the client boudaries from the found matched target in load barrel\r\n\r\n### Why\r\nThe root cause with the barrel transform, we missed the client boundary directive during the transform.\r\nSince the new version of mui's case looks like this:\r\n\r\nImport path\r\npage.js (server module) -> `<module>/index.js` (shared module) -> `<module/subpath>/index.js` (client module) -> `<module/subpath/sub-module.js> (client module)\r\n\r\nAfter our transform, we lost the `\"use client\"` which causes the mismatch of the transform:\r\n\r\nIn `rsc` layer: the file pointing to the sub module entry (`<module/subpath>/index.js`), but without the client boundary.\r\n\r\n\r\nFixes #64369 \r\nCloses NEXT-3101","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64467/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64467/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64465","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64465/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64465/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64465/events","html_url":"https://github.com/vercel/next.js/issues/64465","id":2242130938,"node_id":"I_kwDOBC3Cis6FpDP6","number":64465,"title":"rt.toLowerCase is not a function on fresh next js init","user":{"login":"AkipTsaqif","id":40765825,"node_id":"MDQ6VXNlcjQwNzY1ODI1","avatar_url":"https://avatars.githubusercontent.com/u/40765825?v=4","gravatar_id":"","url":"https://api.github.com/users/AkipTsaqif","html_url":"https://github.com/AkipTsaqif","followers_url":"https://api.github.com/users/AkipTsaqif/followers","following_url":"https://api.github.com/users/AkipTsaqif/following{/other_user}","gists_url":"https://api.github.com/users/AkipTsaqif/gists{/gist_id}","starred_url":"https://api.github.com/users/AkipTsaqif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AkipTsaqif/subscriptions","organizations_url":"https://api.github.com/users/AkipTsaqif/orgs","repos_url":"https://api.github.com/users/AkipTsaqif/repos","events_url":"https://api.github.com/users/AkipTsaqif/events{/privacy}","received_events_url":"https://api.github.com/users/AkipTsaqif/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":27,"created_at":"2024-04-14T12:31:16Z","updated_at":"2024-05-01T12:01:54Z","closed_at":"2024-04-16T10:55:07Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/AkipTsaqif/next-js-init-error\n\n### To Reproduce\n\n1. do `npx create-next-app@latest` and follow the steps as usual\r\n2. do `npm run dev`\r\n3. next js runs but produces error on the terminal, saying `rt.toLowerCase is not a function at \\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:30:274042`\n\n### Current vs. Expected behavior\n\nnext js should not produces those error\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: win32\r\n  Arch: x64\r\n  Version: Windows 11 Pro\r\n  Available memory (MB): 32704\r\n  Available CPU cores: 6\r\nBinaries:\r\n  Node: 20.11.1\r\n  npm: N/A\r\n  Yarn: N/A\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: 14.2.1\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\nbased on [this SO question](https://stackoverflow.com/questions/78321779/typeerror-rt-tolowercase-is-not-a-function-nextjs), that just been asked recently, this happens on next js 14.2\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64465/reactions","total_count":14,"+1":14,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64465/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64464","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64464/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64464/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64464/events","html_url":"https://github.com/vercel/next.js/issues/64464","id":2242098658,"node_id":"I_kwDOBC3Cis6Fo7Xi","number":64464,"title":"turbopack : module not found: can't resolve crypto --> jsonwebtoken package uses crypto module","user":{"login":"ehsanrezaeee","id":108100493,"node_id":"U_kgDOBnF7jQ","avatar_url":"https://avatars.githubusercontent.com/u/108100493?v=4","gravatar_id":"","url":"https://api.github.com/users/ehsanrezaeee","html_url":"https://github.com/ehsanrezaeee","followers_url":"https://api.github.com/users/ehsanrezaeee/followers","following_url":"https://api.github.com/users/ehsanrezaeee/following{/other_user}","gists_url":"https://api.github.com/users/ehsanrezaeee/gists{/gist_id}","starred_url":"https://api.github.com/users/ehsanrezaeee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehsanrezaeee/subscriptions","organizations_url":"https://api.github.com/users/ehsanrezaeee/orgs","repos_url":"https://api.github.com/users/ehsanrezaeee/repos","events_url":"https://api.github.com/users/ehsanrezaeee/events{/privacy}","received_events_url":"https://api.github.com/users/ehsanrezaeee/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":4279919987,"node_id":"LA_kwDOBC3Cis7_GmVz","url":"https://api.github.com/repos/vercel/next.js/labels/Runtime","name":"Runtime","color":"f81ce5","default":false,"description":"Related to Node.js or Edge Runtime with Next.js."},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":4862060773,"node_id":"LA_kwDOBC3Cis8AAAABIc0o5Q","url":"https://api.github.com/repos/vercel/next.js/labels/Pages%20Router","name":"Pages Router","color":"D63F85","default":false,"description":"Related to Pages Router."},{"id":5484123250,"node_id":"LA_kwDOBC3Cis8AAAABRuEUcg","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20turbopack","name":"linear: turbopack","color":"290F77","default":false,"description":"Confirmed issue that is tracked by the Turbopack team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2024-04-14T10:58:25Z","updated_at":"2024-05-15T00:04:23Z","closed_at":"2024-04-30T09:26:53Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/ehsanrezaeee/test-jwt\n\n### To Reproduce\n\n1. Change the package.json to use \"next dev --turbo\"\r\n2. in you app install jsonwebtoken package with npm i jsonwebtoken\r\n3. run the app with npm run dev and the error shows up\n\n### Current vs. Expected behavior\n\ni expected to redirected to a page in my app with middleware logic. however i encounter the following error:\r\n\r\n```Build Error\r\nFailed to compile\r\n\r\nNext.js (14.2.1) (turbo)\r\n./node_modules/jsonwebtoken/verify.js:9:55\r\nModule not found: Can't resolve 'crypto'\r\n   7 | const PS_SUPPORTED = require('./lib/psSupported');\r\n   8 | const jws = require('jws');\r\n>  9 | const {KeyObject, createSecretKey, createPublicKey} = require(\"crypto\");```\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: x64\r\n  Version: Darwin Kernel Version 23.4.0: Fri Mar 15 00:11:05 PDT 2024; root:xnu-10063.101.17~1/RELEASE_X86_64\r\n  Available memory (MB): 16384\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 21.6.1\r\n  npm: 10.5.1\r\n  Yarn: 1.22.21\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: 14.0.4\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.4\r\nNext.js Config:\r\n  output: standalone\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router, Data fetching (gS(S)P, getInitialProps), Middleware / Edge (API routes, runtime)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next build (local), next start (local), Other (Deployed)\n\n### Additional context\n\ni tested my app with nextjs v14.2.1 latest version\n\n<sub>[PACK-2954](https://linear.app/vercel/issue/PACK-2954/turbopack-module-not-found-cant-resolve-crypto-jsonwebtoken-package)</sub>","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64464/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64462","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64462/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64462/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64462/events","html_url":"https://github.com/vercel/next.js/issues/64462","id":2242078287,"node_id":"I_kwDOBC3Cis6Fo2ZP","number":64462,"title":"Page with fetch() call and cache: \"no-store\" does not switch to Dynamic Rendering","user":{"login":"josecoelho96","id":10677386,"node_id":"MDQ6VXNlcjEwNjc3Mzg2","avatar_url":"https://avatars.githubusercontent.com/u/10677386?v=4","gravatar_id":"","url":"https://api.github.com/users/josecoelho96","html_url":"https://github.com/josecoelho96","followers_url":"https://api.github.com/users/josecoelho96/followers","following_url":"https://api.github.com/users/josecoelho96/following{/other_user}","gists_url":"https://api.github.com/users/josecoelho96/gists{/gist_id}","starred_url":"https://api.github.com/users/josecoelho96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josecoelho96/subscriptions","organizations_url":"https://api.github.com/users/josecoelho96/orgs","repos_url":"https://api.github.com/users/josecoelho96/repos","events_url":"https://api.github.com/users/josecoelho96/events{/privacy}","received_events_url":"https://api.github.com/users/josecoelho96/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-14T10:04:00Z","updated_at":"2024-04-30T00:04:09Z","closed_at":"2024-04-15T17:09:58Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://codesandbox.io/p/sandbox/dynamic-rendering-with-fetch-k72l9n\n\n### To Reproduce\n\n1. Build the application - `rpm run build`\r\n2. Observe output. Errors will appear on terminal. Focus on `TypeError: fetch failed`\n\n### Current vs. Expected behavior\n\nFrom what I understood from the documentation, if a request is made to some API and the option `cache` is set to `\"no-store\"`, nextjs would switch to Dynamic Rendering. From the build output it appears that it isn't doing so. I was expecting no calls during build time.\r\n\r\n\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: linux\r\n  Arch: x64\r\n  Version: #1 SMP PREEMPT_DYNAMIC Sun Aug  6 20:05:33 UTC 2023\r\n  Available memory (MB): 4102\r\n  Available CPU cores: 2\r\nBinaries:\r\n  Node: 20.9.0\r\n  npm: 9.8.1\r\n  Yarn: 1.22.19\r\n  pnpm: 8.10.2\r\nRelevant Packages:\r\n  next: 14.2.0-canary.9 // There is a newer canary version (14.2.1-canary.4) available, please upgrade! \r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.1.3\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure, App Router\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext build (local)\n\n### Additional context\n\nI'm fairly new to nextjs so I might be misunderstanding some stuff. I stopped trying on my real project, did a new example and had the same problem.\r\n\r\nI also tried to upgrade to the latest canary but got a bunch of errors, so I decided to submit this with the canary I got from the starting template.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64462/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64461","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64461/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64461/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64461/events","html_url":"https://github.com/vercel/next.js/pull/64461","id":2242072583,"node_id":"PR_kwDOBC3Cis5sl6-V","number":64461,"title":"perf: improve Pages Router server rendering performance","user":{"login":"feedthejim","id":11064311,"node_id":"MDQ6VXNlcjExMDY0MzEx","avatar_url":"https://avatars.githubusercontent.com/u/11064311?v=4","gravatar_id":"","url":"https://api.github.com/users/feedthejim","html_url":"https://github.com/feedthejim","followers_url":"https://api.github.com/users/feedthejim/followers","following_url":"https://api.github.com/users/feedthejim/following{/other_user}","gists_url":"https://api.github.com/users/feedthejim/gists{/gist_id}","starred_url":"https://api.github.com/users/feedthejim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feedthejim/subscriptions","organizations_url":"https://api.github.com/users/feedthejim/orgs","repos_url":"https://api.github.com/users/feedthejim/repos","events_url":"https://api.github.com/users/feedthejim/events{/privacy}","received_events_url":"https://api.github.com/users/feedthejim/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-14T09:48:51Z","updated_at":"2024-05-01T12:02:56Z","closed_at":"2024-04-16T12:25:45Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64461","html_url":"https://github.com/vercel/next.js/pull/64461","diff_url":"https://github.com/vercel/next.js/pull/64461.diff","patch_url":"https://github.com/vercel/next.js/pull/64461.patch","merged_at":"2024-04-16T12:25:45Z"},"body":"### What\r\n\r\nThis PR's goal is to improve the throughput performance of the Next.js server when handling Pages Router routes.\r\n\r\nNote that the results from this are very synthetic and do not represent the real-life performance of an application. If we only wanted to handle hello worlds, we could probably make this even faster but on production, a slow fetch call to your DB is probably what's slowing you down.\r\n\r\nI'll look into App Router next.\r\n\r\n### Why?\r\n\r\nI guess I got nerd-sniped into it  \r\n\r\n### How?\r\n\r\nA few optimizations:\r\n- I looked deeply at the pipeline for rendering a Pages Router page. I noticed a lot of intermediary streams being created here and there to eventually be concatenated to a simple string. I think this is probably left over code from when we wanted to support streaming there and so there's some code that was shared with the App Router, which we absolutely don't need I think. I refactored it to be slightly simpler with just a few string concats here and there.\r\n- misc: I removed some redundant Promises being created here and there and added a small inline optimisation to eliminate `if (renderOpts.dev)` code in production.\r\n\r\n### Nummies\r\n\r\nTest setup: hello world pages router app, next start + autocannon\r\n\r\n- requests handled in 10s: 18k  -> 33K, **~80% improvement**\r\n- avg latency: 4.89ms -> 2.8ms, **~42% improvement**\r\n- avg req/res: 1846.5 -> 2983.5, **~61% improvement**\r\n\r\nBefore\r\n\r\n<img width=\"742\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/11064311/658e7ade-eba7-4604-a7c9-619bd51a5ec8\">\r\n\r\nvs\r\n\r\nafter\r\n\r\n<img width=\"880\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/11064311/2f46cf69-b788-4db2-bf90-6f65dc7abd82\">\r\n\r\nAlso ran on the other benchmark by @eknkc. Still can do better!\r\n\r\nBefore:\r\n<img width=\"915\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/11064311/131f9c65-9bb5-4c64-84cb-c9f2a141769e\">\r\nAfter:\r\n<img width=\"926\" alt=\"image\" src=\"https://github.com/vercel/next.js/assets/11064311/75b12875-1134-485f-ba98-7b5db520f8ac\">\r\n\r\n\r\n<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n\r\n\r\nCloses NEXT-3103","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64461/reactions","total_count":33,"+1":1,"-1":0,"laugh":0,"hooray":7,"confused":0,"heart":15,"rocket":8,"eyes":2},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64461/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64460","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64460/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64460/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64460/events","html_url":"https://github.com/vercel/next.js/pull/64460","id":2242025614,"node_id":"PR_kwDOBC3Cis5slxz3","number":64460,"title":"Update Turbopack development test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-14T07:45:44Z","updated_at":"2024-05-02T12:04:22Z","closed_at":"2024-04-15T07:04:42Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64460","html_url":"https://github.com/vercel/next.js/pull/64460","diff_url":"https://github.com/vercel/next.js/pull/64460.diff","patch_url":"https://github.com/vercel/next.js/pull/64460.patch","merged_at":null},"body":"This auto-generated PR updates the development integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64460/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64457","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64457/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64457/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64457/events","html_url":"https://github.com/vercel/next.js/pull/64457","id":2241850200,"node_id":"PR_kwDOBC3Cis5slMwn","number":64457,"title":"docs(09-authentication): fixes link to NextAuth.js","user":{"login":"kenji-webdev","id":98567681,"node_id":"U_kgDOBeAGAQ","avatar_url":"https://avatars.githubusercontent.com/u/98567681?v=4","gravatar_id":"","url":"https://api.github.com/users/kenji-webdev","html_url":"https://github.com/kenji-webdev","followers_url":"https://api.github.com/users/kenji-webdev/followers","following_url":"https://api.github.com/users/kenji-webdev/following{/other_user}","gists_url":"https://api.github.com/users/kenji-webdev/gists{/gist_id}","starred_url":"https://api.github.com/users/kenji-webdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kenji-webdev/subscriptions","organizations_url":"https://api.github.com/users/kenji-webdev/orgs","repos_url":"https://api.github.com/users/kenji-webdev/repos","events_url":"https://api.github.com/users/kenji-webdev/events{/privacy}","received_events_url":"https://api.github.com/users/kenji-webdev/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-14T01:20:41Z","updated_at":"2024-04-30T00:06:00Z","closed_at":"2024-04-15T19:49:53Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64457","html_url":"https://github.com/vercel/next.js/pull/64457","diff_url":"https://github.com/vercel/next.js/pull/64457.diff","patch_url":"https://github.com/vercel/next.js/pull/64457.patch","merged_at":"2024-04-15T19:49:53Z"},"body":"There's a TODO above the links, I didn't understand if it was related to this PR as the domain was already authjs.dev\r\n\r\n### What?\r\n\r\n- Fixes the link to NextAuth in the `Examples` section\r\n\r\n### How?\r\n\r\n- Changes https://authjs.dev/guides/upgrade-to-v5 to https://authjs.dev/getting-started/migrating-to-v5","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64457/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64456","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64456/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64456/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64456/events","html_url":"https://github.com/vercel/next.js/pull/64456","id":2241831469,"node_id":"PR_kwDOBC3Cis5slJQH","number":64456,"title":"Update font data","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3555423777,"node_id":"LA_kwDOBC3Cis7T63Yh","url":"https://api.github.com/repos/vercel/next.js/labels/Font%20(next/font)","name":"Font (next/font)","color":"0D3A54","default":false,"description":"Related to Next.js Font Optimization."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-14T00:14:20Z","updated_at":"2024-05-02T12:04:24Z","closed_at":"2024-04-15T02:28:05Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64456","html_url":"https://github.com/vercel/next.js/pull/64456","diff_url":"https://github.com/vercel/next.js/pull/64456.diff","patch_url":"https://github.com/vercel/next.js/pull/64456.patch","merged_at":null},"body":"This auto-generated PR updates font data with latest available","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64456/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64454","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64454/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64454/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64454/events","html_url":"https://github.com/vercel/next.js/pull/64454","id":2241805049,"node_id":"PR_kwDOBC3Cis5slEcN","number":64454,"title":"Enhance types for Node and Edge environments","user":{"login":"wyattjoh","id":633002,"node_id":"MDQ6VXNlcjYzMzAwMg==","avatar_url":"https://avatars.githubusercontent.com/u/633002?v=4","gravatar_id":"","url":"https://api.github.com/users/wyattjoh","html_url":"https://github.com/wyattjoh","followers_url":"https://api.github.com/users/wyattjoh/followers","following_url":"https://api.github.com/users/wyattjoh/following{/other_user}","gists_url":"https://api.github.com/users/wyattjoh/gists{/gist_id}","starred_url":"https://api.github.com/users/wyattjoh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wyattjoh/subscriptions","organizations_url":"https://api.github.com/users/wyattjoh/orgs","repos_url":"https://api.github.com/users/wyattjoh/repos","events_url":"https://api.github.com/users/wyattjoh/events{/privacy}","received_events_url":"https://api.github.com/users/wyattjoh/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-13T22:39:53Z","updated_at":"2024-05-03T12:02:03Z","closed_at":"2024-04-16T02:38:27Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64454","html_url":"https://github.com/vercel/next.js/pull/64454","diff_url":"https://github.com/vercel/next.js/pull/64454.diff","patch_url":"https://github.com/vercel/next.js/pull/64454.patch","merged_at":"2024-04-16T02:38:27Z"},"body":"<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n\r\n### What?\r\n\r\nThis enhances the typings in the `BaseServer`, `NextNodeServer`, and `NextWebServer` to simplify types for request and responses across the entire server. Rather than relying on manual environment checks only as the source with error-prone type casts, this adds basic guards (albeit naive) that assert the typings depending on the runtime environment variables. This greatly enhances the typings used across the servers as the servers no longer use the `as` keyword when working with these request and response types.\r\n\r\nThis is a precursor to future planned work to further split the different rendering runtimes to assist with code elimination and framework organization.\r\n\r\n### Why?\r\n\r\nAs a step to utilizing these more unified types, the `app-render.tsx` (App Pages rendering pipeline) has been modified to instead accept the abstract `BaseNextRequest` and `BaseNextResponse` types. This is a precursor to future work to split the streaming behaviour based on the runtime environment (ie, in Node.js, we can utilize the native streams instead of web streams, which offer significant performance gains).\r\n\r\n### How?\r\n\r\nThe server types were modified to be generic, allowing the three server implementations to have their types flow safely between the different methods. This enables us to only reference the `NodeNextRequest` within the `NextNodeServer`, and the `WebNextRequest` within the `NextWebServer` for example.\r\n\r\n [Loom Video](https://www.loom.com/share/76af2225cf0246d0b4f609ab3e35fff9?sid=c948a919-ac9e-4571-8a75-bd9d0a0776e2)\r\n\r\nCloses NEXT-3102","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64454/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64451","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64451/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64451/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64451/events","html_url":"https://github.com/vercel/next.js/pull/64451","id":2241689549,"node_id":"PR_kwDOBC3Cis5sksbY","number":64451,"title":"Fix ASL bundling for dynamic css","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-13T18:30:52Z","updated_at":"2024-05-01T12:02:27Z","closed_at":"2024-04-17T08:18:09Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64451","html_url":"https://github.com/vercel/next.js/pull/64451","diff_url":"https://github.com/vercel/next.js/pull/64451.diff","patch_url":"https://github.com/vercel/next.js/pull/64451.patch","merged_at":"2024-04-17T08:18:09Z"},"body":"### Why\r\n\r\nFor app page rendering on edge, the `AsyncLocalStorage` (ALS) should be bundled as same instance across layers. We're accessing the ALS in `next/dynamic` modules during SSR for preloading CSS chunks. There's a bug that we can't get the ALS store during SSR in edge, I digged into it and found the root cause is:\r\n\r\nWe have both import paths:\r\n`module (rsc layer) -> request ALS (shared layer)`\r\n`module (ssr layer) -> request ALS (shared layer)`\r\n\r\nWe expect the ALS to be the same module since we're using the same layer but found that they're treated as different modules due to applying another loader transform on ssr layer. They're resulted in the same `shared` layer, but with different resource queries. This PR excluded that transform so now they're identical across layers.\r\n\r\n\r\n### What\r\n\r\nFor webpack, we aligned the loaders applying to the async local storage, so that they're resolved as the same module now.\r\n\r\nFor turbopack, we leverage module transition, sort of creating a new `app-shared` layer for these modules, and apply the transition to all async local storage instances therefore the instances of them are only bundled once.\r\nTo make the turbopack chanegs work, we change how the async local storage modules defined, separate the instance into a single file and mark it as \"next-shared\" layer with import:\r\n\r\n```\r\nany module -> async local storage --- use transition, specify \"next-shared\" layer ---> async local storage instance\r\n```\r\n\r\nCloses NEXT-3085","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64451/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64449","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64449/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64449/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64449/events","html_url":"https://github.com/vercel/next.js/pull/64449","id":2241643245,"node_id":"PR_kwDOBC3Cis5skjhJ","number":64449,"title":"router restore should take priority over pending actions","user":{"login":"ztanner","id":1939140,"node_id":"MDQ6VXNlcjE5MzkxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/1939140?v=4","gravatar_id":"","url":"https://api.github.com/users/ztanner","html_url":"https://github.com/ztanner","followers_url":"https://api.github.com/users/ztanner/followers","following_url":"https://api.github.com/users/ztanner/following{/other_user}","gists_url":"https://api.github.com/users/ztanner/gists{/gist_id}","starred_url":"https://api.github.com/users/ztanner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ztanner/subscriptions","organizations_url":"https://api.github.com/users/ztanner/orgs","repos_url":"https://api.github.com/users/ztanner/repos","events_url":"https://api.github.com/users/ztanner/events{/privacy}","received_events_url":"https://api.github.com/users/ztanner/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-13T16:21:00Z","updated_at":"2024-04-28T12:01:59Z","closed_at":"2024-04-13T17:49:58Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64449","html_url":"https://github.com/vercel/next.js/pull/64449","diff_url":"https://github.com/vercel/next.js/pull/64449.diff","patch_url":"https://github.com/vercel/next.js/pull/64449.patch","merged_at":"2024-04-13T17:49:58Z"},"body":"Since the router processes events sequentially, we special case `ACTION_NAVIGATE` events to \"discard\" a pending server action so that it can process the navigation with higher priority. We should apply this same logic to `ACTION_RESTORE` events (e.g. `router.back()`) for the same reason.\r\n\r\nFixes #64432\r\n\r\n\r\nCloses NEXT-3098","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64449/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64446","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64446/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64446/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64446/events","html_url":"https://github.com/vercel/next.js/issues/64446","id":2241548559,"node_id":"I_kwDOBC3Cis6Fm1EP","number":64446,"title":"not-found return 200 for dynamic paths","user":{"login":"erwanriou","id":30130006,"node_id":"MDQ6VXNlcjMwMTMwMDA2","avatar_url":"https://avatars.githubusercontent.com/u/30130006?v=4","gravatar_id":"","url":"https://api.github.com/users/erwanriou","html_url":"https://github.com/erwanriou","followers_url":"https://api.github.com/users/erwanriou/followers","following_url":"https://api.github.com/users/erwanriou/following{/other_user}","gists_url":"https://api.github.com/users/erwanriou/gists{/gist_id}","starred_url":"https://api.github.com/users/erwanriou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erwanriou/subscriptions","organizations_url":"https://api.github.com/users/erwanriou/orgs","repos_url":"https://api.github.com/users/erwanriou/repos","events_url":"https://api.github.com/users/erwanriou/events{/privacy}","received_events_url":"https://api.github.com/users/erwanriou/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3499651836,"node_id":"LA_kwDOBC3Cis7QmHL8","url":"https://api.github.com/repos/vercel/next.js/labels/Output%20(export/standalone)","name":"Output (export/standalone)","color":"31A7C3","default":false,"description":"Related to the the output option in `next.config.js`."},{"id":5907879217,"node_id":"LA_kwDOBC3Cis8AAAABYCMVMQ","url":"https://api.github.com/repos/vercel/next.js/labels/invalid%20link","name":"invalid link","color":"444444","default":false,"description":"The issue was auto-closed due to a missing/invalid reproduction link. A new issue should be opened."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-13T12:52:09Z","updated_at":"2024-04-13T12:52:28Z","closed_at":"2024-04-13T12:52:26Z","author_association":"NONE","active_lock_reason":null,"body":"### Link to the code that reproduces this issue\n\nhttps://www.archsplace.com/whatever-not-found-page-u-fancy\n\n### To Reproduce\n\n1. Create a project with a high level dynamic path such as `[locale]` that is used in most website that reach a certain size\r\n2. Use a localization library such as `next-intl` recommanded by nextjs\r\n3. setup a custom `not-found.js` page inside this `[locale]` folder to catch all the potential not found\r\n\r\nin my case:\r\n\r\n\r\n```js\r\nimport { useTranslations } from \"next-intl\"\r\nimport React, { Suspense } from \"react\"\r\n// IMPORT COMPONENTS\r\nimport NotFound from \"@components/error/Error\"\r\n\r\nconst NotFoundPage = () => {\r\n  // HOOKS\r\n  const t = useTranslations(\"error\")\r\n\r\n  // MAIN RENDER\r\n  return (\r\n    <>\r\n      <title>{t(`error-page-title`)}</title>\r\n      <meta key=\"desc\" name=\"description\" content={t(`error-meta-desc`)} />\r\n      <Suspense fallback={<></>}>\r\n        <NotFound title={t(\"error-empty-title\", { error: 404 })} message={t(\"error-empty-message\")} label={t(\"error-empty-action\")} />\r\n      </Suspense>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default NotFoundPage\r\n```\r\n\r\n4. Setup a `loading.js` page also to handle streaming at the same level\r\n5. Enjoy the bug! The page show the correct `<meta name=\"robots\" content=\"noindex\">` and correct UI but no `404` status code, just a `200` (you can see it here for example https://www.archsplace.com/whatever-not-found-page-u-fancy)\r\n\r\n\n\n### Current vs. Expected behavior\n\n6. Check the correct behavior on a page that is absolutely not handled by my current dynamic paths --> https://www.archsplace.com/whatever-not-found-page-u-fancy/deeper-level/very-deep\r\n\r\nI would expect that when i use the `return notFound()` from `import { notFound } from \"next/navigation\"` it would generate the 404 status code but it does everything corretly less this specific part and i cannot see anything at this point than a bug since all the other behavior of the not-found page work correctly.\n\n### Provide environment information\n\n```bash\nnextjs 14.2.0 (but i tested with all the previous versions too)\r\nnode 20\r\nkubernetes\r\nnginx\r\netc...\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router, Standalone mode (output: \"standalone\")\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), Other (Deployed)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64446/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64442","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64442/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64442/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64442/events","html_url":"https://github.com/vercel/next.js/pull/64442","id":2241505855,"node_id":"PR_kwDOBC3Cis5skIrL","number":64442,"title":"Revert \"Fix: css in next/dynamic component in edge runtime\"","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-13T10:59:04Z","updated_at":"2024-04-27T12:02:02Z","closed_at":"2024-04-13T11:32:18Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64442","html_url":"https://github.com/vercel/next.js/pull/64442","diff_url":"https://github.com/vercel/next.js/pull/64442.diff","patch_url":"https://github.com/vercel/next.js/pull/64442.patch","merged_at":"2024-04-13T11:32:18Z"},"body":"The fix is not correct, we already have request ALS wrapping the request in app-render, shouldn't get another one for edge adapter. This is actually a bundler bug\r\n\r\nReverts vercel/next.js#64382\n\nCloses NEXT-3097","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64442/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64439","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64439/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64439/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64439/events","html_url":"https://github.com/vercel/next.js/pull/64439","id":2241429974,"node_id":"PR_kwDOBC3Cis5sj47Q","number":64439,"title":"Fix optimizePackageImports docs for Pages Router","user":{"login":"kxlow","id":13830377,"node_id":"MDQ6VXNlcjEzODMwMzc3","avatar_url":"https://avatars.githubusercontent.com/u/13830377?v=4","gravatar_id":"","url":"https://api.github.com/users/kxlow","html_url":"https://github.com/kxlow","followers_url":"https://api.github.com/users/kxlow/followers","following_url":"https://api.github.com/users/kxlow/following{/other_user}","gists_url":"https://api.github.com/users/kxlow/gists{/gist_id}","starred_url":"https://api.github.com/users/kxlow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kxlow/subscriptions","organizations_url":"https://api.github.com/users/kxlow/orgs","repos_url":"https://api.github.com/users/kxlow/repos","events_url":"https://api.github.com/users/kxlow/events{/privacy}","received_events_url":"https://api.github.com/users/kxlow/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-13T08:31:04Z","updated_at":"2024-04-28T12:02:03Z","closed_at":"2024-04-13T16:46:06Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64439","html_url":"https://github.com/vercel/next.js/pull/64439","diff_url":"https://github.com/vercel/next.js/pull/64439.diff","patch_url":"https://github.com/vercel/next.js/pull/64439.patch","merged_at":"2024-04-13T16:46:06Z"},"body":"The current documentation displays the docs for the `compress` option instead of the `optimizePackageImports` option.\r\n\r\nhttps://nextjs.org/docs/pages/api-reference/next-config-js/optimizePackageImports","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64439/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64436","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64436/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64436/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64436/events","html_url":"https://github.com/vercel/next.js/pull/64436","id":2241393351,"node_id":"PR_kwDOBC3Cis5sjxwy","number":64436,"title":"Update Turbopack development test manifest","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-13T07:04:41Z","updated_at":"2024-05-02T12:04:20Z","closed_at":"2024-04-14T07:45:45Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64436","html_url":"https://github.com/vercel/next.js/pull/64436","diff_url":"https://github.com/vercel/next.js/pull/64436.diff","patch_url":"https://github.com/vercel/next.js/pull/64436.patch","merged_at":null},"body":"This auto-generated PR updates the development integration test manifest used when testing Turbopack.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64436/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64436/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64433","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64433/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64433/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64433/events","html_url":"https://github.com/vercel/next.js/issues/64433","id":2241248792,"node_id":"I_kwDOBC3Cis6Flr4Y","number":64433,"title":"server action redirect() with parallel/intercepting routes not work","user":{"login":"NavOrange","id":23135654,"node_id":"MDQ6VXNlcjIzMTM1NjU0","avatar_url":"https://avatars.githubusercontent.com/u/23135654?v=4","gravatar_id":"","url":"https://api.github.com/users/NavOrange","html_url":"https://github.com/NavOrange","followers_url":"https://api.github.com/users/NavOrange/followers","following_url":"https://api.github.com/users/NavOrange/following{/other_user}","gists_url":"https://api.github.com/users/NavOrange/gists{/gist_id}","starred_url":"https://api.github.com/users/NavOrange/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NavOrange/subscriptions","organizations_url":"https://api.github.com/users/NavOrange/orgs","repos_url":"https://api.github.com/users/NavOrange/repos","events_url":"https://api.github.com/users/NavOrange/events{/privacy}","received_events_url":"https://api.github.com/users/NavOrange/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3502592891,"node_id":"LA_kwDOBC3Cis7QxVN7","url":"https://api.github.com/repos/vercel/next.js/labels/Navigation","name":"Navigation","color":"1830A5","default":false,"description":"Related to Next.js linking (e.g., <Link>) and navigation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-13T03:13:25Z","updated_at":"2024-04-28T12:01:51Z","closed_at":"2024-04-13T14:10:25Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/NavOrange/redirect-in-server-action-with-parallel-intercepting-routes.git\n\n### To Reproduce\n\n1. clone https://github.com/NavOrange/redirect-in-server-action-with-parallel-intercepting-routes.git\r\n2. pnpm install && pnpm dev\r\n3. click form link\r\n4. click dialog submit\n\n### Current vs. Expected behavior\n\nCurrent: since 14.2 server action redirect not work, route not change\r\nExpected behavior: redirect work, dialog close\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: darwin\r\n  Arch: x64\r\n  Version: Darwin Kernel Version 23.4.0: Fri Mar 15 00:11:05 PDT 2024; root:xnu-10063.101.17~1/RELEASE_X86_64\r\n  Available memory (MB): 16384\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 20.11.1\r\n  npm: 10.2.4\r\n  Yarn: N/A\r\n  pnpm: 8.15.6\r\nRelevant Packages:\r\n  next: 14.2.1 // Latest available version is detected (14.2.1).\r\n  eslint-config-next: 14.2.1\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router, Routing (next/router, next/navigation, next/link)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next start (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64433/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64433/timeline","performed_via_github_app":null,"state_reason":"not_planned"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64432","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64432/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64432/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64432/events","html_url":"https://github.com/vercel/next.js/issues/64432","id":2241245465,"node_id":"I_kwDOBC3Cis6FlrEZ","number":64432,"title":"Parallel / Intercepting Route (Modal) won't close until Server Action completes","user":{"login":"steve-marmalade","id":85196623,"node_id":"MDQ6VXNlcjg1MTk2NjIz","avatar_url":"https://avatars.githubusercontent.com/u/85196623?v=4","gravatar_id":"","url":"https://api.github.com/users/steve-marmalade","html_url":"https://github.com/steve-marmalade","followers_url":"https://api.github.com/users/steve-marmalade/followers","following_url":"https://api.github.com/users/steve-marmalade/following{/other_user}","gists_url":"https://api.github.com/users/steve-marmalade/gists{/gist_id}","starred_url":"https://api.github.com/users/steve-marmalade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steve-marmalade/subscriptions","organizations_url":"https://api.github.com/users/steve-marmalade/orgs","repos_url":"https://api.github.com/users/steve-marmalade/repos","events_url":"https://api.github.com/users/steve-marmalade/events{/privacy}","received_events_url":"https://api.github.com/users/steve-marmalade/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3502592891,"node_id":"LA_kwDOBC3Cis7QxVN7","url":"https://api.github.com/repos/vercel/next.js/labels/Navigation","name":"Navigation","color":"1830A5","default":false,"description":"Related to Next.js linking (e.g., <Link>) and navigation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-04-13T03:02:22Z","updated_at":"2024-04-30T00:04:36Z","closed_at":"2024-04-13T17:49:59Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\r\n\r\nhttps://github.com/marmalade-labs/nextgram\r\n\r\n### To Reproduce\r\n\r\n1. Navigate to deployed application: https://nextgram-sigma.vercel.app/\r\n2. Click a card to open a modal\r\n3. Press the \"Submit\" button (which triggers a server action with a 5 second sleep)\r\n4. Immediately try to close the modal by clicking the X\r\n\r\nThe diff against the \"official\" nextgram repo is pretty small: https://github.com/marmalade-labs/nextgram/commit/9a1e69dfdce215a5cf14f4b70ee9496d5fcf0250\r\n\r\n### Current vs. Expected behavior\r\n\r\nI expected the modal to close immediately, and for the server action to continue running in the background. Instead, the URL bar updates immediately, but the modal itself stays open until the server action completes.\r\n\r\n### Provide environment information\r\n\r\n```bash\r\nOperating System:\r\n  Platform: linux\r\n  Arch: x64\r\n  Version: #1 SMP PREEMPT_DYNAMIC Fri, 05 Apr 2024 00:14:23 +0000\r\n  Available memory (MB): 31886\r\n  Available CPU cores: 8\r\nBinaries:\r\n  Node: 18.18.2\r\n  npm: 10.5.1\r\n  Yarn: 1.22.22\r\n  pnpm: 8.15.5\r\nRelevant Packages:\r\n  next: 14.2.1-canary.3 // Latest available version is detected (14.2.1-canary.3).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\r\n```\r\n\r\n\r\n### Which area(s) are affected? (Select all that apply)\r\n\r\nApp Router, Routing (next/router, next/navigation, next/link)\r\n\r\n### Which stage(s) are affected? (Select all that apply)\r\n\r\nnext dev (local), next start (local), Vercel (Deployed)\r\n\r\n### Additional context\r\n\r\nThe current situation makes it hard to use optimistic updates along with server actions + modals, because the user gets the immediate feedback that the action succeeded and naturally tries to close the modal soon after, which results in the app \"hanging\" until the server action completes and the router can catch up.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64432/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64432/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64430","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64430/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64430/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64430/events","html_url":"https://github.com/vercel/next.js/pull/64430","id":2241136833,"node_id":"PR_kwDOBC3Cis5si6CJ","number":64430,"title":"Update font data","user":{"login":"vercel-release-bot","id":88769842,"node_id":"MDQ6VXNlcjg4NzY5ODQy","avatar_url":"https://avatars.githubusercontent.com/u/88769842?v=4","gravatar_id":"","url":"https://api.github.com/users/vercel-release-bot","html_url":"https://github.com/vercel-release-bot","followers_url":"https://api.github.com/users/vercel-release-bot/followers","following_url":"https://api.github.com/users/vercel-release-bot/following{/other_user}","gists_url":"https://api.github.com/users/vercel-release-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/vercel-release-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vercel-release-bot/subscriptions","organizations_url":"https://api.github.com/users/vercel-release-bot/orgs","repos_url":"https://api.github.com/users/vercel-release-bot/repos","events_url":"https://api.github.com/users/vercel-release-bot/events{/privacy}","received_events_url":"https://api.github.com/users/vercel-release-bot/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3555423777,"node_id":"LA_kwDOBC3Cis7T63Yh","url":"https://api.github.com/repos/vercel/next.js/labels/Font%20(next/font)","name":"Font (next/font)","color":"0D3A54","default":false,"description":"Related to Next.js Font Optimization."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-13T00:09:36Z","updated_at":"2024-05-02T12:04:18Z","closed_at":"2024-04-14T00:14:20Z","author_association":"COLLABORATOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64430","html_url":"https://github.com/vercel/next.js/pull/64430","diff_url":"https://github.com/vercel/next.js/pull/64430.diff","patch_url":"https://github.com/vercel/next.js/pull/64430.patch","merged_at":null},"body":"This auto-generated PR updates font data with latest available","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64430/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64427","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64427/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64427/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64427/events","html_url":"https://github.com/vercel/next.js/pull/64427","id":2241114218,"node_id":"PR_kwDOBC3Cis5si1Sh","number":64427,"title":"Turbopack: dont show long internal stack traces on build errors","user":{"login":"wbinnssmith","id":755844,"node_id":"MDQ6VXNlcjc1NTg0NA==","avatar_url":"https://avatars.githubusercontent.com/u/755844?v=4","gravatar_id":"","url":"https://api.github.com/users/wbinnssmith","html_url":"https://github.com/wbinnssmith","followers_url":"https://api.github.com/users/wbinnssmith/followers","following_url":"https://api.github.com/users/wbinnssmith/following{/other_user}","gists_url":"https://api.github.com/users/wbinnssmith/gists{/gist_id}","starred_url":"https://api.github.com/users/wbinnssmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wbinnssmith/subscriptions","organizations_url":"https://api.github.com/users/wbinnssmith/orgs","repos_url":"https://api.github.com/users/wbinnssmith/repos","events_url":"https://api.github.com/users/wbinnssmith/events{/privacy}","received_events_url":"https://api.github.com/users/wbinnssmith/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":4863306216,"node_id":"LA_kwDOBC3Cis8AAAABIeAp6A","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Turbopack%20team","name":"created-by: Turbopack team","color":"000000","default":false,"description":"PRs by the turbopack team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-12T23:30:24Z","updated_at":"2024-04-30T00:05:52Z","closed_at":"2024-04-15T21:40:56Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64427","html_url":"https://github.com/vercel/next.js/pull/64427","diff_url":"https://github.com/vercel/next.js/pull/64427.diff","patch_url":"https://github.com/vercel/next.js/pull/64427.patch","merged_at":"2024-04-15T21:40:56Z"},"body":"Turbopack: dont show long internal stack traces on build errors\n    \nFixes PACK-2909\n\nLooks like this may have been introduced in #61929, when code was moved out of `setup-dev-bundler.ts`, `ModuleBuildError` was duplicated and no longer satisfied the `instanceof` check.\n\nCloses PACK-2951\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64427/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64426","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64426/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64426/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64426/events","html_url":"https://github.com/vercel/next.js/pull/64426","id":2241104706,"node_id":"PR_kwDOBC3Cis5sizPc","number":64426,"title":"Update 13-middleware.mdx","user":{"login":"mehdi-mashayekhi","id":14169430,"node_id":"MDQ6VXNlcjE0MTY5NDMw","avatar_url":"https://avatars.githubusercontent.com/u/14169430?v=4","gravatar_id":"","url":"https://api.github.com/users/mehdi-mashayekhi","html_url":"https://github.com/mehdi-mashayekhi","followers_url":"https://api.github.com/users/mehdi-mashayekhi/followers","following_url":"https://api.github.com/users/mehdi-mashayekhi/following{/other_user}","gists_url":"https://api.github.com/users/mehdi-mashayekhi/gists{/gist_id}","starred_url":"https://api.github.com/users/mehdi-mashayekhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehdi-mashayekhi/subscriptions","organizations_url":"https://api.github.com/users/mehdi-mashayekhi/orgs","repos_url":"https://api.github.com/users/mehdi-mashayekhi/repos","events_url":"https://api.github.com/users/mehdi-mashayekhi/events{/privacy}","received_events_url":"https://api.github.com/users/mehdi-mashayekhi/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-12T23:13:23Z","updated_at":"2024-04-27T12:02:08Z","closed_at":"2024-04-13T04:30:07Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64426","html_url":"https://github.com/vercel/next.js/pull/64426","diff_url":"https://github.com/vercel/next.js/pull/64426.diff","patch_url":"https://github.com/vercel/next.js/pull/64426.patch","merged_at":null},"body":"<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64426/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64424","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64424/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64424/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64424/events","html_url":"https://github.com/vercel/next.js/pull/64424","id":2241065491,"node_id":"PR_kwDOBC3Cis5siqrA","number":64424,"title":"tweak test for Azure","user":{"login":"ztanner","id":1939140,"node_id":"MDQ6VXNlcjE5MzkxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/1939140?v=4","gravatar_id":"","url":"https://api.github.com/users/ztanner","html_url":"https://github.com/ztanner","followers_url":"https://api.github.com/users/ztanner/followers","following_url":"https://api.github.com/users/ztanner/following{/other_user}","gists_url":"https://api.github.com/users/ztanner/gists{/gist_id}","starred_url":"https://api.github.com/users/ztanner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ztanner/subscriptions","organizations_url":"https://api.github.com/users/ztanner/orgs","repos_url":"https://api.github.com/users/ztanner/repos","events_url":"https://api.github.com/users/ztanner/events{/privacy}","received_events_url":"https://api.github.com/users/ztanner/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-12T22:27:42Z","updated_at":"2024-04-28T12:01:55Z","closed_at":"2024-04-13T17:05:25Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64424","html_url":"https://github.com/vercel/next.js/pull/64424","diff_url":"https://github.com/vercel/next.js/pull/64424.diff","patch_url":"https://github.com/vercel/next.js/pull/64424.patch","merged_at":"2024-04-13T17:05:25Z"},"body":"Looks like the `useTempDir` function throws when running in Windows rather than piping the message to stderr. This makes the test resilient to both cases. \r\n\r\n<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n\r\n\r\nCloses NEXT-3095","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64424/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64422","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64422/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64422/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64422/events","html_url":"https://github.com/vercel/next.js/pull/64422","id":2241028157,"node_id":"PR_kwDOBC3Cis5siiJb","number":64422,"title":"docs(server-actions-and-mutations): switch onClick to formAction","user":{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":3644980154,"node_id":"LA_kwDOBC3Cis7ZQfu6","url":"https://api.github.com/repos/vercel/next.js/labels/Documentation","name":"Documentation","color":"C2E0C6","default":false,"description":"Related to Next.js' official documentation."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false},"assignees":[{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2024-04-12T22:05:28Z","updated_at":"2024-05-14T00:04:27Z","closed_at":"2024-04-23T04:00:31Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64422","html_url":"https://github.com/vercel/next.js/pull/64422","diff_url":"https://github.com/vercel/next.js/pull/64422.diff","patch_url":"https://github.com/vercel/next.js/pull/64422.patch","merged_at":null},"body":"## Why?\r\n\r\n- x-ref: https://github.com/vercel/next.js/pull/64248#discussion_r1563262033\r\n\r\nCloses NEXT-3094","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64422/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64421","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64421/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64421/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64421/events","html_url":"https://github.com/vercel/next.js/pull/64421","id":2241026721,"node_id":"PR_kwDOBC3Cis5sih0S","number":64421,"title":"Revert \"Update 02-server-actions-and-mutations.mdx (#64248)\"","user":{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false},"assignees":[{"login":"samcx","id":28912696,"node_id":"MDQ6VXNlcjI4OTEyNjk2","avatar_url":"https://avatars.githubusercontent.com/u/28912696?v=4","gravatar_id":"","url":"https://api.github.com/users/samcx","html_url":"https://github.com/samcx","followers_url":"https://api.github.com/users/samcx/followers","following_url":"https://api.github.com/users/samcx/following{/other_user}","gists_url":"https://api.github.com/users/samcx/gists{/gist_id}","starred_url":"https://api.github.com/users/samcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samcx/subscriptions","organizations_url":"https://api.github.com/users/samcx/orgs","repos_url":"https://api.github.com/users/samcx/repos","events_url":"https://api.github.com/users/samcx/events{/privacy}","received_events_url":"https://api.github.com/users/samcx/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-04-12T22:04:47Z","updated_at":"2024-05-20T22:47:44Z","closed_at":"2024-04-12T22:04:50Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":true,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64421","html_url":"https://github.com/vercel/next.js/pull/64421","diff_url":"https://github.com/vercel/next.js/pull/64421.diff","patch_url":"https://github.com/vercel/next.js/pull/64421.patch","merged_at":null},"body":"This reverts commit 322ecdf287942310c0250a0d9dc4d1b1fa40dcfa.\r\n\r\n<!-- Thanks for opening a PR! Your contribution is much appreciated.\r\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change(s) that you're making:\r\n\r\n## For Contributors\r\n\r\n### Improving Documentation\r\n\r\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\r\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\r\n\r\n### Adding or Updating Examples\r\n\r\n- The \"examples guidelines\" are followed from our contributing doc https://github.com/vercel/next.js/blob/canary/contributing/examples/adding-examples.md\r\n- Make sure the linting passes by running `pnpm build && pnpm lint`. See https://github.com/vercel/next.js/blob/canary/contributing/repository/linting.md\r\n\r\n### Fixing a bug\r\n\r\n- Related issues linked using `fixes #number`\r\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n### Adding a feature\r\n\r\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\r\n- Related issues/discussions are linked using `fixes #number`\r\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\r\n- Documentation added\r\n- Telemetry added. In case of a feature if it's used or not.\r\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\r\n\r\n\r\n## For Maintainers\r\n\r\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\r\n- When linking to a Slack thread, you might want to share details of the conclusion\r\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\r\n- Add review comments if necessary to explain to the reviewer the logic behind a change\r\n\r\n### What?\r\n\r\n### Why?\r\n\r\n### How?\r\n\r\nCloses NEXT-\r\nFixes #\r\n\r\n-->\r\n\n\nCloses NEXT-3093","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64421/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64419","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64419/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64419/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64419/events","html_url":"https://github.com/vercel/next.js/issues/64419","id":2240844318,"node_id":"I_kwDOBC3Cis6FkJIe","number":64419,"title":"Upgrading Next 14.2 broke how dd-trace is compiled and tries to bring in a devDependency of dd-trace","user":{"login":"drobannx","id":6361167,"node_id":"MDQ6VXNlcjYzNjExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/6361167?v=4","gravatar_id":"","url":"https://api.github.com/users/drobannx","html_url":"https://github.com/drobannx","followers_url":"https://api.github.com/users/drobannx/followers","following_url":"https://api.github.com/users/drobannx/following{/other_user}","gists_url":"https://api.github.com/users/drobannx/gists{/gist_id}","starred_url":"https://api.github.com/users/drobannx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drobannx/subscriptions","organizations_url":"https://api.github.com/users/drobannx/orgs","repos_url":"https://api.github.com/users/drobannx/repos","events_url":"https://api.github.com/users/drobannx/events{/privacy}","received_events_url":"https://api.github.com/users/drobannx/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-12T20:22:50Z","updated_at":"2024-04-27T12:01:54Z","closed_at":"2024-04-12T21:15:15Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\r\n\r\nhttps://codesandbox.io/p/devbox/pensive-star-go8s7s\r\n\r\n### To Reproduce\r\n\r\nWe have an `instrumentation.ts` file defined in the root with a register function as follows:\r\n\r\n```ts\r\nif (process.env.NEXT_RUNTIME === 'nodejs') {\r\n  await import('./instrumentation/tracer');\r\n}\r\n```\r\n\r\nInside of `tracer.ts`\r\n\r\n```\r\nimport tracer from 'dd-trace';\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  tracer.init();\r\n}\r\n```\r\n\r\n### Current vs. Expected behavior\r\n\r\nPreviously when running `next dev` there were no build issues at all. Once upgrading to 14.2.0, I now receive these error messages:\r\n\r\n```\r\nModule not found: Can't resolve 'graphql/utilities'\r\n```\r\n\r\nWhen I look at `dd-trace` package.json, graphql is listed as a devDependency. \r\n\r\n### Provide environment information\r\n\r\n```bash\r\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 23.4.0: Fri Mar 15 00:10:42 PDT 2024; root:xnu-10063.101.17~1/RELEASE_ARM64_T6000\r\n  Available memory (MB): 32768\r\n  Available CPU cores: 10\r\nBinaries:\r\n  Node: 18.17.1\r\n  npm: 9.6.7\r\n  Yarn: 1.22.19\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.0 // Latest available version is detected (14.2.0).\r\n  eslint-config-next: 14.0.4\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.3.3\r\n  dd-trace: 4.20.0\r\nNext.js Config:\r\n  output: standalone\r\n```\r\n\r\n\r\n### Which area(s) are affected? (Select all that apply)\r\n\r\nNot sure\r\n\r\n### Which stage(s) are affected? (Select all that apply)\r\n\r\nnext dev (local)\r\n\r\n### Additional context\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64419/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64418","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64418/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64418/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64418/events","html_url":"https://github.com/vercel/next.js/pull/64418","id":2240832505,"node_id":"PR_kwDOBC3Cis5sh1YT","number":64418,"title":"fix: `lib/helpers/install.ts` to better support pnpm and properly respect `root` argument","user":{"login":"Ethan-Arrowood","id":16144158,"node_id":"MDQ6VXNlcjE2MTQ0MTU4","avatar_url":"https://avatars.githubusercontent.com/u/16144158?v=4","gravatar_id":"","url":"https://api.github.com/users/Ethan-Arrowood","html_url":"https://github.com/Ethan-Arrowood","followers_url":"https://api.github.com/users/Ethan-Arrowood/followers","following_url":"https://api.github.com/users/Ethan-Arrowood/following{/other_user}","gists_url":"https://api.github.com/users/Ethan-Arrowood/gists{/gist_id}","starred_url":"https://api.github.com/users/Ethan-Arrowood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ethan-Arrowood/subscriptions","organizations_url":"https://api.github.com/users/Ethan-Arrowood/orgs","repos_url":"https://api.github.com/users/Ethan-Arrowood/repos","events_url":"https://api.github.com/users/Ethan-Arrowood/events{/privacy}","received_events_url":"https://api.github.com/users/Ethan-Arrowood/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-12T20:16:13Z","updated_at":"2024-04-30T00:06:08Z","closed_at":"2024-04-15T17:26:42Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64418","html_url":"https://github.com/vercel/next.js/pull/64418","diff_url":"https://github.com/vercel/next.js/pull/64418.diff","patch_url":"https://github.com/vercel/next.js/pull/64418.patch","merged_at":"2024-04-15T17:26:42Z"},"body":"This fixes and improves the `lib/helpers/install.ts` file (`install()`) method to better support pnpm and properly respect the `root` argument.\r\n\r\nI encountered an issue where by running `next <command> <project-dir>`, and the `<command>` involved installing missing dependencies (like `lint` or my upcoming `experimental-test`), it was not executing pnpm in my `<project-dir>` because pnpm doesn't have a `--cwd` flag. \r\n\r\n\n\nCloses NEXT-3092","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64418/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64417","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64417/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64417/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64417/events","html_url":"https://github.com/vercel/next.js/pull/64417","id":2240822204,"node_id":"PR_kwDOBC3Cis5shzEo","number":64417,"title":"Fix filename in route","user":{"login":"ishaangandhi","id":761037,"node_id":"MDQ6VXNlcjc2MTAzNw==","avatar_url":"https://avatars.githubusercontent.com/u/761037?v=4","gravatar_id":"","url":"https://api.github.com/users/ishaangandhi","html_url":"https://github.com/ishaangandhi","followers_url":"https://api.github.com/users/ishaangandhi/followers","following_url":"https://api.github.com/users/ishaangandhi/following{/other_user}","gists_url":"https://api.github.com/users/ishaangandhi/gists{/gist_id}","starred_url":"https://api.github.com/users/ishaangandhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ishaangandhi/subscriptions","organizations_url":"https://api.github.com/users/ishaangandhi/orgs","repos_url":"https://api.github.com/users/ishaangandhi/repos","events_url":"https://api.github.com/users/ishaangandhi/events{/privacy}","received_events_url":"https://api.github.com/users/ishaangandhi/received_events","type":"User","site_admin":false},"labels":[{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-12T20:08:37Z","updated_at":"2024-04-27T12:02:24Z","closed_at":"2024-04-12T20:09:19Z","author_association":"NONE","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64417","html_url":"https://github.com/vercel/next.js/pull/64417","diff_url":"https://github.com/vercel/next.js/pull/64417.diff","patch_url":"https://github.com/vercel/next.js/pull/64417.patch","merged_at":null},"body":"Minor docs fix.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64417/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64416","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64416/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64416/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64416/events","html_url":"https://github.com/vercel/next.js/issues/64416","id":2240798705,"node_id":"I_kwDOBC3Cis6Fj9_x","number":64416,"title":"BUGS FOUND  IN CANARY RELEASE","user":{"login":"swayamkumarkarn","id":137928349,"node_id":"U_kgDOCDienQ","avatar_url":"https://avatars.githubusercontent.com/u/137928349?v=4","gravatar_id":"","url":"https://api.github.com/users/swayamkumarkarn","html_url":"https://github.com/swayamkumarkarn","followers_url":"https://api.github.com/users/swayamkumarkarn/followers","following_url":"https://api.github.com/users/swayamkumarkarn/following{/other_user}","gists_url":"https://api.github.com/users/swayamkumarkarn/gists{/gist_id}","starred_url":"https://api.github.com/users/swayamkumarkarn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swayamkumarkarn/subscriptions","organizations_url":"https://api.github.com/users/swayamkumarkarn/orgs","repos_url":"https://api.github.com/users/swayamkumarkarn/repos","events_url":"https://api.github.com/users/swayamkumarkarn/events{/privacy}","received_events_url":"https://api.github.com/users/swayamkumarkarn/received_events","type":"User","site_admin":false},"labels":[{"id":2108224491,"node_id":"MDU6TGFiZWwyMTA4MjI0NDkx","url":"https://api.github.com/repos/vercel/next.js/labels/create-next-app","name":"create-next-app","color":"9effbb","default":false,"description":"Related to our CLI tool for quickly starting a new Next.js application."},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":3529098642,"node_id":"LA_kwDOBC3Cis7SWcWS","url":"https://api.github.com/repos/vercel/next.js/labels/Script%20(next/script)","name":"Script (next/script)","color":"1CE4CA","default":false,"description":"Related to Next.js Script Optimization."},{"id":4279919987,"node_id":"LA_kwDOBC3Cis7_GmVz","url":"https://api.github.com/repos/vercel/next.js/labels/Runtime","name":"Runtime","color":"f81ce5","default":false,"description":"Related to Node.js or Edge Runtime with Next.js."},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5907879217,"node_id":"LA_kwDOBC3Cis8AAAABYCMVMQ","url":"https://api.github.com/repos/vercel/next.js/labels/invalid%20link","name":"invalid link","color":"444444","default":false,"description":"The issue was auto-closed due to a missing/invalid reproduction link. A new issue should be opened."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-12T19:49:20Z","updated_at":"2024-04-12T19:49:38Z","closed_at":"2024-04-12T19:49:36Z","author_association":"NONE","active_lock_reason":null,"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/vercel/next.js/tree/canary/examples/reproduction-template\n\n### To Reproduce\n\nI created the nextjs application using npx create-next-app@latest\n\n### Current vs. Expected behavior\n\nthere is an error is webpack configuration \n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: win32\r\n  Arch: x64\r\n  Version: Windows 10 Pro\r\n  Available memory (MB): 14268\r\n  Available CPU cores: 4\r\nBinaries:\r\n  Node: 18.17.1\r\n  npm: N/A\r\n  Yarn: N/A\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.0 // Latest available version is detected (14.2.0).\r\n  eslint-config-next: 14.2.0\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nApp Router, CLI (create-next-app), Middleware / Edge (API routes, runtime), Script optimization (next/script), Turbopack (--turbo)\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next build (local), next start (local), Vercel (Deployed)\n\n### Additional context\n\nTHE LOGS FOR ERROR\r\n \r\n\r\n> next dev\r\n\r\n   Next.js 14.2.0\r\n  - Local:        http://localhost:3000\r\n\r\n  Starting...\r\nTypeError: fetch failed\r\n    at Object.fetch (node:internal/deps/undici/undici:11730:11)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async getVersionInfo (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\server\\dev\\hot-reloader-webpack.js:215:21)\r\n    at async Span.traceAsyncFn (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\trace\\trace.js:154:20)\r\n    at async HotReloaderWebpack.start (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\server\\dev\\hot-reloader-webpack.js:607:28)\r\n    at async startWatcher (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\server\\lib\\router-utils\\setup-dev-bundler.js:156:5)\r\n    at async setupDevBundler (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\server\\lib\\router-utils\\setup-dev-bundler.js:775:20)\r\n    at async Span.traceAsyncFn (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\trace\\trace.js:154:20)\r\n    at async initialize (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\server\\lib\\router-server.js:78:30)\r\n    at async Server.<anonymous> (D:\\Code\\projects\\dhiti-v2\\node_modules\\next\\dist\\server\\lib\\start-server.js:249:36) {\r\n  cause: Error: getaddrinfo ENOTFOUND registry.npmjs.org\r\n      at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:118:26) {\r\n    errno: -3008,\r\n    code: 'ENOTFOUND',\r\n    syscall: 'getaddrinfo',\r\n    hostname: 'registry.npmjs.org'\r\n  }\r\n}\r\n  Ready in 2.2s\r\n  Compiling / ...\r\n  ./src/app/globals.css.webpack[javascript/auto]!=!./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[13].oneOf[12].use[2]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[13].oneOf[12].use[3]!./src/app/globals.css\r\nError [ERR_UNSUPPORTED_ESM_URL_SCHEME]: Only URLs with a scheme in: file, data, and node are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\r\nImport trace for requested module:\r\n./src/app/globals.css.webpack[javascript/auto]!=!./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[13].oneOf[12].use[2]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[13].oneOf[12].use[3]!./src/app/globals.css\r\n./src/app/globals.css","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64416/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64412","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64412/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64412/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64412/events","html_url":"https://github.com/vercel/next.js/issues/64412","id":2240668104,"node_id":"I_kwDOBC3Cis6FjeHI","number":64412,"title":"14.2.0 throws errors with Turbopack when importing client components in route handlers that use context","user":{"login":"jmikrut","id":6651896,"node_id":"MDQ6VXNlcjY2NTE4OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6651896?v=4","gravatar_id":"","url":"https://api.github.com/users/jmikrut","html_url":"https://github.com/jmikrut","followers_url":"https://api.github.com/users/jmikrut/followers","following_url":"https://api.github.com/users/jmikrut/following{/other_user}","gists_url":"https://api.github.com/users/jmikrut/gists{/gist_id}","starred_url":"https://api.github.com/users/jmikrut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmikrut/subscriptions","organizations_url":"https://api.github.com/users/jmikrut/orgs","repos_url":"https://api.github.com/users/jmikrut/repos","events_url":"https://api.github.com/users/jmikrut/events{/privacy}","received_events_url":"https://api.github.com/users/jmikrut/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":4771244046,"node_id":"LA_kwDOBC3Cis8AAAABHGNoDg","url":"https://api.github.com/repos/vercel/next.js/labels/Turbopack","name":"Turbopack","color":"FF1E56","default":false,"description":"Related to Turbopack with Next.js."},{"id":5484123250,"node_id":"LA_kwDOBC3Cis8AAAABRuEUcg","url":"https://api.github.com/repos/vercel/next.js/labels/linear:%20turbopack","name":"linear: turbopack","color":"290F77","default":false,"description":"Confirmed issue that is tracked by the Turbopack team."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-04-12T18:11:36Z","updated_at":"2024-05-12T00:04:42Z","closed_at":"2024-04-26T22:26:34Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\r\n\r\nhttps://github.com/jmikrut/next-turbo-client-components\r\n\r\n### To Reproduce\r\n\r\n1. Start up the app with Webpack - `npm run dev` - note that it works\r\n2. Start up the app with Turbopack - `npm run dev:turbo` - note that it breaks\r\n\r\n### Current vs. Expected behavior\r\n\r\nTurbopack throws the following error:\r\n\r\n```\r\nTypeError: createContext only works in Client Components. Add the \"use client\" directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/context-in-server-component\r\n```\r\n\r\nBut, the component that uses `createContext` indeed has the `'use client'` directive at the top of the file, so this error should not be thrown.\r\n\r\n### Provide environment information\r\n\r\n```bash\r\nOperating System:\r\n  Platform: darwin\r\n  Arch: arm64\r\n  Version: Darwin Kernel Version 21.6.0: Mon Aug 22 20:19:52 PDT 2022; root:xnu-8020.140.49~2/RELEASE_ARM64_T6000\r\n  Available memory (MB): 32768\r\n  Available CPU cores: 10\r\nBinaries:\r\n  Node: 20.11.1\r\n  npm: 10.2.4\r\n  Yarn: 1.16.0\r\n  pnpm: 8.15.1\r\nRelevant Packages:\r\n  next: 14.2.0 // Latest available version is detected (14.2.0).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.1.3\r\nNext.js Config:\r\n  output: N/A\r\n```\r\n\r\n\r\n### Which area(s) are affected? (Select all that apply)\r\n\r\nTurbopack (--turbo)\r\n\r\n### Which stage(s) are affected? (Select all that apply)\r\n\r\nnext dev (local)\r\n\r\n### Additional context\r\n\r\nUp until `14.2.0-canary.34`, Turbopack was working properly for us at Payload. After that, Turbopack now throws an error.\r\n\r\nRelease that breaks it:\r\nhttps://github.com/vercel/next.js/releases/tag/v14.2.0-canary.34\r\n\r\nIt might seem strange that we are importing client components in a request handler, BUT, the Payload config contains both server-side and client-side code, including custom React components. We need the Payload config within API routes in order to function, so, safely being able to disregard client components within route handlers is paramount to us.\r\n\r\nAlso of note, `useState` works fine in the `ClientComponent` included in this repro. It's just `createContext` that breaks Turbopack. \n\n<sub>[PACK-3014](https://linear.app/vercel/issue/PACK-3014/1420-throws-errors-with-turbopack-when-importing-client-components-in)</sub>","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64412/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64412/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64411","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64411/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64411/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64411/events","html_url":"https://github.com/vercel/next.js/pull/64411","id":2240657980,"node_id":"PR_kwDOBC3Cis5shPJ_","number":64411,"title":"test: fix azure test for CNA","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-04-12T18:04:40Z","updated_at":"2024-04-27T12:02:12Z","closed_at":"2024-04-12T22:47:43Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":true,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64411","html_url":"https://github.com/vercel/next.js/pull/64411","diff_url":"https://github.com/vercel/next.js/pull/64411.diff","patch_url":"https://github.com/vercel/next.js/pull/64411.patch","merged_at":null},"body":"The fs write error message are different on azure\r\n\r\nx-ref: https://dev.azure.com/nextjs/next.js/_build/results?buildId=84876&view=logs&j=14d0eb3f-bc66-5450-3353-28256327ad6c&t=7e988112-57f9-5e14-1c8c-05f6c2b0ea47\n\nCloses NEXT-3091","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64411/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64408","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64408/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64408/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64408/events","html_url":"https://github.com/vercel/next.js/pull/64408","id":2240528552,"node_id":"PR_kwDOBC3Cis5sgyHF","number":64408,"title":"Improve rendering performance","user":{"login":"shuding","id":3676859,"node_id":"MDQ6VXNlcjM2NzY4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/3676859?v=4","gravatar_id":"","url":"https://api.github.com/users/shuding","html_url":"https://github.com/shuding","followers_url":"https://api.github.com/users/shuding/followers","following_url":"https://api.github.com/users/shuding/following{/other_user}","gists_url":"https://api.github.com/users/shuding/gists{/gist_id}","starred_url":"https://api.github.com/users/shuding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuding/subscriptions","organizations_url":"https://api.github.com/users/shuding/orgs","repos_url":"https://api.github.com/users/shuding/repos","events_url":"https://api.github.com/users/shuding/events{/privacy}","received_events_url":"https://api.github.com/users/shuding/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"PRs by the Next.js team"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-12T16:51:48Z","updated_at":"2024-04-27T12:02:20Z","closed_at":"2024-04-12T22:03:11Z","author_association":"MEMBER","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64408","html_url":"https://github.com/vercel/next.js/pull/64408","diff_url":"https://github.com/vercel/next.js/pull/64408.diff","patch_url":"https://github.com/vercel/next.js/pull/64408.patch","merged_at":"2024-04-12T22:03:11Z"},"body":"This PR improves the server rendering performance a bit, especially for the App Router. It has mainly 2 changes.\r\n\r\nA rough benchmark test with a 300kB Lorem Ipsum page, SSR is about 18% faster.\r\n\r\n### Improve `getServerInsertedHTML`\r\n\r\n- Avoid an extra `renderToReadableStream` if we already know the content will be empty\r\n- Avoid `await stream.allReady` for better parallelism with `streamToString()`\r\n- Increase the `progressiveChunkSize`\r\n\r\n### Improve `createHeadInsertionTransformStream`\r\n\r\n- Only do chunk splitting and enqueuing if the inserted string is not empty","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64408/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64407","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64407/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64407/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64407/events","html_url":"https://github.com/vercel/next.js/issues/64407","id":2240509443,"node_id":"I_kwDOBC3Cis6Fi3YD","number":64407,"title":"On Windows, absolute paths must be valid file:// URLs. Received protocol 'g:'","user":{"login":"toshicoxyz","id":91034362,"node_id":"MDQ6VXNlcjkxMDM0MzYy","avatar_url":"https://avatars.githubusercontent.com/u/91034362?v=4","gravatar_id":"","url":"https://api.github.com/users/toshicoxyz","html_url":"https://github.com/toshicoxyz","followers_url":"https://api.github.com/users/toshicoxyz/followers","following_url":"https://api.github.com/users/toshicoxyz/following{/other_user}","gists_url":"https://api.github.com/users/toshicoxyz/gists{/gist_id}","starred_url":"https://api.github.com/users/toshicoxyz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toshicoxyz/subscriptions","organizations_url":"https://api.github.com/users/toshicoxyz/orgs","repos_url":"https://api.github.com/users/toshicoxyz/repos","events_url":"https://api.github.com/users/toshicoxyz/events{/privacy}","received_events_url":"https://api.github.com/users/toshicoxyz/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/examples","name":"examples","color":"ecffaf","default":false,"description":"Issue/PR related to examples"},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-04-12T16:38:05Z","updated_at":"2024-04-27T12:01:51Z","closed_at":"2024-04-12T21:53:52Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Verify canary release\n\n- [X] I verified that the issue exists in the latest Next.js canary release\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: win32\r\n  Arch: x64\r\n  Version: Windows 10 Pro\r\n  Available memory (MB): 14268\r\n  Available CPU cores: 4\r\nBinaries:\r\n  Node: 18.17.1\r\n  npm: N/A\r\n  Yarn: N/A\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.0 // Latest available version is detected (14.2.0).\r\n  eslint-config-next: 14.2.0\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which example does this report relate to?\n\nLast version Next.js\n\n### What browser are you using? (if relevant)\n\n_No response_\n\n### How are you deploying your application? (if relevant)\n\n_No response_\n\n### Describe the Bug\n\n![image](https://github.com/vercel/next.js/assets/91034362/73bbf0bf-cc05-4638-ae09-3675897a917b)\r\n![image](https://github.com/vercel/next.js/assets/91034362/75437295-6288-44d1-afab-7cc9de23413d)\r\n![image](https://github.com/vercel/next.js/assets/91034362/e0ac5892-0120-4673-acf1-ec73ada4f8a5)\r\nVersion next@canary\r\n![image](https://github.com/vercel/next.js/assets/91034362/bd1dea71-e418-4562-a155-3d6ae33106ea)\r\n\n\n### Expected Behavior\n\nThat worked in previous versions, this did not happen.\n\n### To Reproduce\n\nJust use the instructions from the official nextjs documentation \"start a project\" https://nextjs.org/docs/getting-started/installation","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64407/timeline","performed_via_github_app":null,"state_reason":"completed"},{"url":"https://api.github.com/repos/vercel/next.js/issues/64405","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64405/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64405/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64405/events","html_url":"https://github.com/vercel/next.js/pull/64405","id":2240432798,"node_id":"PR_kwDOBC3Cis5sgczy","number":64405,"title":"fix(next-lint): update option --report-unused-disable-directives to --report-unused-disable-directives-severity","user":{"login":"coltonehrman","id":12456288,"node_id":"MDQ6VXNlcjEyNDU2Mjg4","avatar_url":"https://avatars.githubusercontent.com/u/12456288?v=4","gravatar_id":"","url":"https://api.github.com/users/coltonehrman","html_url":"https://github.com/coltonehrman","followers_url":"https://api.github.com/users/coltonehrman/followers","following_url":"https://api.github.com/users/coltonehrman/following{/other_user}","gists_url":"https://api.github.com/users/coltonehrman/gists{/gist_id}","starred_url":"https://api.github.com/users/coltonehrman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coltonehrman/subscriptions","organizations_url":"https://api.github.com/users/coltonehrman/orgs","repos_url":"https://api.github.com/users/coltonehrman/repos","events_url":"https://api.github.com/users/coltonehrman/events{/privacy}","received_events_url":"https://api.github.com/users/coltonehrman/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2024-04-12T15:55:06Z","updated_at":"2024-04-27T12:02:14Z","closed_at":"2024-04-12T22:09:05Z","author_association":"CONTRIBUTOR","active_lock_reason":"resolved","draft":false,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/64405","html_url":"https://github.com/vercel/next.js/pull/64405","diff_url":"https://github.com/vercel/next.js/pull/64405.diff","patch_url":"https://github.com/vercel/next.js/pull/64405.patch","merged_at":"2024-04-12T22:09:05Z"},"body":"## Why?\r\n\r\nThe Option name and type has been incorrect for `--report-unused-disable-directives` (it's likely that https://github.com/vercel/next.js/pull/61877 exposed this.\r\n\r\nFor correctness, we have updated the name to `--report-unsed-disable-directives-severity`  https://eslint.org/docs/v8.x/use/command-line-interface#--report-unused-disable-directives-severity.\r\n\r\n- Fixes https://github.com/vercel/next.js/issues/64402","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64405/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64405/timeline","performed_via_github_app":null,"state_reason":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/64404","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/64404/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/64404/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/64404/events","html_url":"https://github.com/vercel/next.js/issues/64404","id":2240385442,"node_id":"I_kwDOBC3Cis6FiZGi","number":64404,"title":"v14.2 Css styles are not loaded when navigating to a page with a wrapper component ","user":{"login":"milkyfuckinway","id":106594921,"node_id":"U_kgDOBlqCaQ","avatar_url":"https://avatars.githubusercontent.com/u/106594921?v=4","gravatar_id":"","url":"https://api.github.com/users/milkyfuckinway","html_url":"https://github.com/milkyfuckinway","followers_url":"https://api.github.com/users/milkyfuckinway/followers","following_url":"https://api.github.com/users/milkyfuckinway/following{/other_user}","gists_url":"https://api.github.com/users/milkyfuckinway/gists{/gist_id}","starred_url":"https://api.github.com/users/milkyfuckinway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milkyfuckinway/subscriptions","organizations_url":"https://api.github.com/users/milkyfuckinway/orgs","repos_url":"https://api.github.com/users/milkyfuckinway/repos","events_url":"https://api.github.com/users/milkyfuckinway/events{/privacy}","received_events_url":"https://api.github.com/users/milkyfuckinway/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/bug","name":"bug","color":"fddf99","default":true,"description":"Issue was opened via the bug report template."},{"id":5721224978,"node_id":"LA_kwDOBC3Cis8AAAABVQL3Eg","url":"https://api.github.com/repos/vercel/next.js/labels/locked","name":"locked","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2024-04-12T15:26:47Z","updated_at":"2024-05-02T12:02:17Z","closed_at":"2024-04-17T08:04:18Z","author_association":"NONE","active_lock_reason":"resolved","body":"### Link to the code that reproduces this issue\n\nhttps://github.com/milkyfuckinway/nextjs14.2cssbug\n\n### To Reproduce\n\n1. Start the application\r\n2. Navigate to the authorization page\r\n3. See that the styles didn't load.\r\nVideo: https://drive.google.com/file/d/1Mm8S2deb_vUF0MReNqz3u3v6eK_Q7g-a/view?usp=drive_link\n\n### Current vs. Expected behavior\n\nI expect the styles to load without having to refresh the page every time\n\n### Provide environment information\n\n```bash\nOperating System:\r\n  Platform: win32\r\n  Arch: x64\r\n  Version: Windows 10 Enterprise\r\n  Available memory (MB): 16244\r\n  Available CPU cores: 12\r\nBinaries:\r\n  Node: 20.11.1\r\n  npm: N/A\r\n  Yarn: N/A\r\n  pnpm: N/A\r\nRelevant Packages:\r\n  next: 14.2.0 // Latest available version is detected (14.2.0).\r\n  eslint-config-next: N/A\r\n  react: 18.2.0\r\n  react-dom: 18.2.0\r\n  typescript: 5.4.5\r\nNext.js Config:\r\n  output: N/A\n```\n\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/64404/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/64404/timeline","performed_via_github_app":null,"state_reason":"completed"}]